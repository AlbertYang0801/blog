<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL基础 | 技术小站</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="logo.ico">
    <meta name="description" content="生活不止眼前的代码，还有迈向田野的步伐">
    
    <link rel="preload" href="/blog/assets/css/0.styles.7915b91d.css" as="style"><link rel="preload" href="/blog/assets/js/app.c12bf646.js" as="script"><link rel="preload" href="/blog/assets/js/2.7ded94f8.js" as="script"><link rel="preload" href="/blog/assets/js/8.5bac1923.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.c8c59a9f.js"><link rel="prefetch" href="/blog/assets/js/100.c2faed5e.js"><link rel="prefetch" href="/blog/assets/js/101.7a5731cc.js"><link rel="prefetch" href="/blog/assets/js/102.36abe80c.js"><link rel="prefetch" href="/blog/assets/js/103.63fdf232.js"><link rel="prefetch" href="/blog/assets/js/104.364ef6a0.js"><link rel="prefetch" href="/blog/assets/js/105.e7fad755.js"><link rel="prefetch" href="/blog/assets/js/106.b5ef4293.js"><link rel="prefetch" href="/blog/assets/js/107.7c78085a.js"><link rel="prefetch" href="/blog/assets/js/108.a5b968d6.js"><link rel="prefetch" href="/blog/assets/js/109.605adde6.js"><link rel="prefetch" href="/blog/assets/js/11.f3c730d5.js"><link rel="prefetch" href="/blog/assets/js/110.0e1ff10d.js"><link rel="prefetch" href="/blog/assets/js/111.7c16b7e6.js"><link rel="prefetch" href="/blog/assets/js/112.2d97531b.js"><link rel="prefetch" href="/blog/assets/js/113.868ab954.js"><link rel="prefetch" href="/blog/assets/js/114.bc643977.js"><link rel="prefetch" href="/blog/assets/js/115.6b26058d.js"><link rel="prefetch" href="/blog/assets/js/12.3e7c40cd.js"><link rel="prefetch" href="/blog/assets/js/13.5e175502.js"><link rel="prefetch" href="/blog/assets/js/14.a614af2c.js"><link rel="prefetch" href="/blog/assets/js/15.01365556.js"><link rel="prefetch" href="/blog/assets/js/16.cc11f887.js"><link rel="prefetch" href="/blog/assets/js/17.a08f68e9.js"><link rel="prefetch" href="/blog/assets/js/18.189ddb29.js"><link rel="prefetch" href="/blog/assets/js/19.254e3695.js"><link rel="prefetch" href="/blog/assets/js/20.98a37fc6.js"><link rel="prefetch" href="/blog/assets/js/21.314768ec.js"><link rel="prefetch" href="/blog/assets/js/22.547673e0.js"><link rel="prefetch" href="/blog/assets/js/23.e9286205.js"><link rel="prefetch" href="/blog/assets/js/24.b493aa65.js"><link rel="prefetch" href="/blog/assets/js/25.25b49017.js"><link rel="prefetch" href="/blog/assets/js/26.f69863a7.js"><link rel="prefetch" href="/blog/assets/js/27.7bc8cce0.js"><link rel="prefetch" href="/blog/assets/js/28.86b76a76.js"><link rel="prefetch" href="/blog/assets/js/29.29b107ed.js"><link rel="prefetch" href="/blog/assets/js/3.3c8cf09d.js"><link rel="prefetch" href="/blog/assets/js/30.25d0641e.js"><link rel="prefetch" href="/blog/assets/js/31.3ea71e7b.js"><link rel="prefetch" href="/blog/assets/js/32.db9cf6ae.js"><link rel="prefetch" href="/blog/assets/js/33.8ba61471.js"><link rel="prefetch" href="/blog/assets/js/34.b64ee0fc.js"><link rel="prefetch" href="/blog/assets/js/35.b27f107f.js"><link rel="prefetch" href="/blog/assets/js/36.eeac78be.js"><link rel="prefetch" href="/blog/assets/js/37.c6424d7e.js"><link rel="prefetch" href="/blog/assets/js/38.b5bdf933.js"><link rel="prefetch" href="/blog/assets/js/39.1330d3fd.js"><link rel="prefetch" href="/blog/assets/js/4.93bdaf8a.js"><link rel="prefetch" href="/blog/assets/js/40.ba3ff3ea.js"><link rel="prefetch" href="/blog/assets/js/41.2010a720.js"><link rel="prefetch" href="/blog/assets/js/42.f809390a.js"><link rel="prefetch" href="/blog/assets/js/43.8bb9f778.js"><link rel="prefetch" href="/blog/assets/js/44.382a6196.js"><link rel="prefetch" href="/blog/assets/js/45.350b2804.js"><link rel="prefetch" href="/blog/assets/js/46.5a5738ed.js"><link rel="prefetch" href="/blog/assets/js/47.a9c108e7.js"><link rel="prefetch" href="/blog/assets/js/48.479ee17d.js"><link rel="prefetch" href="/blog/assets/js/49.84bcd037.js"><link rel="prefetch" href="/blog/assets/js/5.7d16fc96.js"><link rel="prefetch" href="/blog/assets/js/50.8aba7890.js"><link rel="prefetch" href="/blog/assets/js/51.d063c309.js"><link rel="prefetch" href="/blog/assets/js/52.45a5c188.js"><link rel="prefetch" href="/blog/assets/js/53.c49b82b1.js"><link rel="prefetch" href="/blog/assets/js/54.36ec8d0d.js"><link rel="prefetch" href="/blog/assets/js/55.5adc3f4c.js"><link rel="prefetch" href="/blog/assets/js/56.d4a2b501.js"><link rel="prefetch" href="/blog/assets/js/57.76a8d898.js"><link rel="prefetch" href="/blog/assets/js/58.a198dd01.js"><link rel="prefetch" href="/blog/assets/js/59.895d8f89.js"><link rel="prefetch" href="/blog/assets/js/6.c1bd8a18.js"><link rel="prefetch" href="/blog/assets/js/60.1ca909c4.js"><link rel="prefetch" href="/blog/assets/js/61.3ec2b87d.js"><link rel="prefetch" href="/blog/assets/js/62.e3b3c0c5.js"><link rel="prefetch" href="/blog/assets/js/63.32bbcea5.js"><link rel="prefetch" href="/blog/assets/js/64.64f59eed.js"><link rel="prefetch" href="/blog/assets/js/65.c7c4b019.js"><link rel="prefetch" href="/blog/assets/js/66.493171e8.js"><link rel="prefetch" href="/blog/assets/js/67.f2190fa7.js"><link rel="prefetch" href="/blog/assets/js/68.9488ffff.js"><link rel="prefetch" href="/blog/assets/js/69.a42ac7f6.js"><link rel="prefetch" href="/blog/assets/js/7.b3ad5181.js"><link rel="prefetch" href="/blog/assets/js/70.462c439c.js"><link rel="prefetch" href="/blog/assets/js/71.39b21af8.js"><link rel="prefetch" href="/blog/assets/js/72.60ca23f9.js"><link rel="prefetch" href="/blog/assets/js/73.5459e894.js"><link rel="prefetch" href="/blog/assets/js/74.0a34ec7f.js"><link rel="prefetch" href="/blog/assets/js/75.658643bb.js"><link rel="prefetch" href="/blog/assets/js/76.3efac05e.js"><link rel="prefetch" href="/blog/assets/js/77.0f448068.js"><link rel="prefetch" href="/blog/assets/js/78.32fee02f.js"><link rel="prefetch" href="/blog/assets/js/79.6a284e51.js"><link rel="prefetch" href="/blog/assets/js/80.ce56f875.js"><link rel="prefetch" href="/blog/assets/js/81.9a721258.js"><link rel="prefetch" href="/blog/assets/js/82.ca2bb8f3.js"><link rel="prefetch" href="/blog/assets/js/83.7d0d9e4d.js"><link rel="prefetch" href="/blog/assets/js/84.f8058a3d.js"><link rel="prefetch" href="/blog/assets/js/85.50a8110f.js"><link rel="prefetch" href="/blog/assets/js/86.9248b927.js"><link rel="prefetch" href="/blog/assets/js/87.b7eddfef.js"><link rel="prefetch" href="/blog/assets/js/88.288650fb.js"><link rel="prefetch" href="/blog/assets/js/89.eaa19525.js"><link rel="prefetch" href="/blog/assets/js/9.59267eaa.js"><link rel="prefetch" href="/blog/assets/js/90.3cbd112c.js"><link rel="prefetch" href="/blog/assets/js/91.00472f3d.js"><link rel="prefetch" href="/blog/assets/js/92.29ba9467.js"><link rel="prefetch" href="/blog/assets/js/93.331e51d4.js"><link rel="prefetch" href="/blog/assets/js/94.fbc99be0.js"><link rel="prefetch" href="/blog/assets/js/95.9ab9950c.js"><link rel="prefetch" href="/blog/assets/js/96.9ddcdd2a.js"><link rel="prefetch" href="/blog/assets/js/97.bbec150d.js"><link rel="prefetch" href="/blog/assets/js/98.ce0281ac.js"><link rel="prefetch" href="/blog/assets/js/99.8de07dc9.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.7915b91d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">技术小站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java篇" class="dropdown-title"><span class="title">Java篇</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java篇" class="mobile-dropdown-title"><span class="title">Java篇</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/collection/" class="nav-link">
  Java 容器
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/jvm/" class="nav-link">
  Java 虚拟机
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/concurrent/" class="nav-link">
  Java 高并发
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/io/" class="nav-link">
  Java IO
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/database/mysql/" class="nav-link router-link-active">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/blog/database/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架篇" class="dropdown-title"><span class="title">框架篇</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架篇" class="mobile-dropdown-title"><span class="title">框架篇</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frame/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/springboot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/mybatis/" class="nav-link">
  MyBatis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶篇" class="dropdown-title"><span class="title">进阶篇</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶篇" class="mobile-dropdown-title"><span class="title">进阶篇</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/middleware/es/" class="nav-link">
  Elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/blog/middleware/docker/" class="nav-link">
  Docker
</a></li></ul></div></div><div class="nav-item"><a href="/blog/design/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/blog/util/" class="nav-link">
  工具向
</a></div><div class="nav-item"><a href="/blog/personal/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java篇" class="dropdown-title"><span class="title">Java篇</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java篇" class="mobile-dropdown-title"><span class="title">Java篇</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/collection/" class="nav-link">
  Java 容器
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/jvm/" class="nav-link">
  Java 虚拟机
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/concurrent/" class="nav-link">
  Java 高并发
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/io/" class="nav-link">
  Java IO
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/database/mysql/" class="nav-link router-link-active">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/blog/database/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架篇" class="dropdown-title"><span class="title">框架篇</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架篇" class="mobile-dropdown-title"><span class="title">框架篇</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frame/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/springboot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/mybatis/" class="nav-link">
  MyBatis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶篇" class="dropdown-title"><span class="title">进阶篇</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶篇" class="mobile-dropdown-title"><span class="title">进阶篇</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/middleware/es/" class="nav-link">
  Elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/blog/middleware/docker/" class="nav-link">
  Docker
</a></li></ul></div></div><div class="nav-item"><a href="/blog/design/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/blog/util/" class="nav-link">
  工具向
</a></div><div class="nav-item"><a href="/blog/personal/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面试相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/database/mysql/MySQL基础.html" class="active sidebar-link">MySQL基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#一、ddl语句" class="sidebar-link">一、DDL语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#数据库的管理" class="sidebar-link">数据库的管理</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#数据表的管理" class="sidebar-link">数据表的管理</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#二、dml语言" class="sidebar-link">二、DML语言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#插入" class="sidebar-link">插入</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#更新" class="sidebar-link">更新</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#删除" class="sidebar-link">删除</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#三、查询总结" class="sidebar-link">三、查询总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#比较运算" class="sidebar-link">比较运算</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#模糊查询" class="sidebar-link">模糊查询</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#去重查询" class="sidebar-link">去重查询</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#聚合查询" class="sidebar-link">聚合查询</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#分组查询" class="sidebar-link">分组查询</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#排序查询" class="sidebar-link">排序查询</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#分页查询" class="sidebar-link">分页查询</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#合并查询" class="sidebar-link">合并查询</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#多表查询" class="sidebar-link">多表查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#四、数据类型" class="sidebar-link">四、数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#整数类型" class="sidebar-link">整数类型</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#小数类型" class="sidebar-link">小数类型</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#时间类型" class="sidebar-link">时间类型</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#字符类型" class="sidebar-link">字符类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#五、常用函数" class="sidebar-link">五、常用函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#字符函数" class="sidebar-link">字符函数</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#数学函数" class="sidebar-link">数学函数</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#日期函数" class="sidebar-link">日期函数</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#其它函数" class="sidebar-link">其它函数</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#连接函数-concat" class="sidebar-link">连接函数- concat</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#分组聚合函数-group-concat" class="sidebar-link">分组聚合函数 - group_concat</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#时间戳格式化函数-date-format" class="sidebar-link">时间戳格式化函数 - date-format</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#六、约束" class="sidebar-link">六、约束</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#什么是约束" class="sidebar-link">什么是约束？</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#唯一约束-unique" class="sidebar-link">唯一约束 - UNIQUE</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#主键约束-primary" class="sidebar-link">主键约束 - PRIMARY</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#外键约束" class="sidebar-link">外键约束</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#非空约束" class="sidebar-link">非空约束</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#七、常见问题" class="sidebar-link">七、常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#_1-having-和-where-的区别" class="sidebar-link">1. having 和 where 的区别？</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#_2-select-语句执行顺序" class="sidebar-link">2. SELECT 语句执行顺序</a></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#_3-除法-div-和-的区别" class="sidebar-link">3. 除法 div 和 / 的区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/database/mysql/MySQL基础.html#参考链接" class="sidebar-link">参考链接</a></li></ul></li><li><a href="/blog/database/mysql/MySQL高级.html" class="sidebar-link">MySQL高级</a></li><li><a href="/blog/database/mysql/MySQL面试题.html" class="sidebar-link">MYSQL面试题</a></li><li><a href="/blog/database/mysql/MySQL异常问题汇总.html" class="sidebar-link">MySQL异常问题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql基础"><a href="#mysql基础" class="header-anchor">#</a> MySQL基础</h1> <ul><li><a href="#mysql%E5%9F%BA%E7%A1%80">MySQL基础</a> <ul><li><a href="#%E4%B8%80%E3%80%81ddl%E8%AF%AD%E5%8F%A5">一、DDL语句</a> <ul><li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%AE%A1%E7%90%86">数据库的管理</a></li> <li><a href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E7%AE%A1%E7%90%86">数据表的管理</a></li></ul></li> <li><a href="#%E4%BA%8C%E3%80%81dml%E8%AF%AD%E8%A8%80">二、DML语言</a> <ul><li><a href="#%E6%8F%92%E5%85%A5">插入</a></li> <li><a href="#%E6%9B%B4%E6%96%B0">更新</a></li> <li><a href="#%E5%88%A0%E9%99%A4">删除</a> <ul><li><a href="#delete">delete</a></li> <li><a href="#truncate">truncate</a></li> <li><a href="#%E4%B8%A4%E7%A7%8D%E5%88%A0%E9%99%A4%E6%96%B9%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB">两种删除方式的区别</a></li></ul></li></ul></li> <li><a href="#%E4%B8%89%E3%80%81%E6%9F%A5%E8%AF%A2%E6%80%BB%E7%BB%93">三、查询总结</a> <ul><li><a href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97">比较运算</a></li> <li><a href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2">模糊查询</a></li> <li><a href="#%E5%8E%BB%E9%87%8D%E6%9F%A5%E8%AF%A2">去重查询</a></li> <li><a href="#%E8%81%9A%E5%90%88%E6%9F%A5%E8%AF%A2">聚合查询</a></li> <li><a href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2">分组查询</a></li> <li><a href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2">排序查询</a></li> <li><a href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2">分页查询</a></li> <li><a href="#%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2">合并查询</a></li> <li><a href="#%E5%AD%90%E6%9F%A5%E8%AF%A2">子查询</a> <ul><li><a href="#where-%E5%9E%8B%E5%AD%90%E6%9F%A5%E8%AF%A2">where 型子查询</a></li> <li><a href="#from-%E5%9E%8B%E5%AD%90%E6%9F%A5%E8%AF%A2">from 型子查询</a></li></ul></li> <li><a href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2">多表查询</a> <ul><li><a href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E9%9B%86">笛卡尔集</a></li> <li><a href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5">等值连接</a></li> <li><a href="#%E8%87%AA%E8%BF%9E%E6%8E%A5">自连接</a></li> <li><a href="#%E5%86%85%E8%BF%9E%E6%8E%A5">内连接</a></li> <li><a href="#%E5%B7%A6%E8%BF%9E%E6%8E%A5">左连接</a></li> <li><a href="#%E5%8F%B3%E8%BF%9E%E6%8E%A5">右连接</a></li></ul></li></ul></li> <li><a href="#%E5%9B%9B%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">四、数据类型</a> <ul><li><a href="#%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B">整数类型</a></li> <li><a href="#%E5%B0%8F%E6%95%B0%E7%B1%BB%E5%9E%8B">小数类型</a> <ul><li><a href="#%E6%B5%AE%E7%82%B9%E7%B1%BB%E5%9E%8B">浮点类型</a></li> <li><a href="#%E5%AE%9A%E7%82%B9%E7%B1%BB%E5%9E%8B">定点类型</a></li> <li><a href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E5%92%8C%E5%AE%9A%E7%82%B9%E6%95%B0%E7%9A%84%E6%AF%94%E8%BE%83">浮点数和定点数的比较</a></li></ul></li> <li><a href="#%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B">时间类型</a></li> <li><a href="#%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B">字符类型</a></li></ul></li> <li><a href="#%E4%BA%94%E3%80%81%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0">五、常用函数</a> <ul><li><a href="#%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0">字符函数</a></li> <li><a href="#%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0">数学函数</a></li> <li><a href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0">日期函数</a></li> <li><a href="#%E5%85%B6%E5%AE%83%E5%87%BD%E6%95%B0">其它函数</a></li> <li><a href="#%E8%BF%9E%E6%8E%A5%E5%87%BD%E6%95%B0--concat">连接函数- concat</a></li> <li><a href="#%E5%88%86%E7%BB%84%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0---group_concat">分组聚合函数 - group_concat</a></li> <li><a href="#%E6%97%B6%E9%97%B4%E6%88%B3%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%87%BD%E6%95%B0---date-format">时间戳格式化函数 - date-format</a></li></ul></li> <li><a href="#%E5%85%AD%E3%80%81%E7%BA%A6%E6%9D%9F">六、约束</a> <ul><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%A6%E6%9D%9F%EF%BC%9F">什么是约束？</a></li> <li><a href="#%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F---unique">唯一约束 - UNIQUE</a> <ul><li><a href="#%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%E5%92%8C%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%9F">唯一约束和唯一索引的关系？</a></li> <li><a href="#%E6%96%B0%E5%A2%9E%E5%92%8C%E5%8F%96%E6%B6%88%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F">新增和取消唯一约束</a></li></ul></li> <li><a href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F---primary">主键约束 - PRIMARY</a></li> <li><a href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F">外键约束</a> <ul><li><a href="#%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE">如何添加外键</a></li> <li><a href="#%E5%88%A0%E9%99%A4%E5%92%8C%E6%9B%B4%E6%96%B0%E7%9A%84%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5">删除和更新的处理策略</a></li></ul></li> <li><a href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F">非空约束</a> <ul><li><a href="#%E6%96%B0%E5%A2%9E%E5%92%8C%E5%8F%96%E6%B6%88%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F">新增和取消非空约束</a></li></ul></li></ul></li> <li><a href="#%E4%B8%83%E3%80%81%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">七、常见问题</a> <ul><li><a href="#having-%E5%92%8C-where-%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F">having 和 where 的区别？</a></li> <li><a href="#select-%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F">SELECT 语句执行顺序</a></li> <li><a href="#%E9%99%A4%E6%B3%95-div-%E5%92%8C--%E7%9A%84%E5%8C%BA%E5%88%AB">除法 div 和 / 的区别</a></li></ul></li> <li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">参考链接</a></li></ul></li></ul> <h2 id="一、ddl语句"><a href="#一、ddl语句" class="header-anchor">#</a> 一、DDL语句</h2> <p>数据定义语言DDL用来创建数据库中的各种对象-----表、视图、索引、同义词、聚簇等。DDL操作是隐性提交的，不能 RollBack。</p> <h3 id="数据库的管理"><a href="#数据库的管理" class="header-anchor">#</a> 数据库的管理</h3> <ol><li><p>新建数据库</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> 库名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除数据库</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> 库名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h3 id="数据表的管理"><a href="#数据表的管理" class="header-anchor">#</a> 数据表的管理</h3> <ol><li><p>创建表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span><span class="token keyword">user</span><span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>username<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sex<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'性别'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>group_code<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'外键'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>property<span class="token punctuation">`</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>money<span class="token punctuation">`</span> <span class="token keyword">float</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span><span class="token keyword">timestamp</span><span class="token punctuation">`</span> <span class="token keyword">timestamp</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>删除表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span><span class="token operator">|</span><span class="token keyword">MODIFY</span><span class="token operator">|</span><span class="token keyword">DROP</span><span class="token operator">|</span>CHANGE <span class="token keyword">COLUMN</span> 字段名 【字段类型】<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改表名</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> classroom <span class="token keyword">RENAME</span>  class<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改表字段</p> <p><strong>语法</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student CHANGE <span class="token keyword">COLUMN</span> <span class="token punctuation">[</span>旧字段名<span class="token punctuation">]</span> <span class="token punctuation">[</span>新字段名<span class="token punctuation">]</span> <span class="token punctuation">[</span>字段类型<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>比如如下 SQL：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student CHANGE <span class="token keyword">COLUMN</span> old new <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改表字段类型</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> sex <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>新增字段</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除字段</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> email<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <hr> <h2 id="二、dml语言"><a href="#二、dml语言" class="header-anchor">#</a> 二、DML语言</h2> <p>数据操纵语言 DML 主要有三种形式：插入（INSERT）、更新（UPDATE）和删除（DELETE）。</p> <h3 id="插入"><a href="#插入" class="header-anchor">#</a> 插入</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>字段名，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>	<span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span>，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>特点</strong></p> <ol><li>字段类型和值类型一致或兼容，而且一一对应。</li> <li>可以为空的字段，可以不用插入值，或用 NULL 填充。</li> <li>不可以为空的字段，必须插入值。</li> <li>字段个数和值的个数必须一致。</li> <li>字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致。</li></ol> <hr> <h3 id="更新"><a href="#更新" class="header-anchor">#</a> 更新</h3> <ul><li><p>更新单表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> 表名 <span class="token keyword">set</span> filed1<span class="token operator">=</span>value1<span class="token punctuation">,</span>filed2<span class="token operator">=</span>value2 【<span class="token keyword">where</span> 条件】
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>更新多表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span>  别名<span class="token number">1</span><span class="token punctuation">,</span>表<span class="token number">2</span> 别名<span class="token number">2</span>
<span class="token keyword">set</span> 字段<span class="token operator">=</span>新值，字段<span class="token operator">=</span>新值
<span class="token keyword">where</span> 连接条件
<span class="token operator">and</span> 筛选条件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <hr> <h3 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h3> <h4 id="delete"><a href="#delete" class="header-anchor">#</a> delete</h4> <ul><li><p>单表删除</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 【<span class="token keyword">where</span> 筛选条件】
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>多表删除</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> 别名<span class="token number">1</span>，别名<span class="token number">2</span>
	<span class="token keyword">from</span> 表<span class="token number">1</span> 别名<span class="token number">1</span>，表<span class="token number">2</span> 别名<span class="token number">2</span>
	<span class="token keyword">where</span> 连接条件
	<span class="token operator">and</span> 筛选条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h4 id="truncate"><a href="#truncate" class="header-anchor">#</a> truncate</h4> <p><strong>语法</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="两种删除方式的区别"><a href="#两种删除方式的区别" class="header-anchor">#</a> 两种删除方式的区别</h4> <ul><li>DELETE 是逐行一条一条删除记录的；TRUNCATE 则是直接删除原来的表，再重新创建一个一模一样的新表，而不是逐行删除表中的数据，执行数据比 DELETE 快。因此需要删除表中全部的数据行时，尽量使用 TRUNCATE 语句， 可以缩短执行时间。</li> <li>DELETE 删除数据后，配合事件回滚可以找回数据；TRUNCATE 不支持事务的回滚，数据删除后无法找回。</li> <li>DELETE 删除数据后，系统不会重新设置自增字段的计数器；TRUNCATE 清空表记录后，系统会重新设置自增字段的计数器。</li> <li>DELETE 的使用范围更广，因为它可以通过 WHERE 子句指定条件来删除部分数据；而 TRUNCATE 不支持 WHERE 子句，只能删除整体。</li> <li>DELETE 会返回删除数据的行数，但是 TRUNCATE 只会返回 0，没有任何意义。</li></ul> <p><strong>总结</strong></p> <p><strong>当不需要该表时，用 DROP；当仍要保留该表，但要删除所有记录时，用 TRUNCATE；当要删除部分记录时，用 DELETE。</strong></p> <hr> <h2 id="三、查询总结"><a href="#三、查询总结" class="header-anchor">#</a> 三、查询总结</h2> <p><strong>测试数据</strong></p> <img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211014192757.png" alt="image-20211014192757892" style="zoom:50%;"> <hr> <h3 id="比较运算"><a href="#比较运算" class="header-anchor">#</a> 比较运算</h3> <table><thead><tr><th>操作符</th> <th>含义</th> <th>备注</th></tr></thead> <tbody><tr><td>=</td> <td>等于</td> <td>不是 ==</td></tr> <tr><td>&gt;</td> <td>大于</td> <td></td></tr> <tr><td>&gt;=</td> <td>大于等于</td> <td></td></tr> <tr><td>&lt;</td> <td>小于</td> <td></td></tr> <tr><td>&lt;=</td> <td>小于等于</td> <td></td></tr> <tr><td>&lt;&gt;</td> <td>不等于</td> <td>也可以是 !=</td></tr> <tr><td>BETWEEN [START] AND [END]</td> <td>在两个值之间</td> <td>包含边界</td></tr> <tr><td>IN (V1,V2,V3)</td> <td>是否存在于值列表中</td> <td></td></tr> <tr><td>LIKE</td> <td>模糊查询</td> <td></td></tr> <tr><td>IS (NOT) NULL</td> <td>判断空值</td> <td></td></tr></tbody></table> <ul><li><p>BETWEEN-AND</p> <p><code>BETWEEN [START] AND [END]</code> 范围查询，包含条件的边界值，类似于 <code>END &lt;= value &lt;=START</code>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> order_info
<span class="token keyword">where</span> amount_money <span class="token operator">BETWEEN</span> <span class="token number">23.60</span> <span class="token operator">and</span> <span class="token number">100</span>

<span class="token number">24</span>	《繁华<span class="token number">2</span>》	<span class="token number">23.60</span>	<span class="token number">4</span>	爱读书的人	<span class="token number">2021</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">03</span> <span class="token number">16</span>:<span class="token number">29</span>:<span class="token number">00</span>	<span class="token number">2</span>
<span class="token number">25</span>	《繁华<span class="token number">2</span>》	<span class="token number">23.60</span>	<span class="token number">1</span>	爱读书的人	<span class="token number">2021</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">14</span> <span class="token number">19</span>:<span class="token number">46</span>:<span class="token number">26</span>	<span class="token number">2</span>
<span class="token number">28</span>	限时发送的订单	<span class="token number">100.00</span>	<span class="token number">4</span>	yjw	<span class="token number">2021</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">14</span> <span class="token number">16</span>:<span class="token number">20</span>:<span class="token number">01</span>	<span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <hr> <h3 id="模糊查询"><a href="#模糊查询" class="header-anchor">#</a> 模糊查询</h3> <p>使用 LIKE 关键字进行模糊查询。</p> <ul><li><code>%</code> 代表任意个字符。</li> <li><code>_</code> 代表一个字符。</li></ul> <p><em><code>%</code> 和 <code>_</code> 可以同时使用。</em></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name <span class="token keyword">from</span> order_info
<span class="token keyword">where</span> order_name <span class="token operator">like</span> <span class="token string">'%2'</span>
<span class="token comment">//NULL</span>

<span class="token keyword">select</span> order_name <span class="token keyword">from</span> order_info
<span class="token keyword">where</span> order_name <span class="token operator">like</span> <span class="token string">'%2%'</span>
<span class="token comment">//《繁华2》</span>

<span class="token keyword">select</span> order_name <span class="token keyword">from</span> order_info
<span class="token keyword">where</span> order_name <span class="token operator">like</span> <span class="token string">'%2_'</span>

<span class="token comment">//《繁华2》</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="去重查询"><a href="#去重查询" class="header-anchor">#</a> 去重查询</h3> <p><strong>在查询列前添加关键字 <code>DISTINCT</code>,可实现对查询结果的去重复。</strong></p> <ul><li><p>单列去重</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token keyword">select</span> <span class="token keyword">DISTINCT</span> order_name <span class="token keyword">from</span> order_info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211014192844.png" alt="image-20211014192844791" style="zoom:50%;"></li> <li><p>多列去重</p> <p>对多列也可以实现去重。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">DISTINCT</span> order_name<span class="token punctuation">,</span>order_status <span class="token keyword">from</span> order_info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211014192908.png" alt="image-20211014192908539" style="zoom:50%;"></li></ul> <hr> <h3 id="聚合查询"><a href="#聚合查询" class="header-anchor">#</a> 聚合查询</h3> <p>MySQL 中有聚合函数，用来对<strong>某一列</strong>进行计算，常用函数列表如下。</p> <p><em>聚合函数默认情况下会忽略值为 null 的行，不参与计算。</em></p> <table><thead><tr><th>函数</th> <th>作用</th> <th>备注</th></tr></thead> <tbody><tr><td>AVG([distinct] expr)</td> <td>求平均值</td> <td>适用于数值型字段</td></tr> <tr><td>COUNT({*|[distinct] } expr)</td> <td>统计行的数量</td> <td><code>count(*)</code>统计数据行数；<code>count(列名)</code>统计列值非空的数量;</td></tr> <tr><td>MAX([distinct] expr)</td> <td>求最大值</td> <td>适用于任意数据类型字段</td></tr> <tr><td>MIN([distinct] expr)</td> <td>求最小值</td> <td>适用于任意数据类型字段</td></tr> <tr><td>SUM([distinct] expr)</td> <td>求累加和</td> <td>适用于数值型字段</td></tr></tbody></table> <p><strong>注意</strong></p> <ol><li>聚合函数不允许嵌套。</li> <li>聚合函数的参数可以是<strong>某一列</strong>或者<strong>函数表达式</strong>。</li> <li>一个 SELECT 子句可以有多个聚合函数。</li> <li>WHERE 子句不能使用组函数，而 Having 可以使用组函数。</li></ol> <p><strong>SQL练习</strong></p> <p>测试表内容如下：</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211014193715.png" alt="image-20211014193715527"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>select <span class="token function">count</span><span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> from order_infowhere amount_money<span class="token operator">&lt;</span><span class="token number">100</span>
<span class="token comment">//3</span>
select <span class="token function">max</span><span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> from order_info
<span class="token comment">//100</span>
select <span class="token function">count</span><span class="token punctuation">(</span><span class="token class-name">DISTINCT</span> amount_money<span class="token punctuation">)</span> from order_info
<span class="token comment">//2</span>
select <span class="token function">avg</span><span class="token punctuation">(</span><span class="token class-name">DISTINCT</span> amount_money<span class="token punctuation">)</span> from order_info
<span class="token comment">//61.800000</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token comment">//函数表达式</span>
select <span class="token function">avg</span><span class="token punctuation">(</span><span class="token function">TO_DAYS</span><span class="token punctuation">(</span>create_time<span class="token punctuation">)</span><span class="token punctuation">)</span> from order_info
<span class="token comment">//738355.8333</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr> <h3 id="分组查询"><a href="#分组查询" class="header-anchor">#</a> 分组查询</h3> <p><strong>分组查询格式</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token punctuation">[</span>聚合函数<span class="token punctuation">]</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span><span class="token punctuation">,</span>字段名 <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 查询条件<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span> 字段名<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">having</span> 过滤条件<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>GROUP BY 语句根据一个或多个列对结果集进行分组，在分组的列上我们可以使用 COUNT, SUM, AVG 等聚合函数。</p> <p>Having 是用来对<strong>查询结果过滤</strong>的，使用的<strong>过滤条件须为查询结果包含的字段</strong>，在Having 中可以使用聚合函数。</p> <p>包含 GROUP BY 的分组查询语句，SELECT 后查询出来的字段，要么包含在聚合函数里，要么作为分组的依据包含在 GROUP BY 后面。（若某个字段没有作为分组条件，有可能会产生多条记录，若再不使用聚合函数将多条记录聚合为一条记录，则与分组会发生冲突）</p> <p><strong>SQL练习</strong></p> <p>测试表内容如下：</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211014200314.png" alt="image-20211014193715527"></p> <ul><li><p>分组查询</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">as</span> count <span class="token keyword">from</span> order_info <span class="token keyword">group</span> <span class="token keyword">by</span> order_name
<span class="token comment">//《繁华2》	2</span>
<span class="token comment">//限时发送的订单	8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>分组查询 - 带 having</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">as</span> count <span class="token keyword">from</span> order_info <span class="token keyword">group</span> <span class="token keyword">by</span> order_name
<span class="token keyword">HAVING</span> count <span class="token operator">&gt;</span> <span class="token number">2</span>
<span class="token comment">//限时发送的订单	8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>分组查询 - having 使用聚合函数</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">as</span> count <span class="token keyword">from</span> order_info <span class="token keyword">group</span> <span class="token keyword">by</span> order_name
<span class="token keyword">HAVING</span> <span class="token function">count</span><span class="token punctuation">(</span>order_name<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">6</span>
<span class="token comment">//限时发送的订单	8</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <hr> <h3 id="排序查询"><a href="#排序查询" class="header-anchor">#</a> 排序查询</h3> <p>ORDER BY 可以对查询结果排序，位于 SELECT 查询语句的结尾（若有 limit 语句，则limit 语句在最终结尾处）。</p> <p>其中 <strong>DESC 是倒序排列</strong>，<strong>ASC 是正序排列</strong>。</p> <ul><li><p>正序排列 - asc</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">as</span> count <span class="token keyword">from</span> order_info <span class="token keyword">group</span> <span class="token keyword">by</span> order_name
<span class="token keyword">order</span> <span class="token keyword">by</span> count <span class="token keyword">asc</span>
<span class="token comment">//《繁华2》	2</span>
<span class="token comment">//限时发送的订单	8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>倒序排列 - desc</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">as</span> count <span class="token keyword">from</span> order_info <span class="token keyword">group</span> <span class="token keyword">by</span> order_name
<span class="token keyword">order</span> <span class="token keyword">by</span> order_name <span class="token keyword">desc</span>
<span class="token comment">//限时发送的订单	8</span>
<span class="token comment">//《繁华2》	2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>分组合并排列</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">as</span> count <span class="token keyword">from</span> order_info <span class="token keyword">group</span> <span class="token keyword">by</span> order_name
<span class="token keyword">desc</span>
<span class="token comment">//限时发送的订单	8</span>
<span class="token comment">//《繁华2》	2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="分页查询"><a href="#分页查询" class="header-anchor">#</a> 分页查询</h3> <p>通过 LIMIT 关键字可以对查询结果进行分页，返回分页后的数据。</p> <blockquote><p>分页查询公式：LIMIT （当前页数-1）* 每页条数，每页条数</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">TABLE</span> <span class="token keyword">LIMIT</span> <span class="token punctuation">(</span>PageNo <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>PageSize<span class="token punctuation">,</span>PageSize ；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em>注意：LIMIT 语句必须在 SELECT 语句的结尾。</em></p> <hr> <ul><li><p>前 10 条记录</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>第 11 至 20 条记录</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">limit</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>第 20 至 30 条记录</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">limit</span> <span class="token number">20</span><span class="token punctuation">,</span><span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><strong><code>LIMIT n, m</code> 的效率是十分低的，一般可以通过在 WHERE 条件中指定范围来优化。 WHERE id &gt; ? limit 10；</strong></p> <hr> <h3 id="合并查询"><a href="#合并查询" class="header-anchor">#</a> 合并查询</h3> <p>MySQL 中合并查询有 UNION 和 UNION ALL 两种。</p> <ol><li><p>UNION 用于把多个 SELECT 的查询结果集合并成一个。</p> <ul><li><p>进行合并的 SELECT 列表必须在<strong>字段数量和数据结构上保持一致</strong>。</p></li> <li><p><strong>最终结果集的列名来自第一个 SELECT 语句</strong>。</p></li> <li><p><strong>默认会去对结果行去重复</strong>。</p></li></ul> <hr> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name <span class="token keyword">as</span> name<span class="token punctuation">,</span>amount_money <span class="token keyword">from</span> order_info <span class="token keyword">where</span> amount_money<span class="token operator">&gt;</span><span class="token number">50</span> 
<span class="token keyword">UNION</span>
<span class="token keyword">select</span> order_name<span class="token punctuation">,</span>amount_money <span class="token keyword">as</span> money <span class="token keyword">from</span> order_info <span class="token keyword">where</span> amount_money<span class="token operator">&lt;</span><span class="token number">50</span> 

限时发送的订单	<span class="token number">100.00</span>
《繁华<span class="token number">2</span>》	<span class="token number">23.60</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><strong>UNION ALL 不会去重复。</strong></p> <p>相同的SQL，使用 UNION ALL 之后，查询结果不会去重。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_name <span class="token keyword">as</span> name<span class="token punctuation">,</span>amount_money <span class="token keyword">from</span> order_info <span class="token keyword">where</span> amount_money<span class="token operator">&gt;</span><span class="token number">50</span> 
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
<span class="token keyword">select</span> order_name<span class="token punctuation">,</span>amount_money <span class="token keyword">as</span> money <span class="token keyword">from</span> order_info <span class="token keyword">where</span> amount_money<span class="token operator">&lt;</span><span class="token number">50</span> 

限时发送的订单	<span class="token number">100.00</span>
限时发送的订单	<span class="token number">100.00</span>
限时发送的订单	<span class="token number">100.00</span>
《繁华<span class="token number">2</span>》	<span class="token number">23.60</span>
《繁华<span class="token number">2</span>》	<span class="token number">23.60</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol> <hr> <h3 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h3> <h4 id="where-型子查询"><a href="#where-型子查询" class="header-anchor">#</a> where 型子查询</h4> <p>把内层的查询结果当作外部查询的比较条件。</p> <ol><li><p>使用倒序加分页实现只查询 Id 最大的一条记录。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> order_info <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>使用 where 子查询查询 id 最大的一条记录。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> order_info 
<span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> order_info<span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>使用 where 子查询查询每个种类下 Id 最大的一条记录。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> order_info 
<span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">MAX</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>  <span class="token keyword">from</span> order_info <span class="token keyword">group</span> <span class="token keyword">by</span> id   <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>例子练习：</p> <p><strong>先查出表里的最大时间，再根据最大时间查询数据。需要将最大时间作为一个条件。</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> monitor_id <span class="token keyword">as</span> monitorId<span class="token punctuation">,</span>monitor_name <span class="token keyword">as</span> monitorName<span class="token punctuation">,</span>host<span class="token punctuation">,</span>loss<span class="token punctuation">,</span>avg<span class="token punctuation">,</span>mtr_time<span class="token punctuation">,</span><span class="token keyword">status</span>
<span class="token keyword">from</span> web_jkb_mtr_detail
<span class="token keyword">where</span> mtr_time <span class="token operator">in</span> <span class="token punctuation">(</span>
	<span class="token keyword">select</span> maxtime <span class="token keyword">from</span> <span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token function">Max</span><span class="token punctuation">(</span>mtr_time<span class="token punctuation">)</span> <span class="token keyword">as</span> maxtime <span class="token keyword">from</span> web_jkb_mtr_detail <span class="token keyword">where</span> monitor_id <span class="token operator">=</span> <span class="token number">11</span> <span class="token punctuation">)</span> one
<span class="token punctuation">)</span>  <span class="token operator">and</span> monitor_id <span class="token operator">=</span> <span class="token number">11</span> <span class="token operator">and</span> <span class="token keyword">status</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> avg <span class="token keyword">DESC</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol> <h4 id="from-型子查询"><a href="#from-型子查询" class="header-anchor">#</a> from 型子查询</h4> <p>from 型子查询把内层的查询结果作为一个临时表，供外层的 SQL 查询，临时表要起一个别名。</p> <ol><li><p>查询 id 最大的记录。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> id<span class="token punctuation">,</span>order_name <span class="token keyword">from</span> 
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">as</span> id<span class="token punctuation">,</span>order_name <span class="token keyword">from</span> order_info <span class="token keyword">group</span> <span class="token keyword">by</span> id<span class="token punctuation">)</span>  <span class="token keyword">as</span> tmp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h3 id="多表查询"><a href="#多表查询" class="header-anchor">#</a> 多表查询</h3> <h4 id="笛卡尔集"><a href="#笛卡尔集" class="header-anchor">#</a> 笛卡尔集</h4> <p>在多表查询的情况下，出现下列情况时，就有可能会产生笛卡尔集。</p> <ul><li>省略连接条件</li> <li>连接条件无效</li> <li>所有表中的所有行互相连接</li></ul> <img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211018121316.png" alt="image-20211018121316852" style="zoom:33%;"> <p>在 SQL 中的体现如下图：</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211018121506.jpg" alt="bubuko.com,布布扣"></p> <hr> <h4 id="等值连接"><a href="#等值连接" class="header-anchor">#</a> 等值连接</h4> <p>查询多表时，可以在 WHERE 子句中添加连接条件（注意区分多表中的相同列）。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_info<span class="token punctuation">.</span>id<span class="token punctuation">,</span>order_info<span class="token punctuation">.</span>amount_money<span class="token punctuation">,</span>order_info<span class="token punctuation">.</span>order_name<span class="token punctuation">,</span>tenant_info<span class="token punctuation">.</span>id<span class="token punctuation">,</span>tenant_info<span class="token punctuation">.</span>tenant_name
<span class="token keyword">from</span> order_info<span class="token punctuation">,</span>tenant_info
<span class="token keyword">where</span> order_info<span class="token punctuation">.</span>id <span class="token operator">=</span> tenant_info<span class="token punctuation">.</span>id
<span class="token comment">//24	23.60	《繁华2》	24	test</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="自连接"><a href="#自连接" class="header-anchor">#</a> 自连接</h4> <p>同一个表连接查询。</p> <p>案例：查询员工名和直接上级的名称</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>m<span class="token punctuation">.</span>last_name
<span class="token keyword">FROM</span> employees e
<span class="token keyword">JOIN</span> employees m <span class="token keyword">ON</span> e<span class="token punctuation">.</span><span class="token punctuation">`</span>manager_id<span class="token punctuation">`</span><span class="token operator">=</span>m<span class="token punctuation">.</span><span class="token punctuation">`</span>employee_id<span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="内连接"><a href="#内连接" class="header-anchor">#</a> 内连接</h4> <p>内连接查询结果返回的是两个表中都满足链接条件的记录。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_info<span class="token punctuation">.</span>id<span class="token punctuation">,</span>order_info<span class="token punctuation">.</span>amount_money<span class="token punctuation">,</span>order_info<span class="token punctuation">.</span>order_name<span class="token punctuation">,</span>tenant_info<span class="token punctuation">.</span>id<span class="token punctuation">,</span>tenant_info<span class="token punctuation">.</span>tenant_name
<span class="token keyword">from</span> order_info
<span class="token keyword">inner</span> <span class="token keyword">join</span> tenant_info
<span class="token keyword">on</span> order_info<span class="token punctuation">.</span>id <span class="token operator">=</span> tenant_info<span class="token punctuation">.</span>id

<span class="token number">24</span>	<span class="token number">23.60</span>	《繁华<span class="token number">2</span>》	<span class="token number">24</span>	test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="左连接"><a href="#左连接" class="header-anchor">#</a> 左连接</h4> <p>左连接会将链接的左边数据全部返回，而右表只返回满足链接的有效数据，其余返回 NULL。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_info<span class="token punctuation">.</span>id<span class="token punctuation">,</span>order_info<span class="token punctuation">.</span>amount_money<span class="token punctuation">,</span>order_info<span class="token punctuation">.</span>order_name<span class="token punctuation">,</span>tenant_info<span class="token punctuation">.</span>id<span class="token punctuation">,</span>tenant_info<span class="token punctuation">.</span>tenant_name
<span class="token keyword">from</span> order_info
<span class="token keyword">left</span> <span class="token keyword">join</span> tenant_info
<span class="token keyword">on</span> order_info<span class="token punctuation">.</span>id <span class="token operator">=</span> tenant_info<span class="token punctuation">.</span>id


<span class="token number">24</span>	<span class="token number">23.60</span>	《繁华<span class="token number">2</span>》	<span class="token number">24</span>	 test
<span class="token number">25</span>	<span class="token number">23.60</span>	《繁华<span class="token number">2</span>》	<span class="token boolean">NULL</span> <span class="token boolean">NULL</span>
<span class="token number">26</span>		《繁华<span class="token number">2</span>》		
<span class="token number">27</span>		限时发送的订单		
<span class="token number">28</span>	<span class="token number">100.00</span>	限时发送的订单		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="右连接"><a href="#右连接" class="header-anchor">#</a> 右连接</h4> <p>右连接会将链接的右表数据全部返回，而左表只返回满足链接的有效数据，其余返回 NULL。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> order_info<span class="token punctuation">.</span>id<span class="token punctuation">,</span>order_info<span class="token punctuation">.</span>amount_money<span class="token punctuation">,</span>order_info<span class="token punctuation">.</span>order_name<span class="token punctuation">,</span>tenant_info<span class="token punctuation">.</span>id<span class="token punctuation">,</span>tenant_info<span class="token punctuation">.</span>tenant_name
<span class="token keyword">from</span> order_info
<span class="token keyword">right</span> <span class="token keyword">join</span> tenant_info
<span class="token keyword">on</span> order_info<span class="token punctuation">.</span>id <span class="token operator">=</span> tenant_info<span class="token punctuation">.</span>id

<span class="token boolean">NULL</span>	<span class="token number">2</span>			<span class="token boolean">NULL</span>	<span class="token boolean">NULL</span>	<span class="token boolean">NULL</span>
<span class="token boolean">NULL</span>	<span class="token number">3</span>			<span class="token boolean">NULL</span>	<span class="token boolean">NULL</span>	<span class="token boolean">NULL</span>
<span class="token number">24</span>	<span class="token number">23.60</span>	《繁华<span class="token number">2</span>》	<span class="token number">24</span>		test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr> <h2 id="四、数据类型"><a href="#四、数据类型" class="header-anchor">#</a> 四、数据类型</h2> <h3 id="整数类型"><a href="#整数类型" class="header-anchor">#</a> 整数类型</h3> <p>常用整数类型有 TINYINT、INT、BIGINT 等。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103234.png" alt="image-20211021090440027"></p> <p><em>在设计表格的时候要为列选择合适的数据类型。比如存储枚举字段，只有 0 和 1 两个值，此时应该选择 TINYINT 。若选择了 BIGINT，则会造成大量的空间浪费，是不可取的。</em></p> <p><strong>TINYINT 测试</strong></p> <ol><li><p>有符号</p> <p>设置 sex 字段为 (tinyint) 数据类型后，发现默认是带符号的。由此可以得出 <strong>MySQL 默认整数数据类型是带符号的</strong>。</p> <p>同时当填充 128 时，报错超出范围，验证了 tinyint 数据类型有符号时的范围是 -128 ～ 127。</p> <p>tinyint 大小是 1 个字节，有符号取值范围是 10000000 ～ 01111111。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103240.png" alt="image-20211020111644652"></p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103246.png" alt="image-20211020111720215"></p></li> <li><p>无符号</p> <p>创建字段时添加 <code>unsigned</code> 标识或者在工具中为字段勾选 <em>无符号</em> 选项。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code> <span class="token punctuation">`</span>sex<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103250.png" alt="image-20211020112655313"></p> <p>设置无符号之后，为 sex 字段填充 -1 就会报错超出范围，验证了<strong>无符号时不能存储负数</strong>。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103256.png" alt="image-20211020112546487"></p> <p>填充 256 报错超出范围，验证了<strong>无符号时 tinyint 的数据范围是 0 ～ 255</strong>。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103259.png" alt="image-20211020112905690"></p></li> <li><p>长度-填充零</p> <p>整数数据类型设置长度的时候，和存储数据的大小是没有联系的，比如 tinyint 类型存储数据大小还是 1 个字节，int 类型依然是 4 个字节。</p> <p>长度指的是展示数据的长度，比如 sex 长度为 2，填充 sex 为 1 时，会自动填充为 01。填充值若超过该长度，无作用。（只针对填充数值不足长度限制时）</p> <p>长度限制只在对字段添加**填充零（zerofill）**的规范时生效。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103308.png" alt="image-20211021085912509"></p> <p>​	通过测试结果发现，当 sex 长度为 2，且添加 zerofill 规范后。填充 sex = 1 时，查询会自动补齐两位。当 sex = 127，超过长度 2 时，则数值无变化。</p></li></ol> <img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103310.png" alt="image-20211021085938289" style="zoom:50%;"> <hr> <h3 id="小数类型"><a href="#小数类型" class="header-anchor">#</a> 小数类型</h3> <p>MySQL 支持的小数类型有 FLOAT、DOUBLE、DECIMAL等，其中 FLOAT 和 DOUBLE 是浮点数类型，而 DECLMAL 是定点数类型。</p> <p>浮点类型和定点类型都可以用<code>(M, D)</code>来表示，其中<code>M</code>称为精度，表示总共的位数；<code>D</code>称为标度，表示小数的位数。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103320.png" alt=" "></p> <h4 id="浮点类型"><a href="#浮点类型" class="header-anchor">#</a> 浮点类型</h4> <p>FLOAT 代表单精度浮点类型。DOUBLE 代表双精度浮点类型。</p> <p><em>FLOAT(M,N) 格式，M 代表整数位加小数位的和，N 代表小数位。FLOAT(5,2) 代表整数位加小数位总长度为 5，小数点后长度为 2。</em></p> <p>与整数数值一样，浮点类型也可以设置数据长度，还能设置小数点位数，若插入元素超过了允许的长度时，系统会自动的四舍五入。</p> <p>浮点数也可以使用无符号（unsigned）规范和长度规范（zerofile）。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021102556.png" alt="image-20211021095311960"></p> <h4 id="定点类型"><a href="#定点类型" class="header-anchor">#</a> 定点类型</h4> <p>DECIMAL 类型不同于 FLOAT 和 DOUBLE。DOUBLE 实际上是以字符串的形式存放的，DECIMAL 可能的最大取值范围与 DOUBLE 相同，但是有效的取值范围由 M 和 D 决定。如果改变 M 而固定 D，则取值范围将随 M 的变大而变大。</p> <p><strong>DECIMAL 的默认 D 值为 0、M 值为 10。</strong></p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021101837.png" alt="image-20211021101837077"></p> <h4 id="浮点数和定点数的比较"><a href="#浮点数和定点数的比较" class="header-anchor">#</a> 浮点数和定点数的比较</h4> <p>在 MySQL 中，浮点数容易丢失精度，存储近似值。而定点数以字符串形式存储，在对<strong>精度要求比较高的时候（如货币、科学数据），使用 DECIMAL 的类型比较好</strong>，另外两个浮点数进行减法和比较运算时也容易出问题，所以<strong>在使用浮点数时需要注意，并尽量避免做浮点数比较</strong>。</p> <p>比如当同时存 <strong>9876543.21</strong> 时，<code>float(10,2)</code> 类型存储结果为 <code>9876543.00</code> ，丢失了小数点后的数字。而 <code>decimal(10,2)</code> 类型存储正常。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021102810.png" alt="image-20211021102810188"></p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021102834.png" alt="image-20211021102833961"></p> <hr> <h3 id="时间类型"><a href="#时间类型" class="header-anchor">#</a> 时间类型</h3> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103334.png" alt="image-20211020102328282"></p> <p>timestamp 和实际时区有关，更能反映实际的日期，而 dataTime 只能反映出插入时的当地时区时间。</p> <hr> <h3 id="字符类型"><a href="#字符类型" class="header-anchor">#</a> 字符类型</h3> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211021103336.png" alt="image-20211020102343121"></p> <hr> <h2 id="五、常用函数"><a href="#五、常用函数" class="header-anchor">#</a> 五、常用函数</h2> <h3 id="字符函数"><a href="#字符函数" class="header-anchor">#</a> 字符函数</h3> <ul><li>concat拼接</li> <li>substr截取子串</li> <li>upper转换成大写</li> <li>lower转换成小写</li> <li>trim去前后指定的空格和字符</li> <li>ltrim去左边空格</li> <li>rtrim去右边空格</li> <li>replace替换</li> <li>lpad左填充</li> <li>rpad右填充</li> <li>instr返回子串第一次出现的索引</li> <li>length 获取字节个数</li></ul> <h3 id="数学函数"><a href="#数学函数" class="header-anchor">#</a> 数学函数</h3> <ul><li>round 四舍五入</li> <li>rand 随机数</li> <li>floor向下取整</li> <li>ceil向上取整</li> <li>mod取余</li> <li>truncate截断</li></ul> <h3 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h3> <ul><li>now当前系统日期+时间</li> <li>curdate当前系统日期</li> <li>curtime当前系统时间</li> <li>str_to_date 将字符转换成日期</li> <li>date_format将日期转换成字符</li></ul> <h3 id="其它函数"><a href="#其它函数" class="header-anchor">#</a> 其它函数</h3> <ul><li>version版本</li> <li>database当前库</li> <li>user当前连接用户</li></ul> <h3 id="连接函数-concat"><a href="#连接函数-concat" class="header-anchor">#</a> 连接函数- concat</h3> <ul><li><p><code>concat(str1,str2,...)</code> 函数可以将多列连接在一起，生成新的字符串。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> concat<span class="token punctuation">(</span>order_name<span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">as</span> name <span class="token keyword">from</span> order_info
<span class="token comment">//《繁华2》-23.60</span>
<span class="token comment">//《繁华2》-23.60</span>
<span class="token comment">// NULL</span>
<span class="token comment">// NULL</span>
<span class="token comment">// 限时发送的订单-100.00</span>
<span class="token comment">// 限时发送的订单-100.00</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><em>注意 concat 函数在连接字符的时候，只要其中有某一个字段为 NULL，那么则整个返回 NULL。</em></p></li> <li><p><code>concat_ws(separator, str1, str2, ...)</code> 函数也可以将多列连接在一起，第一个参数 separator 是<strong>其它参数之间的分隔符</strong>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">,</span>order_name<span class="token punctuation">,</span>amount_money<span class="token punctuation">,</span>order_name<span class="token punctuation">)</span> <span class="token keyword">from</span> order_info
<span class="token comment">//《繁华2》-23.60-《繁华2》</span>
<span class="token comment">//《繁华2》-23.60-《繁华2》</span>
<span class="token comment">//《繁华2》-《繁华2》</span>
<span class="token comment">// 限时发送的订单-限时发送的订单</span>
<span class="token comment">// 限时发送的订单-100.00-限时发送的订单</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><em>即使某一个字段为 NULL，该函数会继续拼接。</em></p></li></ul> <hr> <h3 id="分组聚合函数-group-concat"><a href="#分组聚合函数-group-concat" class="header-anchor">#</a> 分组聚合函数 - group_concat</h3> <p><code>group_concat(expr)</code> 该函数主要是与 GROUP BY 搭配使用，对分组后每一组内的某个字段以逗号进行拼接。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> GROUP_CONCAT<span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">from</span> order_info <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> order_name
<span class="token comment">//23.60,23.60</span>
<span class="token comment">//100.00,100.00,100.00,100.00,100.00,100.00,100.00,100.00</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>也可以不使用 GROUP BY ，对某一列符合条件的进行拼接。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> GROUP_CONCAT<span class="token punctuation">(</span>amount_money<span class="token punctuation">)</span> <span class="token keyword">from</span> order_info 
<span class="token comment">//23.60,23.60,100.00,100.00,100.00,100.00,100.00,100.00,100.00,100.00</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <h3 id="时间戳格式化函数-date-format"><a href="#时间戳格式化函数-date-format" class="header-anchor">#</a> 时间戳格式化函数 - date-format</h3> <p><strong>mysql数据库存放的是时间戳，取出的时候希望将时间戳转换为指定格式的时间字符串；</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">//时间戳单位为s</span>
<span class="token keyword">select</span> 
DATE_FORMAT<span class="token punctuation">(</span>FROM_UNIXTIME<span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token keyword">timestamp</span><span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">hour</span>
<span class="token keyword">from</span> monitor_jky_bandwidth 

<span class="token comment">//时间戳单位为ms</span>
<span class="token keyword">select</span> DATE_FORMAT<span class="token punctuation">(</span>FROM_UNIXTIME<span class="token punctuation">(</span><span class="token number">1598341522000</span> <span class="token operator">div</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'%H'</span><span class="token punctuation">)</span>
<span class="token comment">//结果：15</span>


注意：
<span class="token operator">div</span>为整除，只会取商的整数部分，不会四舍五入。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr> <h2 id="六、约束"><a href="#六、约束" class="header-anchor">#</a> 六、约束</h2> <h3 id="什么是约束"><a href="#什么是约束" class="header-anchor">#</a> 什么是约束？</h3> <ul><li>为了保证数据一致性和完整性，通过约束的方式来限制数据表。</li> <li>约束是对数据表的强制规定。</li> <li>可以在创建数据表时添加约束，也可以在数据表创建之后添加约束（通过 ALTER TABLE 语句）。</li></ul> <p><strong>约束的种类</strong></p> <ul><li>唯一约束 - UNIQUE</li> <li>主键约束 - PRIMARY KEY</li> <li>外键约束 - FOREIGN KEY</li> <li>非空约束 - NOT NULL</li></ul> <p><strong>约束的范围</strong></p> <ol><li><p>根据约束数据列的限制，可以分为单列约束和多列约束。</p> <ul><li><p>单列约束</p> <p>每个约束只约束一列，例如指定单列的唯一约束。</p></li> <li><p>多列约束</p> <p>每个约束可约束多列数据。</p></li></ul></li> <li><p>根据约束的作用范围，可以分为列级约束和表级约束。</p> <ul><li><p>列级约束</p> <p>只能作用在一个列上，跟在某列定义的后面。</p></li> <li><p>表级约束</p> <p>可以作用在多个列上，不与列一起定义，而是单独定义。</p></li></ul></li></ol> <hr> <h3 id="唯一约束-unique"><a href="#唯一约束-unique" class="header-anchor">#</a> 唯一约束 - UNIQUE</h3> <p>唯一约束用来限制数据表的某些字段值不能重复，创建唯一约束时可以指定单列，也可以指定多列。同一个表也可以设置多个唯一约束。</p> <h4 id="唯一约束和唯一索引的关系"><a href="#唯一约束和唯一索引的关系" class="header-anchor">#</a> 唯一约束和唯一索引的关系？</h4> <p><em>创建唯一性约束，会自动创建一个同名的唯一索引，这个索引不能够单独删除，删除唯一约束会自动删除该索引</em>。<strong>唯一约束是通过唯一索引来实现数据的唯一</strong>。</p> <p><em>唯一约束不允许出现相同的值，但是允许出现多个 NULL 值。</em></p> <h4 id="新增和取消唯一约束"><a href="#新增和取消唯一约束" class="header-anchor">#</a> 新增和取消唯一约束</h4> <ol><li><p>新增唯一约束</p> <ul><li><p>建表时设置</p> <p>建表语句某字段添加 UNIQUE 标识。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>username<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>stu_num<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>classroom<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>student<span class="token operator">-</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classroom<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>student<span class="token operator">-</span>class<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classroom<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>为某列单独设置</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student <span class="token keyword">add</span> <span class="token keyword">unique</span><span class="token punctuation">(</span>stu_num<span class="token punctuation">,</span>classroom<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>取消唯一约束</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student <span class="token keyword">drop</span> <span class="token keyword">index</span> stu_num
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <hr> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213555.png" alt="image-20211019145016090"></p> <p><em>为数据表添加了唯一约束之后，新增内容重复则会提示异常。</em></p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213548.png" alt="image-20211019144159146"></p> <hr> <h3 id="主键约束-primary"><a href="#主键约束-primary" class="header-anchor">#</a> 主键约束 - PRIMARY</h3> <p>主键约束相当于<strong>唯一约束+非空约束</strong>的组合，主键约束列<strong>不允许重复，也不允许出现空值</strong>。同样主键约束允许设置多列，这些列都不允许为空值，并且组合的值不允许重复。</p> <p><strong>每个表最多只允许设置一个主键。</strong></p> <p>MySQL 主键名总是 PRIMARY，当创建主键约束时系统默认会在 <strong>所在列或列组合上建立对应的唯一索引</strong>。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213541.png" alt="image-20211019152710954"></p> <hr> <h3 id="外键约束"><a href="#外键约束" class="header-anchor">#</a> 外键约束</h3> <p>外键约束用来保证表之间的参照完整性，主要存在于主表和从表之间，同一个表可以有多个外键约束。</p> <p><strong>外键约束的作用</strong></p> <ol><li>从表的外键值必须在<strong>主表中能找到或者为空</strong>。</li> <li>当主表数据被从表参照时，主表数据不允许被删除。需要先删除从表关联的数据，然后才可以删除主表数据。</li> <li>从表参考主表的字段，在主表中要具有唯一性（主键或者唯一约束键盘的列）。</li> <li>如果表的一个字段，要作为另一个表的外键，这个字段必须有唯一约束（或是这个字段干脆就是主键），如果只是有唯一索引，就会报错。</li></ol> <img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211018172218.png" alt="image-20211018172218915" style="zoom:50%;"> <h4 id="如何添加外键"><a href="#如何添加外键" class="header-anchor">#</a> 如何添加外键</h4> <p>依次打开 Navicat - 设计表 - 外键。设置从表字段和父表字段，还要设置删除时和更新时的处理策略。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211018173948.png" alt="image-20211018173948241"></p> <h4 id="删除和更新的处理策略"><a href="#删除和更新的处理策略" class="header-anchor">#</a> 删除和更新的处理策略</h4> <ol><li>CASCADE：级联，当父表更新、删除，子表会同步更新和删除。</li> <li>NO ACTION：没有行动。</li> <li>RESTRICT：父表在删除和更新记录的时候，要在子表中检查是否有有关该父表要更新和删除的记录，如果有，则不允许删除和更改。</li> <li>SET NULL：置空，当父表更新、删除的时候，字表会把外键字段变为 NULL ，所以这个时候设计表的时候该字段要允许为 NULL，否则会出错。</li></ol> <hr> <p><strong>测试外键约束不同的设置方式</strong></p> <p>准备测试数据。</p> <ul><li><p>主表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>classname<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>classnum<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">4</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

<span class="token comment">-- ----------------------------</span>
<span class="token comment">-- Records of class</span>
<span class="token comment">-- ----------------------------</span>
<span class="token keyword">BEGIN</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'一年级'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'一年级'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'二年级'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>

<span class="token keyword">SET</span> FOREIGN_KEY_CHECKS <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211018174457.png" alt="image-20211018174457850" style="zoom:50%;"></li> <li><p>从表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>username<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>age<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>classroom<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>student<span class="token operator">-</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classroom<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

<span class="token comment">-- ----------------------------</span>
<span class="token comment">-- Records of student</span>
<span class="token comment">-- ----------------------------</span>
<span class="token keyword">BEGIN</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'小明'</span><span class="token punctuation">,</span> <span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul> <img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211018174435.png" alt="image-20211018174435218" style="zoom:50%;"> <hr> <ol><li><p>CASCADE 测试</p> <ul><li><p>设置外键，将删除时和更新时的处理方式都设置为 CASCADE。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>student<span class="token operator">-</span>class<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classroom<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213526.png" alt="image-20211019093858371"></p></li> <li><p>更新数据</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213503.png" alt="image-20211019094138544"></p></li> <li><p>结论。</p> <p>设置为 CASCADE 时，<strong>当父表更新、删除，子表会同步更新和删除</strong>。</p></li></ul></li></ol> <hr> <ol start="2"><li><p>NO ACTION 测试</p> <ul><li><p>设置外键，将删除时和更新时的处理方式都设置为 NO ACTION。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>student<span class="token operator">-</span>class<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classroom<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">NO</span> <span class="token keyword">ACTION</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">NO</span> <span class="token keyword">ACTION</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211018174313.png" alt="image-20211018174313240"></p></li> <li><p>删除数据<img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211018174258.png" alt="image-20211018174258331"></p></li> <li><p>结论</p> <p>设置为 NO ACTION 时，<strong>删除和更新主表数据时会抛出异常</strong>。</p></li></ul></li></ol> <hr> <ol start="3"><li><p>RESTRICT 测试</p> <ul><li><p>设置外键，将删除时和更新时的处理方式都设置为 RESTRICT。</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213418.png" alt="image-20211018173853091"></p></li> <li><p>删除数据</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213415.png" alt="image-20211019093358107"></p></li> <li><p>结论</p> <p>设置为 RESTRICT 时，<strong>删除和更新主表数据时会抛出异常</strong>。</p></li></ul></li></ol> <hr> <ol start="4"><li><p>SET NULL 测试</p> <ul><li><p>设置外键，将删除时和更新时的处理方式都设置为 SET NULL。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>student<span class="token operator">-</span>class<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classroom<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213433.png" alt="image-20211019094629416"></p></li> <li><p>删除数据</p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213428.png" alt="image-20211019094602089"></p></li> <li><p>结论</p> <p>设置为 SET NULL 时，<strong>删除和更新主表数据时会将从表的外键字段设置为 NULL</strong>。</p></li></ul></li></ol> <hr> <h3 id="非空约束"><a href="#非空约束" class="header-anchor">#</a> 非空约束</h3> <p>非空约束用来确保当前列的值不能为空值，只出现在对数据表的列上。</p> <ul><li>所有的类型都可以是 NULL，包括 int 、float 等数据类型。</li> <li>空字符串 &quot;&quot; 不等于 NULL，0 也不等于 NULL。</li></ul> <h4 id="新增和取消非空约束"><a href="#新增和取消非空约束" class="header-anchor">#</a> 新增和取消非空约束</h4> <ol><li><p>新增非空约束</p> <ul><li><p>创建表时</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>classname<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>classnum<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">14</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>单独设定某列</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> class <span class="token keyword">MODIFY</span> classnum <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>取消非空约束</p> <ul><li><p>单独取消</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> class <span class="token keyword">MODIFY</span> classnum <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>取消并设定默认值</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> class <span class="token keyword">MODIFY</span> classnum <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'1'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ol> <hr> <p><em>数据表的字段默认为 NULL，为字段添加了非空约束之后，若添加空值会报出异常。</em></p> <p><img src="https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20211019213350.png" alt="image-20211019143321668"></p> <hr> <h2 id="七、常见问题"><a href="#七、常见问题" class="header-anchor">#</a> 七、常见问题</h2> <h3 id="_1-having-和-where-的区别"><a href="#_1-having-和-where-的区别" class="header-anchor">#</a> 1. having 和 where 的区别？</h3> <p>having 和 where 都是用来过滤筛选数据的。</p> <ol><li><p>where 是在查询结果返回之前，对结果进行筛选，<strong>发生在分组 group by 之前</strong>。</p> <p>having 是在查询结果出来之后，对结果进行过滤，<strong>发生在 group by 之后</strong>。</p></li> <li><p>where 子句不能使用组函数，而 having 子句可以使用组函数。</p></li></ol> <hr> <h3 id="_2-select-语句执行顺序"><a href="#_2-select-语句执行顺序" class="header-anchor">#</a> 2. SELECT 语句执行顺序</h3> <p>查询处理的顺序如下:</p> <ol><li>FROM</li> <li>ON</li> <li>JOIN</li> <li>WHERE</li> <li>GROUP BY</li> <li>HAVING</li> <li>SELECT</li> <li>DISTINCT</li> <li>ORDER BY</li> <li>LIMIT</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token operator">&lt;</span>select_list<span class="token operator">&gt;</span>                     

<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> <span class="token operator">&lt;</span>left_table<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>join_type<span class="token operator">&gt;</span> <span class="token keyword">JOIN</span> <span class="token operator">&lt;</span>right_table<span class="token operator">&gt;</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span>on_predicate<span class="token operator">&gt;</span>

<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>where_predicate<span class="token operator">&gt;</span>

<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>group_by_specification<span class="token operator">&gt;</span>

<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token keyword">HAVING</span> <span class="token operator">&lt;</span>having_predicate<span class="token operator">&gt;</span>

<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>order_by_list<span class="token operator">&gt;</span>

<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token keyword">LIMIT</span> n<span class="token punctuation">,</span> m
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>参考链接</strong></p> <p><a href="https://www.cnblogs.com/warehouse/p/9410599.html" target="_blank" rel="noopener noreferrer">MySQL（五）SELECT语句执行顺序<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <hr> <h3 id="_3-除法-div-和-的区别"><a href="#_3-除法-div-和-的区别" class="header-anchor">#</a> 3. 除法 div 和 / 的区别</h3> <ul><li>div 为整除，该运算符只取商的整数部分，而不会四舍五入。</li> <li>/ 运算符为实数除，运算结果为浮点型。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token number">19820523</span> <span class="token operator">/</span> <span class="token number">1000</span>
<span class="token comment">//19820.5230</span>

<span class="token keyword">select</span> <span class="token number">19820523</span> <span class="token operator">div</span> <span class="token number">1000</span>
<span class="token comment">//19820</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="参考链接"><a href="#参考链接" class="header-anchor">#</a> 参考链接</h2> <p><a href="https://www.bilibili.com/video/BV1xW411u7ax?spm_id_from=333.788.b_636f6d6d656e74.10" target="_blank" rel="noopener noreferrer">尚硅谷-MySQL基础教程丨mysql数据库实战（sql数据库优化）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-10-24 21:48:43</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/database/mysql/MySQL高级.html">
        MySQL高级
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.c12bf646.js" defer></script><script src="/blog/assets/js/2.7ded94f8.js" defer></script><script src="/blog/assets/js/8.5bac1923.js" defer></script>
  </body>
</html>
