<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>垃圾回收器 | 技术小站</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="logo.ico">
    <meta name="description" content="生活不止眼前的代码，还有迈向田野的步伐">
    
    <link rel="preload" href="/blog/assets/css/0.styles.803dc0c7.css" as="style"><link rel="preload" href="/blog/assets/js/app.36c7cd49.js" as="script"><link rel="preload" href="/blog/assets/js/2.5c52e41f.js" as="script"><link rel="preload" href="/blog/assets/js/1.65a7fcd1.js" as="script"><link rel="preload" href="/blog/assets/js/153.a106e956.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.a209d3a9.js"><link rel="prefetch" href="/blog/assets/js/100.41067c0c.js"><link rel="prefetch" href="/blog/assets/js/101.5e48ee63.js"><link rel="prefetch" href="/blog/assets/js/102.996da4fc.js"><link rel="prefetch" href="/blog/assets/js/103.4ad9a9ed.js"><link rel="prefetch" href="/blog/assets/js/104.dbbf376c.js"><link rel="prefetch" href="/blog/assets/js/105.474c76df.js"><link rel="prefetch" href="/blog/assets/js/106.64ee5b81.js"><link rel="prefetch" href="/blog/assets/js/107.4e2c303f.js"><link rel="prefetch" href="/blog/assets/js/108.6df8df47.js"><link rel="prefetch" href="/blog/assets/js/109.f9a6b25c.js"><link rel="prefetch" href="/blog/assets/js/11.9b471693.js"><link rel="prefetch" href="/blog/assets/js/110.cd289f4f.js"><link rel="prefetch" href="/blog/assets/js/111.de5b0344.js"><link rel="prefetch" href="/blog/assets/js/112.602ad505.js"><link rel="prefetch" href="/blog/assets/js/113.d9f1cd37.js"><link rel="prefetch" href="/blog/assets/js/114.c39c0da9.js"><link rel="prefetch" href="/blog/assets/js/115.79153770.js"><link rel="prefetch" href="/blog/assets/js/116.14b62c34.js"><link rel="prefetch" href="/blog/assets/js/117.be545b11.js"><link rel="prefetch" href="/blog/assets/js/118.50059393.js"><link rel="prefetch" href="/blog/assets/js/119.95ac2812.js"><link rel="prefetch" href="/blog/assets/js/12.a4ba3c93.js"><link rel="prefetch" href="/blog/assets/js/120.8609e349.js"><link rel="prefetch" href="/blog/assets/js/121.578e1010.js"><link rel="prefetch" href="/blog/assets/js/122.09187353.js"><link rel="prefetch" href="/blog/assets/js/123.7d6498a1.js"><link rel="prefetch" href="/blog/assets/js/124.bfa3d2c7.js"><link rel="prefetch" href="/blog/assets/js/125.af694e98.js"><link rel="prefetch" href="/blog/assets/js/126.1ef3d5c4.js"><link rel="prefetch" href="/blog/assets/js/127.aa57cac7.js"><link rel="prefetch" href="/blog/assets/js/128.1be22387.js"><link rel="prefetch" href="/blog/assets/js/129.26d8f73e.js"><link rel="prefetch" href="/blog/assets/js/13.384ea083.js"><link rel="prefetch" href="/blog/assets/js/130.68df5112.js"><link rel="prefetch" href="/blog/assets/js/131.ab94ddeb.js"><link rel="prefetch" href="/blog/assets/js/132.34eafedb.js"><link rel="prefetch" href="/blog/assets/js/133.180e2732.js"><link rel="prefetch" href="/blog/assets/js/134.e896b99a.js"><link rel="prefetch" href="/blog/assets/js/135.bee74f41.js"><link rel="prefetch" href="/blog/assets/js/136.d82aa22e.js"><link rel="prefetch" href="/blog/assets/js/137.339a5cb1.js"><link rel="prefetch" href="/blog/assets/js/138.5f7f7327.js"><link rel="prefetch" href="/blog/assets/js/139.7d667235.js"><link rel="prefetch" href="/blog/assets/js/14.6b8495d3.js"><link rel="prefetch" href="/blog/assets/js/140.ca69053a.js"><link rel="prefetch" href="/blog/assets/js/141.10f8759f.js"><link rel="prefetch" href="/blog/assets/js/142.f01f6545.js"><link rel="prefetch" href="/blog/assets/js/143.09617cd6.js"><link rel="prefetch" href="/blog/assets/js/144.80ac3552.js"><link rel="prefetch" href="/blog/assets/js/145.e8687bbb.js"><link rel="prefetch" href="/blog/assets/js/146.dede65cc.js"><link rel="prefetch" href="/blog/assets/js/147.deadcc6d.js"><link rel="prefetch" href="/blog/assets/js/148.97f6e203.js"><link rel="prefetch" href="/blog/assets/js/149.2201847b.js"><link rel="prefetch" href="/blog/assets/js/15.6818b7fd.js"><link rel="prefetch" href="/blog/assets/js/150.3d5ee53c.js"><link rel="prefetch" href="/blog/assets/js/151.cc45301a.js"><link rel="prefetch" href="/blog/assets/js/152.8393b4bc.js"><link rel="prefetch" href="/blog/assets/js/154.a12f38ce.js"><link rel="prefetch" href="/blog/assets/js/155.44eee9c3.js"><link rel="prefetch" href="/blog/assets/js/156.81d3a0eb.js"><link rel="prefetch" href="/blog/assets/js/157.d310f46e.js"><link rel="prefetch" href="/blog/assets/js/158.e7f3a78e.js"><link rel="prefetch" href="/blog/assets/js/159.55fc4a79.js"><link rel="prefetch" href="/blog/assets/js/16.341b7272.js"><link rel="prefetch" href="/blog/assets/js/160.8505bb9c.js"><link rel="prefetch" href="/blog/assets/js/161.4ce6ae0d.js"><link rel="prefetch" href="/blog/assets/js/162.7febda5f.js"><link rel="prefetch" href="/blog/assets/js/163.0144012c.js"><link rel="prefetch" href="/blog/assets/js/164.51b5fdeb.js"><link rel="prefetch" href="/blog/assets/js/165.9add3fc7.js"><link rel="prefetch" href="/blog/assets/js/166.3bea6bca.js"><link rel="prefetch" href="/blog/assets/js/167.77295bbf.js"><link rel="prefetch" href="/blog/assets/js/168.796c33be.js"><link rel="prefetch" href="/blog/assets/js/169.76a3f357.js"><link rel="prefetch" href="/blog/assets/js/17.16d9fbd4.js"><link rel="prefetch" href="/blog/assets/js/170.87faa96f.js"><link rel="prefetch" href="/blog/assets/js/171.5a01afac.js"><link rel="prefetch" href="/blog/assets/js/172.03904c56.js"><link rel="prefetch" href="/blog/assets/js/173.896758dd.js"><link rel="prefetch" href="/blog/assets/js/174.696e0a2c.js"><link rel="prefetch" href="/blog/assets/js/175.dfb72a35.js"><link rel="prefetch" href="/blog/assets/js/176.4c756b08.js"><link rel="prefetch" href="/blog/assets/js/177.92495f99.js"><link rel="prefetch" href="/blog/assets/js/178.6c90af23.js"><link rel="prefetch" href="/blog/assets/js/179.8aaf5715.js"><link rel="prefetch" href="/blog/assets/js/18.be4afb08.js"><link rel="prefetch" href="/blog/assets/js/180.c28b2e77.js"><link rel="prefetch" href="/blog/assets/js/181.a2150557.js"><link rel="prefetch" href="/blog/assets/js/182.608d7533.js"><link rel="prefetch" href="/blog/assets/js/183.dcd7caf3.js"><link rel="prefetch" href="/blog/assets/js/184.14f9c859.js"><link rel="prefetch" href="/blog/assets/js/185.2627ab6e.js"><link rel="prefetch" href="/blog/assets/js/19.a4adc151.js"><link rel="prefetch" href="/blog/assets/js/20.46ef1aca.js"><link rel="prefetch" href="/blog/assets/js/21.2be5744a.js"><link rel="prefetch" href="/blog/assets/js/22.7799aa96.js"><link rel="prefetch" href="/blog/assets/js/23.de99ed79.js"><link rel="prefetch" href="/blog/assets/js/24.b7fbd8f4.js"><link rel="prefetch" href="/blog/assets/js/25.e0286b4a.js"><link rel="prefetch" href="/blog/assets/js/26.25782bdf.js"><link rel="prefetch" href="/blog/assets/js/27.f4b90a64.js"><link rel="prefetch" href="/blog/assets/js/28.ef890190.js"><link rel="prefetch" href="/blog/assets/js/29.5f6a6a8f.js"><link rel="prefetch" href="/blog/assets/js/3.2f24c6d9.js"><link rel="prefetch" href="/blog/assets/js/30.fae9ceba.js"><link rel="prefetch" href="/blog/assets/js/31.a337e21a.js"><link rel="prefetch" href="/blog/assets/js/32.3c61104d.js"><link rel="prefetch" href="/blog/assets/js/33.b2f0a1b2.js"><link rel="prefetch" href="/blog/assets/js/34.f1170830.js"><link rel="prefetch" href="/blog/assets/js/35.a4de42af.js"><link rel="prefetch" href="/blog/assets/js/36.5fbe3d1c.js"><link rel="prefetch" href="/blog/assets/js/37.b0806903.js"><link rel="prefetch" href="/blog/assets/js/38.1a359170.js"><link rel="prefetch" href="/blog/assets/js/39.debd2e6a.js"><link rel="prefetch" href="/blog/assets/js/4.3977a209.js"><link rel="prefetch" href="/blog/assets/js/40.3ca4f646.js"><link rel="prefetch" href="/blog/assets/js/41.ebf9559b.js"><link rel="prefetch" href="/blog/assets/js/42.ee04f8a7.js"><link rel="prefetch" href="/blog/assets/js/43.88fcdf2d.js"><link rel="prefetch" href="/blog/assets/js/44.b5442fb9.js"><link rel="prefetch" href="/blog/assets/js/45.d5eb94fd.js"><link rel="prefetch" href="/blog/assets/js/46.8d875464.js"><link rel="prefetch" href="/blog/assets/js/47.52966fd1.js"><link rel="prefetch" href="/blog/assets/js/48.1f6739e5.js"><link rel="prefetch" href="/blog/assets/js/49.5aa04920.js"><link rel="prefetch" href="/blog/assets/js/5.93b2f136.js"><link rel="prefetch" href="/blog/assets/js/50.f2d3a23c.js"><link rel="prefetch" href="/blog/assets/js/51.580088b2.js"><link rel="prefetch" href="/blog/assets/js/52.4bb244fd.js"><link rel="prefetch" href="/blog/assets/js/53.9cc70af4.js"><link rel="prefetch" href="/blog/assets/js/54.fce0e522.js"><link rel="prefetch" href="/blog/assets/js/55.45218aad.js"><link rel="prefetch" href="/blog/assets/js/56.4a7b7f70.js"><link rel="prefetch" href="/blog/assets/js/57.a3032426.js"><link rel="prefetch" href="/blog/assets/js/58.c1a20724.js"><link rel="prefetch" href="/blog/assets/js/59.40a8e3f9.js"><link rel="prefetch" href="/blog/assets/js/6.8429dd54.js"><link rel="prefetch" href="/blog/assets/js/60.853ed1b4.js"><link rel="prefetch" href="/blog/assets/js/61.ee6c50dc.js"><link rel="prefetch" href="/blog/assets/js/62.5d2b3ad5.js"><link rel="prefetch" href="/blog/assets/js/63.8a27742e.js"><link rel="prefetch" href="/blog/assets/js/64.0b936975.js"><link rel="prefetch" href="/blog/assets/js/65.26802909.js"><link rel="prefetch" href="/blog/assets/js/66.36e30bea.js"><link rel="prefetch" href="/blog/assets/js/67.52fde5d5.js"><link rel="prefetch" href="/blog/assets/js/68.cf9db5a8.js"><link rel="prefetch" href="/blog/assets/js/69.2e2ba572.js"><link rel="prefetch" href="/blog/assets/js/7.337526f4.js"><link rel="prefetch" href="/blog/assets/js/70.df0ee471.js"><link rel="prefetch" href="/blog/assets/js/71.3f772ca6.js"><link rel="prefetch" href="/blog/assets/js/72.83f1b4cd.js"><link rel="prefetch" href="/blog/assets/js/73.ddf41ff8.js"><link rel="prefetch" href="/blog/assets/js/74.769fc5ad.js"><link rel="prefetch" href="/blog/assets/js/75.a68bc8c9.js"><link rel="prefetch" href="/blog/assets/js/76.61cd3314.js"><link rel="prefetch" href="/blog/assets/js/77.3c8f94c8.js"><link rel="prefetch" href="/blog/assets/js/78.c9e84a16.js"><link rel="prefetch" href="/blog/assets/js/79.0b64cc47.js"><link rel="prefetch" href="/blog/assets/js/80.43fb5a5e.js"><link rel="prefetch" href="/blog/assets/js/81.b4477c62.js"><link rel="prefetch" href="/blog/assets/js/82.5d46377b.js"><link rel="prefetch" href="/blog/assets/js/83.f793c7c7.js"><link rel="prefetch" href="/blog/assets/js/84.23cde58c.js"><link rel="prefetch" href="/blog/assets/js/85.e86969ef.js"><link rel="prefetch" href="/blog/assets/js/86.5df619a3.js"><link rel="prefetch" href="/blog/assets/js/87.ff656821.js"><link rel="prefetch" href="/blog/assets/js/88.8db93b7c.js"><link rel="prefetch" href="/blog/assets/js/89.671e61e0.js"><link rel="prefetch" href="/blog/assets/js/90.d42a0038.js"><link rel="prefetch" href="/blog/assets/js/91.a03ac2f8.js"><link rel="prefetch" href="/blog/assets/js/92.d5c60cff.js"><link rel="prefetch" href="/blog/assets/js/93.25ce91da.js"><link rel="prefetch" href="/blog/assets/js/94.e0ef0edd.js"><link rel="prefetch" href="/blog/assets/js/95.05e9349f.js"><link rel="prefetch" href="/blog/assets/js/96.22ebe11f.js"><link rel="prefetch" href="/blog/assets/js/97.9f61fcd1.js"><link rel="prefetch" href="/blog/assets/js/98.2cf0c871.js"><link rel="prefetch" href="/blog/assets/js/99.e2a05ce2.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.ef62c33d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.803dc0c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">技术小站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/jvm/" class="nav-link router-link-active">
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/concurrent/" class="nav-link">
  高并发
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/io/" class="nav-link">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/cache/" class="nav-link">
  缓存
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/collection/" class="nav-link">
  集合
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frame/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/mybatis/" class="nav-link">
  MyBatis
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/springboot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/springcloud/" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/netty/" class="nav-link">
  Netty
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/blog/database/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶" class="mobile-dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/middleware/es/" class="nav-link">
  Elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/blog/middleware/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/blog/middleware/k8s/" class="nav-link">
  Kubernetes
</a></li></ul></div></div><div class="nav-item"><a href="/blog/design/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/blog/util/" class="nav-link">
  工具向
</a></div><div class="nav-item"><a href="/blog/project/" class="nav-link">
  项目总结
</a></div><div class="nav-item"><a href="/blog/personal/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/jvm/" class="nav-link router-link-active">
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/concurrent/" class="nav-link">
  高并发
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/io/" class="nav-link">
  IO
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/cache/" class="nav-link">
  缓存
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/collection/" class="nav-link">
  集合
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/frame/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/mybatis/" class="nav-link">
  MyBatis
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/springboot/" class="nav-link">
  SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/springcloud/" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/blog/frame/netty/" class="nav-link">
  Netty
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/blog/database/redis/" class="nav-link">
  Redis
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶" class="mobile-dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/middleware/es/" class="nav-link">
  Elasticsearch
</a></li><li class="dropdown-item"><!----> <a href="/blog/middleware/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/blog/middleware/k8s/" class="nav-link">
  Kubernetes
</a></li></ul></div></div><div class="nav-item"><a href="/blog/design/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/blog/util/" class="nav-link">
  工具向
</a></div><div class="nav-item"><a href="/blog/project/" class="nav-link">
  项目总结
</a></div><div class="nav-item"><a href="/blog/personal/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>类加载器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/jvm/类加载器.html" class="sidebar-link">类加载器</a></li><li><a href="/blog/java/jvm/对象创建.html" class="sidebar-link">对象创建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>内存模型</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/jvm/JVM内存模型.html" class="sidebar-link">JVM内存模型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>垃圾回收</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/jvm/垃圾回收算法.html" class="sidebar-link">垃圾回收算法</a></li><li><a href="/blog/java/jvm/垃圾回收器.html" class="active sidebar-link">垃圾回收器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#垃圾回收类型" class="sidebar-link">垃圾回收类型</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#垃圾收集器" class="sidebar-link">垃圾收集器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#serial-收集器" class="sidebar-link">Serial 收集器</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#parallel-scavenge收集器" class="sidebar-link">Parallel Scavenge收集器</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#parnew-收集器" class="sidebar-link">ParNew 收集器</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#cms收集器" class="sidebar-link">CMS收集器</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#标记-清除过程" class="sidebar-link">标记-清除过程</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#cms收集器的特点" class="sidebar-link">CMS收集器的特点</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#三色标记法" class="sidebar-link">三色标记法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#标记过程" class="sidebar-link">标记过程</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#标记问题" class="sidebar-link">标记问题</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#多标-浮动垃圾" class="sidebar-link">多标 - 浮动垃圾</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#漏标" class="sidebar-link">漏标</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#漏标解决方案" class="sidebar-link">漏标解决方案</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#增量更新" class="sidebar-link">增量更新</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#原始快照" class="sidebar-link">原始快照</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#写屏障" class="sidebar-link">写屏障</a></li><li class="sidebar-sub-header"><a href="/blog/java/jvm/垃圾回收器.html#解决方案" class="sidebar-link">解决方案</a></li></ul></li></ul></li><li><a href="/blog/java/jvm/G1收集器.html" class="sidebar-link">G1收集器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>故障排查</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/jvm/JDK调优命令.html" class="sidebar-link">JDK调优命令</a></li><li><a href="/blog/java/jvm/可视化工具.html" class="sidebar-link">可视化工具</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>排障记录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/jvm/CPU负载过高排查记录.html" class="sidebar-link">CPU负载过高排查记录</a></li><li><a href="/blog/java/jvm/内存问题排查总结.html" class="sidebar-link">内存问题排查总结</a></li><li><a href="/blog/java/jvm/频繁GC排查.html" class="sidebar-link">频繁GC排查</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="垃圾回收器"><a href="#垃圾回收器" class="header-anchor">#</a> 垃圾回收器</h1> <h2 id="垃圾回收类型"><a href="#垃圾回收类型" class="header-anchor">#</a> 垃圾回收类型</h2> <ol><li><p>串行</p> <ul><li><p>单线程</p></li> <li><p>适合堆内存小的时候。</p></li> <li><p>STW</p> <p>Stop The World 的简称。这是因为串行的机制，在垃圾回收的线程运行的时候，其它工作线程都要阻塞。</p> <p><em>在垃圾回收过程中，对象的地址会发生改变。如果其它线程不阻塞，则可能会发生对象引用错误的问题。</em></p></li></ul></li> <li><p>吞吐量优先</p> <ul><li>多线程</li> <li>适合堆内存较大，且多核CPU的情况。</li> <li>在单位时间内，STW时间最短。</li></ul></li> <li><p>响应时间优先</p> <ul><li><p>多线程</p></li> <li><p>适合堆内存较大，且多核CPU的情况。</p></li> <li><p>尽可能让单次 STW 时间最短。</p> <blockquote><p>比如 1小时，垃圾回收两次，每次10分钟。（吞吐量优先）</p></blockquote> <blockquote><p>和每5分种垃圾回收一次，1小时内回收4次。（响应时间优先）</p></blockquote></li></ul></li></ol> <h2 id="垃圾收集器"><a href="#垃圾收集器" class="header-anchor">#</a> 垃圾收集器</h2> <h3 id="serial-收集器"><a href="#serial-收集器" class="header-anchor">#</a> Serial 收集器</h3> <ul><li><strong>XX:+UseSerialGC -XX:+UseSerialOldGC</strong></li></ul> <p>使用串行回收器进行回收，这个参数会使新生代和老年代都采用串行回收器。SerialOld是Serial的老年代版本。</p> <p><strong>新生代使用复制算法，老年代使用标记-整理算法</strong>。</p> <p>Serial收集器是最基本、历史最悠久的收集器。它是一个单线程收集器，一旦收集器工作，系统会停止。</p> <p><img src="https://s2.loli.net/2025/05/29/NAsBLC1KnJfuvEi.png" alt=""></p> <p><strong>在垃圾回收线程运行时，其它工作线程都要阻塞。</strong></p> <p>优点是简单而高效，单线程没有线程开销，有很高的单线程收集效率。</p> <h3 id="parallel-scavenge收集器"><a href="#parallel-scavenge收集器" class="header-anchor">#</a> Parallel Scavenge收集器</h3> <ul><li><strong>XX:+UseParallelGC(年轻代) -XX:+UseParallelOldGC(老年代)</strong></li></ul> <p>Parallel收集器其实就是 <strong><code>Serial收集器的多线程版本</code></strong>。</p> <p>默认的收集线程数与 CPU 核数一致。(可以修改线程数，但是为了吞吐量不建议修改)</p> <p><img src="https://s2.loli.net/2025/05/29/zh2klcoQjWgxqyd.png" alt=""></p> <p>Parallel Scavenge 收集器关注点是吞吐量（高效率的利用CPU）。</p> <p>CMS等垃圾收集器的关注点更多的是用户线程的停顿时间（提高用户体验）。</p> <p>所谓吞吐量就是<strong>CPU中用于运行用户代码的时间与CPU总消耗时间的比值。</strong></p> <p><strong>Parallel Scavenge收集器和Parallel Old收集器 是JDK8默认的新生代和老年代收集器。</strong></p> <h3 id="parnew-收集器"><a href="#parnew-收集器" class="header-anchor">#</a> ParNew 收集器</h3> <ul><li>XX:+UseParNewGC</li></ul> <p>ParNew收集器其实跟 Parallel 收集器很类似，区别主要在于它<code>可以和CMS收集器配合使用</code>。</p> <h3 id="cms收集器"><a href="#cms收集器" class="header-anchor">#</a> CMS收集器</h3> <ul><li><strong>XX:+UseConcMarkSweepGC(old)</strong></li></ul> <p>CMS（Concurrent Mark Sweep）收集器是一种<strong>以获取最短回收停顿时间为目标</strong>的收集器。它非常符合在注重用户体验的应用上使用，它是HotSpot虚拟机第一款真正意义上的并发收集器，它第一次实现了让<strong>垃圾收集线程与用户线程</strong>（基本上）同时工作。</p> <p>使用 <strong><code>标记-清除</code></strong> 算法。</p> <h3 id="标记-清除过程"><a href="#标记-清除过程" class="header-anchor">#</a> 标记-清除过程</h3> <ul><li><p>初始标记</p> <p><strong>暂停用户线程（STW）</strong>，记录下GC Roots 能<code>直接引用</code>的对象。</p></li> <li><p>并发标记</p> <p>开始遍历 GC Roots 能直接引用的对象。</p> <blockquote><p>比如 GC Roots → A → B，开始从 A 遍历，遍历整个对象图。</p></blockquote> <p><strong>不需要暂停用户线程</strong>，这个过程耗时较长，用户线程可以与垃圾回收线程一起运行。</p> <p><em>但是因为用户线程继续运行，可能导致已标记的对象状态发生变化。</em></p></li> <li><p>重新标记</p> <p><strong>需要暂停用户线程（STW）</strong>，重新标记阶段就是为了修复并发标记阶段，对象状态产生变化的对象。</p> <p><strong>这个阶段的停顿时间一般会比初始标记阶段的时间稍长，远远比并发标记阶段时间短。主要用到三色标记里的增量更新算法 (见下面详解) 做重新标记。</strong></p></li> <li><p>并发清理</p> <p><strong>开启用户线程</strong>，同时GC线程开始对未标记的区域做清扫。这个阶段<strong>如果有新增对象会被标记为黑色不做任何处理</strong>(见下面三色标记算法详解)。</p></li> <li><p>并发重置</p> <p>重置本次GC过程中的标记数据。</p></li></ul> <p><img src="https://s2.loli.net/2025/05/29/UkB8GuzYfaAdxCR.png" alt=""></p> <h3 id="cms收集器的特点"><a href="#cms收集器的特点" class="header-anchor">#</a> CMS收集器的特点</h3> <p><strong>优点</strong></p> <ul><li>并发收集</li> <li>低停顿</li></ul> <p><strong>缺点</strong></p> <ul><li><p>CPU 资源敏感（GC线程会抢占资源）</p></li> <li><p>无法处理GC过程中新产生的垃圾</p> <blockquote><p>并发标记和并发清理阶段产生的新垃圾不做操作，只能等到下次 GC。</p></blockquote></li> <li><p>标记-清除算法会导致大量内存碎片</p> <p>可以通过参数<code>XX:+UseCMSCompactAtFullCollection</code> 让jvm在执行完标记清除后再做整理。</p></li> <li><p>执行过程不确定</p> <p>可能在本次 GC还未完成的时候，由于用户线程的原因，触发新一次的 GC。</p></li></ul> <hr> <h2 id="三色标记法"><a href="#三色标记法" class="header-anchor">#</a> 三色标记法</h2> <p>垃圾回收算法判断对象是否需要被回收时，一般采用可达性分析算法。</p> <p>而在以减少系统停顿时间为目的的 CMS 收集器中，<code>标记-清除</code>过程中存在垃圾回收线程和用户线程并发的情况，可能导致对象状态发生变化。</p> <p>三色标记法将对象的状态按照三种颜色划分，不仅能解决和用户线程并发的问题，还能缩短 STW 的时间。</p> <ul><li><p>白色</p> <p>没有被 GC 扫描到的节点都是白色，意味着可以被回收。</p> <p><em>在初始标记开始前，所有节点的状态都是白色。</em></p></li> <li><p>灰色</p> <p>该节点表示正在标记的节点，至少存在一个引用没有被扫描到。<strong>是一种中间状态。</strong></p> <blockquote><p>最终节点状态只会停留在黑色或者白色。</p></blockquote></li> <li><p>黑色</p> <p>被 GC 扫描过的节点标记为黑色，表示节点是安全的。</p></li></ul> <h3 id="标记过程"><a href="#标记过程" class="header-anchor">#</a> 标记过程</h3> <ol><li><p>初始标记阶段。从虚拟机栈中 GC Roots 开始扫描直接引用对象，找到 Node1 和 Node5，将 Node1 和 Node5 标记为灰色。</p> <p><img src="https://s2.loli.net/2025/05/29/YjdU4ck7w6nqxas.png" alt=""></p></li> <li><p>并发标记阶段。</p> <p>从 Node1 和 Node5 开始遍历，查到 Node2 和 Node6，此时将 Node2 和 Node6 标记为灰色。同时将 Node1 和 Node5 标记为黑色。</p> <p><img src="https://s2.loli.net/2025/05/29/djrN9QTzlLtvYk3.png" alt=""></p> <p><img src="https://s2.loli.net/2025/05/29/XMsDeP5OaYV8FRZ.png" alt=""></p></li> <li><p>并发清除阶段。</p> <p>经历过标记阶段之后，只剩下Node4 和 Node7 两个节点没有被引用，可以被回收。</p> <p><img src="https://s2.loli.net/2025/05/29/in2qw7Ndm4e519B.png" alt=""></p> <p>将白色阶段回收之后，剩下的就都是黑色节点。</p> <p><img src="https://s2.loli.net/2025/05/29/nieSQC1oN8fHxKR.png" alt=""></p></li></ol> <h3 id="标记问题"><a href="#标记问题" class="header-anchor">#</a> 标记问题</h3> <h3 id="多标-浮动垃圾"><a href="#多标-浮动垃圾" class="header-anchor">#</a> 多标 - 浮动垃圾</h3> <ul><li><p>在并发-标记过程中，如果运行的方法被销毁。该方法作为 GC Roots 引用的对象，之前如果已经被扫描过标记为黑色了。那么本轮 GC不会再回收这些对象，<strong>这些本该被回收的垃圾对象成为浮动垃圾</strong>。</p></li> <li><p>在并发-标记（并发-清理）过程中，如果产生了新对象，通常做法直接设置为黑色。本轮也不会进行垃圾回收，放到下一轮回收。</p> <blockquote><p>如果这部分对象在本次 GC 有垃圾对象产生，也是浮动垃圾。</p></blockquote></li></ul> <hr> <p>浮动垃圾并不会影响垃圾回收的正确性，只需要等到下一次垃圾回收就可以被清除。</p> <h3 id="漏标"><a href="#漏标" class="header-anchor">#</a> 漏标</h3> <p>应该被标记为黑色回收的对象，漏标。导致存活对象被垃圾回收，严重影响程序功能。</p> <p><strong>漏标必须满足的条件</strong></p> <p>漏标只有在以下两个条件都满足的情况下才会产生：</p> <p>条件 1：有至少一个黑色对象在自己被标记之后指向了这个白色对象。（黑色对象本身不会被再次扫描）</p> <p>条件 2：灰色对象在自己引用扫描完成之前删除了对白色对象的引用。</p> <p><img src="https://s2.loli.net/2025/05/29/YTHLohUwnjFe8mK.png" alt=""></p> <blockquote><p>只有同时满足两个条件才会发生漏标的情况，所以只要破坏其中一个条件，就能解决漏标问题。</p></blockquote> <h3 id="漏标解决方案"><a href="#漏标解决方案" class="header-anchor">#</a> 漏标解决方案</h3> <h3 id="增量更新"><a href="#增量更新" class="header-anchor">#</a> 增量更新</h3> <p><em>破坏条件 1（有至少一个黑色对象在自己被标记之后指向了这个白色对象）。</em></p> <p>在并发标记阶段当我们黑色对象（B）引用关联白色对象（E），记录下B黑色对象。</p> <p>在重复标记阶段，将 B黑色对象变为灰色对象，然后扫描 B 的整个引用链。</p> <blockquote><p>记录黑色对象的过程结合了写屏障来实现的。</p></blockquote> <blockquote><p>增量更新指的是保存引用关系，在重复标记阶段再次更新。</p></blockquote> <p><img src="https://s2.loli.net/2025/05/29/8Zde5slrOh6pDBK.png" alt=""></p> <ul><li>在并发-标记阶段，当 Node5 引用 Node3 时，记录 q 指针的引用关系。</li> <li>在重复标记阶段，将q 指针对应的 Node5 变为灰色对象，然后扫描 Node5 的整个调用链。最终将 Node3 标记为黑色，不被清除。</li></ul> <h3 id="原始快照"><a href="#原始快照" class="header-anchor">#</a> 原始快照</h3> <p><em>破坏条件 2（灰色对象在自己引用扫描完成之前删除了对白色对象的引用）</em></p> <p>当灰色对象要删除指向白色对象的引用关系时， 就将这个要删除的引用记录下来。</p> <p>在并发扫描结束之后，再将这些记录过的引用关系中的灰色对象为根， 重新扫描一次。这样就能扫描到白色的对象，将白色对象直接标记为黑色 (目的就是让这种对象在本轮gc清理中能存活下来，待下一轮gc的时候重新扫描，这个对象也有可能是浮动垃圾)。</p> <blockquote><p>原始快照指的是保留删除前的引用关系，将要被删除的引用对象标记为黑色，下次 GC 再重新扫描。</p></blockquote> <p><img src="https://s2.loli.net/2025/05/29/mOJKy4wB9njiu7H.png" alt=""></p> <ul><li><p>当 p 指针引用关系要被删除时，记录下 p 指针。</p></li> <li><p>在重复扫描过程中，以灰色对象为根，重新扫描一次。</p></li> <li><p>将扫描到的白色对象直接标记为黑色。</p> <p>这样做的目的是让对象在本轮 GC 中能够存活下来，等到下次 GC时再重新扫描。</p></li></ul> <h3 id="写屏障"><a href="#写屏障" class="header-anchor">#</a> 写屏障</h3> <p>写屏障的主要作用是确保在并发编程环境中，对共享数据的写操作能够被正确地同步和管理。</p> <p>特别是在垃圾回收过程中，<strong>确保对象状态的改变能够被垃圾回收器感知</strong>。</p> <p>当应用程序的线程对一个对象进行写操作时，写屏障会被触发，通知垃圾回收器对象的状态变化，从而避免漏标等问题。</p> <h3 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h3> <ul><li>CMS 收集器
<ul><li>写屏障 + 增量更新</li></ul></li> <li>G1 收集器
<ul><li>写屏障 - 原始快照（SATB）</li></ul></li> <li>ZGC：
<ul><li>读屏障</li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025-05-29 19:58:37</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/java/jvm/垃圾回收算法.html" class="prev">
        垃圾回收算法
      </a></span> <span class="next"><a href="/blog/java/jvm/G1收集器.html">
        G1收集器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.36c7cd49.js" defer></script><script src="/blog/assets/js/2.5c52e41f.js" defer></script><script src="/blog/assets/js/1.65a7fcd1.js" defer></script><script src="/blog/assets/js/153.a106e956.js" defer></script>
  </body>
</html>
