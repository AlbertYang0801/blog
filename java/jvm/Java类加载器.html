<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>类加载器 | 技术小站</title>
    <meta name="description" content="生活不止眼前的代码，还有迈向田野的步伐">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/blog/assets/style.QeAzL0pf.css" as="style">
    <link rel="preload stylesheet" href="/blog/vp-icons.css" as="style">
    
    <script type="module" src="/blog/assets/app.CfQQeXnQ.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.CJiiDtoo.js">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.D7pKEi_Q.js">
    <link rel="modulepreload" href="/blog/assets/java_jvm_Java类加载器.md.BEJdgZui.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/blog/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/blog/logo.ico" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>技术小站</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>Java</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/java/jvm/" data-v-35975db6><!--[--><span data-v-35975db6>JVM</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/java/concurrent/" data-v-35975db6><!--[--><span data-v-35975db6>高并发</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/java/io/" data-v-35975db6><!--[--><span data-v-35975db6>IO</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/java/cache/" data-v-35975db6><!--[--><span data-v-35975db6>缓存</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/java/collection/" data-v-35975db6><!--[--><span data-v-35975db6>集合</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>框架</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/frame/spring/" data-v-35975db6><!--[--><span data-v-35975db6>Spring</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/frame/mybatis/" data-v-35975db6><!--[--><span data-v-35975db6>MyBatis</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/frame/springboot/" data-v-35975db6><!--[--><span data-v-35975db6>SpringBoot</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/frame/springcloud/" data-v-35975db6><!--[--><span data-v-35975db6>SpringCloud</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/frame/netty/" data-v-35975db6><!--[--><span data-v-35975db6>Netty</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>数据库</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/database/mysql/" data-v-35975db6><!--[--><span data-v-35975db6>MySQL</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/database/redis/" data-v-35975db6><!--[--><span data-v-35975db6>Redis</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/database/clickhouse/" data-v-35975db6><!--[--><span data-v-35975db6>ClickHouse</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>中间件</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/middleware/es/" data-v-35975db6><!--[--><span data-v-35975db6>Elasticsearch</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/middleware/kafka/" data-v-35975db6><!--[--><span data-v-35975db6>Kafka</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/blog/middleware/rocketmq/" data-v-35975db6><!--[--><span data-v-35975db6>RocketMQ</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/design/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>设计模式</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/AlbertYang0801" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/AlbertYang0801" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>类加载器</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/Java%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Java类加载器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>对象创建</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>内存模型</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>JVM内存模型</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>垃圾回收</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>垃圾回收算法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>垃圾回收器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/G1%E6%94%B6%E9%9B%86%E5%99%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>G1收集器</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>故障排查</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/JDK%E8%B0%83%E4%BC%98%E5%91%BD%E4%BB%A4.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>JDK调优命令</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>可视化工具</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>排障记录</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/CPU%E8%B4%9F%E8%BD%BD%E8%BF%87%E9%AB%98%E6%8E%92%E6%9F%A5%E8%AE%B0%E5%BD%95.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>CPU负载过高排查记录</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/%E5%86%85%E5%AD%98%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E6%80%BB%E7%BB%93.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>内存问题排查总结</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/blog/java/jvm/%E9%A2%91%E7%B9%81GC%E6%8E%92%E6%9F%A5.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>频繁GC排查</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _blog_java_jvm_Java%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8" data-v-39a288b8><div><h1 id="类加载器" tabindex="-1">类加载器 <a class="header-anchor" href="#类加载器" aria-label="Permalink to &quot;类加载器&quot;">​</a></h1><h2 id="什么是类加载器" tabindex="-1">什么是类加载器 <a class="header-anchor" href="#什么是类加载器" aria-label="Permalink to &quot;什么是类加载器&quot;">​</a></h2><p>类加载器（ClassLoader）就是在系统运行过程中动态的将编译后的.class字节码文件加载到JVM中的工具。在IDE中编写的源代码文件都是<code>.java</code>文件，通过编译对应生成<code>.class</code>文件。而类加载器就是用来将<code>.class</code>文件加载到JVM中的工具。</p><h2 id="类加载器类型" tabindex="-1">类加载器类型 <a class="header-anchor" href="#类加载器类型" aria-label="Permalink to &quot;类加载器类型&quot;">​</a></h2><p><img src="https://s2.loli.net/2025/05/29/VPw5Nc8sYFb3nUC.png" alt="image-20250529160429290"></p><p>Java默认提供了三个类加载器，分别是 AppClassLoader、ExtClassLoader、BootstrapClassLoader，除此之外还可以自定义类加载器。类加载器之间是父级的关系，但不是通过继承实现父级关系的，而是通过组合的形式来实现的，在<code>ClassLoader</code>的源码中就体现了组合的关系。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//源码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> native</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registerNatives</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        registerNatives</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //通过组合关系将父级注入进来</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassLoader parent;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_1-bootstrapclassloader" tabindex="-1">1.BootstrapClassLoader <a class="header-anchor" href="#_1-bootstrapclassloader" aria-label="Permalink to &quot;1.BootstrapClassLoader&quot;">​</a></h3><p>根类加载器，默认加载系统变量<code>sun.boot.class.path</code>指定的类库，是最顶级的类加载器。</p><ul><li>查看Java系统变量<code>sun.boot.class.path</code>指定的类库。</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //查看Java系统变量</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(System.out);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //查看sun.boot.class.path指定的类库</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String property </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sun.boot.class.path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] split </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> property.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (String path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> split) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// output</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//       /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/resources.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/rt.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//      /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/sunrsasign.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jsse.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jce.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/charsets.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/jfr.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/classes</span></span></code></pre></div><p>根据结果可以看到都是jdk里面的包，我们熟悉的<code>java.lang</code>包就位于<code>rt.ja</code>r包里面。</p><ul><li><p>通过ExtClassLoader获取BootstrapClassLoader</p><p>Java中可以通过ClassLoader类来获取父级的ClassLoader，但是在Java中通过ExtClassLoader获取BootstrapClassLoader时为null，因为BootstrapClassLoader是用C/C++编写的，Java中无法获取其实例。</p></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //AppClassLoader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ClassLoader appClassLoader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSystemClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //ExtClassLoader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ClassLoader extClassLoader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> appClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(extClassLoader);	</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//output sun.misc.Launcher$ExtClassLoader@cc34f4d</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //BoostrapClassLoader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ClassLoader boostrapClassLoader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> extClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(boostrapClassLoader); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//output null</span></span></code></pre></div><h3 id="_2-extclassloader" tabindex="-1">2.ExtClassLoader <a class="header-anchor" href="#_2-extclassloader" aria-label="Permalink to &quot;2.ExtClassLoader&quot;">​</a></h3><p>通过Java实现的扩展类加载器，用来加载系统指定的扩展类库，默认加载系统变量<code>java.ext.dirs</code>指定的类库。由于是Java实现的，我们可以在程序中获取它的实例并使用。</p><ul><li>查看Java系统变量<code>java.ext.dirs</code>指定的类库。</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String property </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java.ext.dirs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] split </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> property.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (String path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> split) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//output</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Users/yangjunwei/Library/Java/Extensions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/jre/lib/ext</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Library/Java/Extensions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /Network/Library/Java/Extensions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /System/Library/Java/Extensions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//        /usr/lib/java</span></span></code></pre></div><h3 id="_3-appclassloader" tabindex="-1">3.AppClassLoader <a class="header-anchor" href="#_3-appclassloader" aria-label="Permalink to &quot;3.AppClassLoader&quot;">​</a></h3><p>AppClassLoader也叫应用类加载器，也是Java实现的类加载器。它的作用是加载应用程序<code>classpath</code>下所有的类库，调用<code>getClassLoader()</code>方法返回的都是它的实例。自定义加载器默认的父级就是AppClassLoader。</p><h3 id="_4-自定义类加载器" tabindex="-1">4.自定义类加载器 <a class="header-anchor" href="#_4-自定义类加载器" aria-label="Permalink to &quot;4.自定义类加载器&quot;">​</a></h3><p>除了Java默认提供的三种类加载器外，还可以自定义类加载器。自定义类加载器通过继承<code>ClassLoader</code>类实现，重写<code>findCLass()</code>类来实现。</p><h2 id="类加载器创建过程" tabindex="-1">类加载器创建过程 <a class="header-anchor" href="#类加载器创建过程" aria-label="Permalink to &quot;类加载器创建过程&quot;">​</a></h2><p>因为 BootStarpClassLoader 是由 C/C++ 编写的，它本身是虚拟机的一部分，所以它并不是一个JAVA类，无法通过JAVA引用，JVM启动的时候就能通过 BootstrapClassLoader 加载其所指定路径下的类库。JAVA中对应的有一个虚拟机入口类 <code>Launcher</code> 类，可以在构造方法中看到ExtClassLoader和AppClassLoader的创建。同时可以看到<code>bootClassPath</code>有指定BootstarpClassLoader默认加载系统变量<code>sun.boot.class.path</code>指定的类库。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Launcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> URLStreamHandlerFactory factory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher launcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Launcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String bootClassPath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sun.boot.class.path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassLoader loader;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> URLStreamHandler fileHandler;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Launcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Launcher.ExtClassLoader var1;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //加载ExtClassLoader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                var1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.ExtClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (IOException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">var10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InternalError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Could not create extension class loader&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, var10);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //加载AppClassLoader</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.AppClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAppClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (IOException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">var9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InternalError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Could not create application class loader&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, var9);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_1-bootstrapclassloader的创建过程" tabindex="-1">1. BootstrapClassLoader的创建过程 <a class="header-anchor" href="#_1-bootstrapclassloader的创建过程" aria-label="Permalink to &quot;1. BootstrapClassLoader的创建过程&quot;">​</a></h3><p>在<code>Launcher</code>类中并没有BootStarpClassLoader的创建过程，因为BootStarpClassLoader是由C/C++编写的，它本身是虚拟机的一部分，所以它并不是一个JAVA类，无法通过JAVA引用，JVM启动的时候就能通过BootstrapClassLoader加载其所指定路径下的类库。</p><ul><li>扩展1：怎么判断某个类是否能在<code>BootStarpClassLoader</code>加载？</li></ul><p>这里简单介绍一下，后续双亲委派会详细介绍。</p><p>在<code>ClassLoader</code>类的1012行存在一个<code>native</code>关键字修饰的方法<code>findBootstrapClass</code>，就是用来调用<code>本地方法库</code>来实现判断的。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findBootstrapClassOrNull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findBootstrapClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // return null if not found</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> native</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findBootstrapClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String name);</span></span></code></pre></div><ul><li><p>扩展2：BootStarpClassLoader在虚拟机的哪个位置？</p><p>本地方法库（待验证）</p></li></ul><h3 id="_2-extclassloader的创建过程" tabindex="-1">2.ExtClassLoader的创建过程 <a class="header-anchor" href="#_2-extclassloader的创建过程" aria-label="Permalink to &quot;2.ExtClassLoader的创建过程&quot;">​</a></h3><p>在上方<code>Launcher</code>类的构造方法中指定了<code>ExtClassLoader</code>的创建。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Launcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Launcher.ExtClassLoader var1;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          	//创建ExtClassLoader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            var1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.ExtClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (IOException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">var10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InternalError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Could not create extension class loader&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, var10);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   			......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div><p>对应的扩展类的创建过程的源码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">				public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.ExtClassLoader </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // 懒汉式双重加载</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  				if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Class var0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.ExtClassLoader.class;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Launcher.ExtClassLoader.class) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      	//调用创建方法</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">				//创建方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.ExtClassLoader </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Launcher.ExtClassLoader)AccessController.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doPrivileged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PrivilegedExceptionAction&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Launcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.ExtClassLoader </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      	//加载系统变量`java.ext.dirs`指定的类库</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] var1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.ExtClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExtDirs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> var2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> var1.length;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> var3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; var3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> var2; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">var3) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            MetaIndex.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var1[var3]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">												//调用构造方法创建</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (PrivilegedActionException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">var1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (IOException)var1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span></code></pre></div><p>在加载了系统变量指定的类库后，调用了<code>ExtClassLoader</code>的构造方法加载，在调用父类的构造方法<code>URLClassLoader</code>时候指定了父级<code>ClassLoader</code>为<code>null</code></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//构造方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] var1) throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  		//传入的父级ClassLoader为null</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">			super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExtURLs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var1), (ClassLoader)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Launcher.factory);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			SharedSecrets.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getJavaNetAccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getURLClassPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initLookupCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//父类构造方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URLClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] urls, ClassLoader parent,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      URLStreamHandlerFactory factory) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parent);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // this is to make the stack depth consistent with 1.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SecurityManager security </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSecurityManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (security </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        security.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkCreateClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    acc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AccessController.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ucp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URLClassPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(urls, factory, acc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>扩展1：<code>ExtClassLoader</code>的父类是<code>BootStarpClassLoader</code>，是怎么调用<code>BootStarpClassLoader</code>的？</li></ul><p>在Java中通过<code>ExtClassLoader</code>获取<code>BootstrapClassLoader</code>时结果为null，这是因为Java无法调用<code>BootstrapClassLoader</code>实例。具体调用过程可以参考源码<code>Launcher</code>中<code>loadClass()</code>方法的实现过程，在判断检查类是否加载之前，若<code>parent</code>为空，则就会调用<code>BootstrapClassLoader</code>。这也解释了为什么<code>ExtClassLoader</code>在创建的时候指定<code>parent</code>为<code>null</code>的原因。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String name, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resolve)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        throws ClassNotFoundException</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClassLoadingLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 首先，检查类是否已经被加载</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findLoadedClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nanoTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (parent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 				//父加载器不为空</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        //父加载器为null，调用BootstrapClassLoader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findBootstrapClassOrNull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ClassNotFoundException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // ClassNotFoundException thrown if class not found</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // from the non-null parent class loader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               ......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h3 id="_3-appclassloader的创建过程" tabindex="-1">3.AppClassLoader的创建过程 <a class="header-anchor" href="#_3-appclassloader的创建过程" aria-label="Permalink to &quot;3.AppClassLoader的创建过程&quot;">​</a></h3><p>在<code>Launcher</code>类的构造方法中同样指定了<code>AppClassLoader</code>的创建，但是在创建<code>AppClassLoader</code>时将<code>ExtClassLoader</code>作为参数传了进去。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Launcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Launcher.ExtClassLoader var1;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //加载ExtClassLoader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                var1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.ExtClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExtClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (IOException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">var10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InternalError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Could not create extension class loader&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, var10);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //加载AppClassLoader(ExtClassLoader实例作为参数传入)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.loader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.AppClassLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAppClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (IOException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">var9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InternalError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Could not create application class loader&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, var9);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>对应的扩展类的创建过程的源码如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">				 public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassLoader </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAppClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassLoader var0) throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           	//加载`java.class.path`系统变量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String var1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java.class.path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] var2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> var1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClassPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var1);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ClassLoader)AccessController.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doPrivileged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PrivilegedAction&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Launcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">AppClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.AppClassLoader </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] var1x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> var1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pathToURLs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var2);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                  	//调用构造方法，传入classPath对应路径和ExtClassLoader的实例对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Launcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var1x, var0);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span></code></pre></div><p>在加载了系统变量指定的类库后，调用了<code>AppClassLoader</code>的构造方法加载，在调用父类的构造方法<code>URLClassLoader</code>时候指定了父级<code>ClassLoader</code>为<code>ExtClassLoader的实例对象</code>，这也证明了<code>ExtClassLoader</code>为<code>AppClassLoader</code>的父级。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//构造方法</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] var1, ClassLoader var2) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var1, var2, Launcher.factory);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ucp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initLookupCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//父类构造方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URLClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] urls, ClassLoader parent,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      URLStreamHandlerFactory factory) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parent);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // this is to make the stack depth consistent with 1.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SecurityManager security </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSecurityManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (security </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        security.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkCreateClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    acc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AccessController.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ucp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URLClassPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(urls, factory, acc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="自定义类加载器的创建过程" tabindex="-1">自定义类加载器的创建过程 <a class="header-anchor" href="#自定义类加载器的创建过程" aria-label="Permalink to &quot;自定义类加载器的创建过程&quot;">​</a></h3><ol><li>继承<code>ClassLoader</code>类，标示该类是一个类加载器。</li><li>重写<code>loadClass()</code>方法，实现寻找<code>.class</code>文件的方式。</li><li>调用<code>defineClass()</code>方法，加载读取的<code>.class</code>文件。</li></ol><h2 id="双亲委派模型" tabindex="-1">双亲委派模型 <a class="header-anchor" href="#双亲委派模型" aria-label="Permalink to &quot;双亲委派模型&quot;">​</a></h2><p>双亲委派总结来说就是<code>向上委托，向下加载</code>。</p><p><img src="https://s2.loli.net/2025/05/29/SEWuDLhPzgVJxKM.png" alt="image-20250529160458213"></p><h3 id="类加载流程" tabindex="-1">类加载流程 <a class="header-anchor" href="#类加载流程" aria-label="Permalink to &quot;类加载流程&quot;">​</a></h3><ol><li>当我们需要加载一个应用程序<code>classpath</code>下的自定义类的时候，<code>AppClassLoader</code>会首先判断自己是否加载过这个类，如果已经加载过则直接返回类的实例，若没有加载过则委托给自己的父类加载器<code>ExtClassLoader</code>。</li><li><code>ExtClassLoader</code>也会首先判断是否加载过，若加载过直接返回类的实例。若没有则委托给自己的父类加载器<code>BootstrapClassLoader</code>。</li><li><code>BootstrapClassLoader</code>收到类的加载任务之后，也会首先判断是否加载过，若加载过直接返回类的实例。不同的是，若没有加载过就会在自己负责的加载路径<code>sun.boot.class.path</code>搜索这个类并加载。如果找到了，则执行加载任务并返回类的实例，否则将加载任务交给<code>ExtClassLoader</code>去执行。</li><li><code>ExtClassLoader</code>同样会在自己负责的加载路径<code>java.ext.dirs</code>搜索这个类并加载。如果找到了，则执行加载任务并返回类的实例，否则将加载任务交给<code>AppClassLoader</code>去执行。</li><li>当<code>BootstrapClassLoader</code>和<code>ExtClassLoader</code>都没能成功加载到这个类时，就需要<code>AppClassLoader</code>来尝试加载。<code>AppClassLoader</code>会在<code>classpath</code>下搜索这个类并加载，如果找到了，则执行加载任务并返回类的实例，否则将抛出<code>ClassNotFoundException</code>异常。</li></ol><h3 id="重要方法" tabindex="-1">重要方法 <a class="header-anchor" href="#重要方法" aria-label="Permalink to &quot;重要方法&quot;">​</a></h3><h3 id="_1-loadclass-方法" tabindex="-1">1. loadClass()方法 <a class="header-anchor" href="#_1-loadclass-方法" aria-label="Permalink to &quot;1. loadClass()方法&quot;">​</a></h3><ul><li>类加载过程主要在<code>ClassLoader</code>的<code>loadClass()</code>方法中实现，结合<code>ClassLoader</code>类可以发现其使用了<code>责任链模式</code>。</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> native</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registerNatives</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        registerNatives</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		//父结点</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassLoader parent;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  	......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">boolean</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassNotFoundException</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClassLoadingLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 首先，检查类是否被加载过</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findLoadedClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nanoTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      	//如果父级不为空</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (parent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                          	//递归调用父级的该方法LoadClass()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                          	//如果父级为null，意为父级为BootstrapClassLoader。（具体见下方代码）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findBootstrapClassOrNull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ClassNotFoundException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // ClassNotFoundException thrown if class not found</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // from the non-null parent class loader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // If still not found, then invoke findClass in order</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // to find the class.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nanoTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      	//如果父级都没有找到类，选择加载</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // this is the defining class loader; record the stats</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        sun.misc.PerfCounter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParentDelegationTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(t1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t0);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        sun.misc.PerfCounter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFindClassTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addElapsedTimeFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(t1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        sun.misc.PerfCounter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFindClasses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">increment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (resolve) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                    resolveClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  			......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * Returns a class loaded by the bootstrap class loader;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * or return null if not found.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findBootstrapClassOrNull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          	//检查该类是否已经加载过</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">						//调用底层通信方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findBootstrapClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // native关键字修饰，从本地方法库调用BootstarpCLassLoader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> native</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findBootstrapClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre></div><h3 id="_2-findclass-方法" tabindex="-1">2.findClass()方法 <a class="header-anchor" href="#_2-findclass-方法" aria-label="Permalink to &quot;2.findClass()方法&quot;">​</a></h3><ul><li>根据名称或位置加载.class字节码</li></ul><p>在<code>ClassLoader</code>类中，<code>findClass()</code>方法如下，直接抛出异常，不满足加载类的需求，这就要求需要在子类中重写该方法。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String name) throws ClassNotFoundException {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassNotFoundException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><code>AppClassLoader</code>和<code>ExtClassLoader</code>都有同样的父类<code>URLClassLoader</code>，<code>URLClassLoader</code>中就重写了<code>findClass()</code>方法。</p><p>从URL搜索路径中查找并加载具有指定名称的类。引用JAR文件的所有URL都会根据需要加载和打开，直到找到该类为止。。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URLClassLoader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SecureClassLoader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Closeable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassNotFoundException</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; result;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AccessController.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doPrivileged</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PrivilegedExceptionAction&lt;Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassNotFoundException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            String path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.class&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            Resource res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ucp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name, res);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (IOException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassNotFoundException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name, e);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }, acc);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (java.security.PrivilegedActionException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pae</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ClassNotFoundException) pae.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassNotFoundException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  		</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  			......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre></div><h3 id="_3-defineclass-方法" tabindex="-1">3. defineClass()方法 <a class="header-anchor" href="#_3-defineclass-方法" aria-label="Permalink to &quot;3. defineClass()方法&quot;">​</a></h3><ul><li>使用从指定资源获得的类字节定义一个类。生成的Class必须先解析，然后才能使用。</li></ul><h3 id="为什么需要双亲委派模型" tabindex="-1">为什么需要双亲委派模型？ <a class="header-anchor" href="#为什么需要双亲委派模型" aria-label="Permalink to &quot;为什么需要双亲委派模型？&quot;">​</a></h3><ul><li><p>通过从下往上委派的方式，可以避免类的重复加载。当父类加载器已经加载过一个类时，子类不会再重新加载。</p></li><li><p>通过双亲委派的方式，保证了核心库的安全性。即核心库已有的类，是不会重复加载的。</p><blockquote><p>比如重写了String 类，在加载时会向上委托判断是否加载过，如果加载过则不再加载。能有效防止核心类被篡改。</p></blockquote></li><li><p>保证类的唯一性。（待深入研究）</p><p>当类的包路径相同，且是同一个类加载器加载的时候，这两个类就是相同的。如果是不同的两个类加载器加载的类，在JVM中不会判断为同一个类。</p></li></ul><h3 id="如何主动破坏双亲委派机制" tabindex="-1">如何主动破坏双亲委派机制？ <a class="header-anchor" href="#如何主动破坏双亲委派机制" aria-label="Permalink to &quot;如何主动破坏双亲委派机制？&quot;">​</a></h3><p>双亲委派机制主要在<code>loadClass()</code>方法里面，我们可以实现一个自定义类加载器，重写<code>loadClass()</code>方法，不进行双亲委派机制即可。</p><h2 id="tomcat打破双亲委派机制" tabindex="-1">Tomcat打破双亲委派机制 <a class="header-anchor" href="#tomcat打破双亲委派机制" aria-label="Permalink to &quot;Tomcat打破双亲委派机制&quot;">​</a></h2><h3 id="tomcat为什么要打破双亲委派机制" tabindex="-1">Tomcat为什么要打破双亲委派机制？ <a class="header-anchor" href="#tomcat为什么要打破双亲委派机制" aria-label="Permalink to &quot;Tomcat为什么要打破双亲委派机制？&quot;">​</a></h3><ol><li><p>tomcat 作为 web 容器，可以部署多个应用。不同应用可能依赖同一个第三方类库的不同版本。需要保证每个应用的类库都是独立的，相互隔离的。</p><blockquote><p>如果使用默认的类加载机制，默认只能根据类名去加载一份，所以无法加载同一个类库的不同版本。</p></blockquote></li><li><p>web 容器也有自己依赖的类库，要与应用的类库区分开。</p><blockquote><p>如果是默认的类加载机制，web 容器和应用重复的类库只能加载一次。如果应用类库被篡改了，可能会影响到 web 容器的正常使用。</p></blockquote></li><li><p>web 容器能支持 jsp 的修改，而且无需重启。</p><blockquote><p>jsp文件最后也是编译成 .class 文件的，如果按照默认的类加载机制，修改后的 jsp 文件是无法被类加载器加载的。</p></blockquote></li></ol><p><img src="https://s2.loli.net/2025/05/29/PlXjfYutJxTzhB6.png" alt="image-20250529160516478"></p><p><strong>WebappClassLoader 破坏了双亲委派模型。</strong></p><blockquote><p>各个Webapp私有的类加载器，加载路径中的class只对当前Webapp可见，比如加载war包里相关的类，每个war包应用都有自己的WebappClassLoader，实现相互隔离，比如不同war包应用引入了不同的spring版本，这样实现就能加载各自的spring版本；</p></blockquote></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><!----></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/blog/java/jvm/%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>对象创建</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"CXhnRT_C\",\"database_clickhouse_clickhouse基础.md\":\"BnQmjF0U\",\"database_clickhouse_clickhouse高级.md\":\"DUKT3N_r\",\"database_clickhouse_index.md\":\"iLlKYsRV\",\"database_clickhouse_为什么弃用elasticsearch.md\":\"CVM-qPdL\",\"database_mysql_b树和b_树.md\":\"DWuGV9SI\",\"database_mysql_explain使用总结.md\":\"C1HCFCfE\",\"database_mysql_index.md\":\"C9GVY22D\",\"database_mysql_innodb存储引擎.md\":\"BjxDcX0v\",\"database_mysql_mysql基础架构.md\":\"CXyxMt_A\",\"database_mysql_mysql日志系统.md\":\"DfHwg9Rg\",\"database_mysql_mysql根据idb文件恢复数据.md\":\"kDSqqpQV\",\"database_mysql_mysql的binlog日志过期删除.md\":\"CVDOtjN8\",\"database_mysql_orderby和limit混用的bug.md\":\"D9oo66kR\",\"database_mysql_sql语句的抖动问题.md\":\"EyANs5dk\",\"database_mysql_一条更新sql的执行过程.md\":\"DdQskhS1\",\"database_mysql_事务隔离.md\":\"4cmUjjdK\",\"database_mysql_慢查询日志.md\":\"DdMSCtZV\",\"database_mysql_索引.md\":\"BccvbWKV\",\"database_mysql_索引失效的场景.md\":\"ufRoD1EG\",\"database_mysql_行锁.md\":\"BnWQ9jUp\",\"database_mysql_锁.md\":\"Ce__tOSL\",\"database_redis_index.md\":\"BZyv1rxf\",\"database_redis_lru和lfu算法.md\":\"C4OlKV6K\",\"database_redis_redisson.md\":\"qCnuUwHM\",\"database_redis_redis事务.md\":\"G4sBw6R7\",\"database_redis_redis实现分布式锁.md\":\"DJGSBpge\",\"database_redis_redis数据类型.md\":\"D1uZrGsx\",\"database_redis_redis数据类型原理.md\":\"DxsLu8qg\",\"database_redis_redis的持久化.md\":\"BCyrNImQ\",\"database_redis_redis集群.md\":\"W6fAXzIZ\",\"database_redis_内存淘汰策略.md\":\"yAfZryzx\",\"database_redis_布隆过滤器.md\":\"Dkd6TpE0\",\"database_redis_缓存问题.md\":\"B8nj3eYW\",\"database_redis_过期策略.md\":\"TlCdw6O_\",\"frame_mybatis_custom_sql执行器.md\":\"B-M0umNo\",\"frame_mybatis_custom_xml解析.md\":\"CpjlTuYy\",\"frame_mybatis_custom_手写mybatis.md\":\"CurWqdjY\",\"frame_mybatis_custom_数据源.md\":\"Cb0sDn2g\",\"frame_mybatis_custom_映射器-mapper.md\":\"so97gzQ6\",\"frame_mybatis_index.md\":\"Do7K3kKM\",\"frame_netty_bytebuf.md\":\"DSvd7QWL\",\"frame_netty_handler的共享和并发安全性.md\":\"B_8YEIkz\",\"frame_netty_http服务和ssl_tls.md\":\"DGaqwTwN\",\"frame_netty_index.md\":\"D7WhkP2w\",\"frame_netty_netty实现文件下载.md\":\"CbXWQV5i\",\"frame_netty_netty实现通信框架.md\":\"ELCRHN4P\",\"frame_netty_netty常用组件.md\":\"BNarbQVM\",\"frame_netty_tcp粘包拆包问题.md\":\"DimvA1_b\",\"frame_netty_内置通信传输模式.md\":\"Dp77Mv1V\",\"frame_netty_写空闲和读空闲.md\":\"Dsb3tKm5\",\"frame_netty_基于netty实现rpc.md\":\"DLCAILXR\",\"frame_netty_序列化问题.md\":\"BpGQFNlZ\",\"frame_netty_线程模型.md\":\"CpXQBHGp\",\"frame_netty_编解码器.md\":\"DobcG4Rc\",\"frame_netty_资源管理和simplechannelinboundhandler.md\":\"N9og9Tta\",\"frame_netty_零拷贝.md\":\"ZoD8GyOn\",\"frame_spring_aop.md\":\"CXd1UNBb\",\"frame_spring_applicationcontext和beanfactory区别.md\":\"jKJL1o8n\",\"frame_spring_aware接口.md\":\"CBLZ8qj_\",\"frame_spring_beanfactory和factorybean总结.md\":\"C0rrxDhe\",\"frame_spring_bytebuddy实现动态代理.md\":\"CBAtBnDx\",\"frame_spring_custom_aop.md\":\"5Fw7G0Ao\",\"frame_spring_custom_boot.md\":\"DPda_rtZ\",\"frame_spring_custom_ioc.md\":\"dZXpXrSN\",\"frame_spring_custom_jdbc.md\":\"q2WmY7xe\",\"frame_spring_custom_mvc.md\":\"3E_d3q5w\",\"frame_spring_custom_声明式事务.md\":\"C-hbqy9u\",\"frame_spring_custom_手写spring.md\":\"DrgJCuIg\",\"frame_spring_index.md\":\"U8BuNyqD\",\"frame_spring_spi机制.md\":\"CIgRgpx3\",\"frame_spring_spring中bean加载流程.md\":\"St8qistD\",\"frame_spring_spring中bean的作用域.md\":\"C1CqQR9c\",\"frame_spring_spring事务总结.md\":\"CsQz_Q_U\",\"frame_spring_spring依赖注入.md\":\"Cf3NfbJM\",\"frame_spring_spring如何解决循环依赖.md\":\"CAShwFdt\",\"frame_spring_spring框架概述.md\":\"vnvavftk\",\"frame_spring_spring自定义注解扫描.md\":\"OE5Y_ZOf\",\"frame_spring_spring配置文件加载顺序.md\":\"084hZ5HP\",\"frame_springboot_index.md\":\"CVMKpb2U\",\"frame_springboot_springboot使用apo记录操作日志.md\":\"BktGsF9X\",\"frame_springboot_springboot能同时处理多少请求.md\":\"CCBzh9K8\",\"frame_springboot_springboot项目自动初始化数据库.md\":\"B1nV2PbJ\",\"frame_springcloud_feigh远程调用原理.md\":\"BkdcG40F\",\"frame_springcloud_gateway.md\":\"Bo20xHJa\",\"frame_springcloud_index.md\":\"hUsLIUpX\",\"frame_springcloud_nacos.md\":\"CDmbVwqa\",\"frame_springcloud_seata分布式事务.md\":\"DDXjHDyc\",\"frame_springcloud_sentinel原理.md\":\"WzuxSiRJ\",\"frame_springcloud_注册中心的演进.md\":\"DVBIAftC\",\"index.md\":\"CHyK4IZJ\",\"java_cache_index.md\":\"HGPt_Rc8\",\"java_cache_多级缓存.md\":\"C9L9fuge\",\"java_cache_本地缓存.md\":\"DrWE8Vuy\",\"java_cache_缓存淘汰算法.md\":\"Bmmf8vMx\",\"java_collection_collection集合概述.md\":\"CNjMTQl0\",\"java_collection_concurrenthashmap1.7.md\":\"3YMQjLQD\",\"java_collection_concurrenthashmap1.8.md\":\"BizWqi3q\",\"java_collection_hashmap1.7.md\":\"BWUI9hy0\",\"java_collection_hashmap1.8.md\":\"CMXN-xs_\",\"java_collection_index.md\":\"DI1N6SG1\",\"java_collection_list集合体系.md\":\"SIRLMEvU\",\"java_collection_set集合体系.md\":\"DS-kTcRA\",\"java_concurrent_index.md\":\"DC9cyN1d\",\"java_concurrent_java高并发.md\":\"Cb_wnB-9\",\"java_concurrent_single_aqs.md\":\"BXoz0xcH\",\"java_concurrent_single_blockqueue阻塞队列.md\":\"PMI_SHZ4\",\"java_concurrent_single_cas.md\":\"DPDP4fwl\",\"java_concurrent_single_synchronized原理.md\":\"CQwpRT-f\",\"java_concurrent_single_threadlocal.md\":\"ks0WNjbt\",\"java_concurrent_single_transmittable-thread-local.md\":\"Bm14IvkR\",\"java_concurrent_single_原子类.md\":\"CYzpuXOT\",\"java_concurrent_single_死锁活锁和饥饿.md\":\"DOXRhfCk\",\"java_concurrent_single_线程池的关闭.md\":\"Chul0_8p\",\"java_concurrent_single_线程池的执行流程.md\":\"Llik_RVG\",\"java_concurrent_single_线程的生命周期.md\":\"0gPtxKXT\",\"java_io_bio.md\":\"BSjp0Giq\",\"java_io_index.md\":\"wgH67MOq\",\"java_io_io多路复用.md\":\"CYi2b7Bw\",\"java_io_nio.md\":\"r-OIE2-l\",\"java_io_reactor模式.md\":\"Cmm-xF98\",\"java_io_基于bio实现rpc框架.md\":\"aZMwzEgB\",\"java_jvm_cpu负载过高排查记录.md\":\"CtQLAXH8\",\"java_jvm_g1收集器.md\":\"BEoc_pYF\",\"java_jvm_index.md\":\"Bc8DLpBj\",\"java_jvm_java类加载器.md\":\"BEJdgZui\",\"java_jvm_jdk调优命令.md\":\"COnULHCl\",\"java_jvm_jvm内存模型.md\":\"DaMSHf8Z\",\"java_jvm_内存问题排查总结.md\":\"BxnMqDVb\",\"java_jvm_可视化工具.md\":\"BEYxLY6I\",\"java_jvm_垃圾回收器.md\":\"CBEhSbwY\",\"java_jvm_垃圾回收算法.md\":\"ClBGhU8v\",\"java_jvm_对象创建.md\":\"CHK1JESM\",\"java_jvm_类加载器.md\":\"DKjbxi88\",\"java_jvm_频繁gc排查.md\":\"Ck4Gk3ml\",\"markdown-examples.md\":\"HDmzSucE\",\"personal_index.md\":\"CXOZE6Qo\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"技术小站\",\"description\":\"生活不止眼前的代码，还有迈向田野的步伐\",\"base\":\"/blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"returnToTopLabel\":\"回到顶部\",\"logo\":\"/logo.ico\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"Java\",\"items\":[{\"text\":\"JVM\",\"link\":\"/java/jvm/\"},{\"text\":\"高并发\",\"link\":\"/java/concurrent/\"},{\"text\":\"IO\",\"link\":\"/java/io/\"},{\"text\":\"缓存\",\"link\":\"/java/cache/\"},{\"text\":\"集合\",\"link\":\"/java/collection/\"}]},{\"text\":\"框架\",\"items\":[{\"text\":\"Spring\",\"link\":\"/frame/spring/\"},{\"text\":\"MyBatis\",\"link\":\"/frame/mybatis/\"},{\"text\":\"SpringBoot\",\"link\":\"/frame/springboot/\"},{\"text\":\"SpringCloud\",\"link\":\"/frame/springcloud/\"},{\"text\":\"Netty\",\"link\":\"/frame/netty/\"}]},{\"text\":\"数据库\",\"items\":[{\"text\":\"MySQL\",\"link\":\"/database/mysql/\"},{\"text\":\"Redis\",\"link\":\"/database/redis/\"},{\"text\":\"ClickHouse\",\"link\":\"/database/clickhouse/\"}]},{\"text\":\"中间件\",\"items\":[{\"text\":\"Elasticsearch\",\"link\":\"/middleware/es/\"},{\"text\":\"Kafka\",\"link\":\"/middleware/kafka/\"},{\"text\":\"RocketMQ\",\"link\":\"/middleware/rocketmq/\"}]},{\"text\":\"设计模式\",\"link\":\"/design/\"}],\"sidebar\":{\"/java/jvm/\":[{\"text\":\"类加载器\",\"collapsed\":false,\"items\":[{\"text\":\"Java类加载器\",\"link\":\"/java/jvm/Java类加载器\"},{\"text\":\"对象创建\",\"link\":\"/java/jvm/对象创建\"}]},{\"text\":\"内存模型\",\"collapsed\":false,\"items\":[{\"text\":\"JVM内存模型\",\"link\":\"/java/jvm/JVM内存模型\"}]},{\"text\":\"垃圾回收\",\"collapsed\":false,\"items\":[{\"text\":\"垃圾回收算法\",\"link\":\"/java/jvm/垃圾回收算法\"},{\"text\":\"垃圾回收器\",\"link\":\"/java/jvm/垃圾回收器\"},{\"text\":\"G1收集器\",\"link\":\"/java/jvm/G1收集器\"}]},{\"text\":\"故障排查\",\"collapsed\":false,\"items\":[{\"text\":\"JDK调优命令\",\"link\":\"/java/jvm/JDK调优命令\"},{\"text\":\"可视化工具\",\"link\":\"/java/jvm/可视化工具\"}]},{\"text\":\"排障记录\",\"collapsed\":false,\"items\":[{\"text\":\"CPU负载过高排查记录\",\"link\":\"/java/jvm/CPU负载过高排查记录\"},{\"text\":\"内存问题排查总结\",\"link\":\"/java/jvm/内存问题排查总结\"},{\"text\":\"频繁GC排查\",\"link\":\"/java/jvm/频繁GC排查\"}]}],\"/java/concurrent/\":[{\"text\":\"Java高并发\",\"collapsed\":false,\"items\":[{\"text\":\"Java高并发\",\"link\":\"/java/concurrent/Java高并发\"}]},{\"text\":\"重点总结\",\"collapsed\":false,\"items\":[{\"text\":\"线程的生命周期\",\"link\":\"/java/concurrent/single/线程的生命周期\"},{\"text\":\"synchronized原理\",\"link\":\"/java/concurrent/single/synchronized原理\"},{\"text\":\"AQS\",\"link\":\"/java/concurrent/single/AQS\"},{\"text\":\"CAS\",\"link\":\"/java/concurrent/single/CAS\"},{\"text\":\"原子类\",\"link\":\"/java/concurrent/single/原子类\"},{\"text\":\"死锁活锁和饥饿\",\"link\":\"/java/concurrent/single/死锁活锁和饥饿\"},{\"text\":\"ThreadLocal\",\"link\":\"/java/concurrent/single/ThreadLocal\"},{\"text\":\"TransmittableThreadLocal\",\"link\":\"/java/concurrent/single/transmittable-thread-local\"},{\"text\":\"线程池的执行流程\",\"link\":\"/java/concurrent/single/线程池的执行流程\"},{\"text\":\"线程池的关闭\",\"link\":\"/java/concurrent/single/线程池的关闭\"},{\"text\":\"BlockQueue阻塞队列\",\"link\":\"/java/concurrent/single/BlockQueue阻塞队列\"}]}],\"/java/io/\":[{\"text\":\"IO\",\"collapsed\":false,\"items\":[{\"text\":\"BIO\",\"link\":\"/java/io/BIO\"},{\"text\":\"基于BIO实现RPC框架\",\"link\":\"/java/io/基于BIO实现RPC框架\"},{\"text\":\"NIO\",\"link\":\"/java/io/NIO\"},{\"text\":\"Reactor模式\",\"link\":\"/java/io/Reactor模式\"},{\"text\":\"IO多路复用\",\"link\":\"/java/io/IO多路复用\"}]}],\"/java/cache/\":[{\"text\":\"缓存\",\"collapsed\":false,\"items\":[{\"text\":\"本地缓存\",\"link\":\"/java/cache/本地缓存.md\"},{\"text\":\"多级缓存\",\"link\":\"/java/cache/多级缓存.md\"},{\"text\":\"缓存淘汰算法\",\"link\":\"/java/cache/缓存淘汰算法.md\"}]}],\"/java/collection/\":[{\"text\":\"Collection集合\",\"collapsed\":false,\"items\":[{\"text\":\"Collection集合概述\",\"link\":\"/java/collection/Collection集合概述\"},{\"text\":\"List集合体系\",\"link\":\"/java/collection/List集合体系\"},{\"text\":\"Set集合体系\",\"link\":\"/java/collection/Set集合体系\"}]},{\"text\":\"Map集合\",\"collapsed\":false,\"items\":[{\"text\":\"HashMap-1.7\",\"link\":\"/java/collection/HashMap1.7\"},{\"text\":\"ConcurrentHashMap-1.7\",\"link\":\"/java/collection/ConcurrentHashMap1.7\"},{\"text\":\"HashMap-1.8\",\"link\":\"/java/collection/HashMap1.8\"},{\"text\":\"ConcurrentHashMap-1.8\",\"link\":\"/java/collection/ConcurrentHashMap1.8\"}]}],\"/frame/spring/\":[{\"text\":\"Spring框架\",\"collapsed\":false,\"items\":[{\"text\":\"Spring框架概述\",\"link\":\"/frame/spring/Spring框架概述\"},{\"text\":\"ApplicationContext和BeanFactory区别\",\"link\":\"/frame/spring/ApplicationContext和BeanFactory区别\"},{\"text\":\"BeanFactory和FactoryBean总结\",\"link\":\"/frame/spring/BeanFactory和FactoryBean总结\"},{\"text\":\"Spring中Bean的作用域\",\"link\":\"/frame/spring/Spring中Bean的作用域\"},{\"text\":\"Spring中Bean加载流程\",\"link\":\"/frame/spring/Spring中Bean加载流程\"},{\"text\":\"Spring中Bean加载流程\",\"link\":\"/frame/spring/Spring中Bean加载流程\"},{\"text\":\"Spring依赖注入\",\"link\":\"/frame/spring/Spring依赖注入\"},{\"text\":\"Spring如何解决循环依赖\",\"link\":\"/frame/spring/Spring如何解决循环依赖\"},{\"text\":\"AOP\",\"link\":\"/frame/spring/AOP\"},{\"text\":\"Spring事务总结\",\"link\":\"/frame/spring/Spring事务总结\"},{\"text\":\"Aware接口\",\"link\":\"/frame/spring/Aware接口\"},{\"text\":\"Spi机制\",\"link\":\"/frame/spring/Spi机制\"},{\"text\":\"Spring配置文件加载顺序\",\"link\":\"/frame/spring/Spring配置文件加载顺序\"}]},{\"text\":\"使用总结\",\"collapsed\":false,\"items\":[{\"text\":\"Spring自定义注解扫描\",\"link\":\"/frame/spring/Spring自定义注解扫描\"},{\"text\":\"ByteBuddy实现动态代理\",\"link\":\"/frame/spring/ByteBuddy实现动态代理\"}]},{\"text\":\"手写Spring\",\"collapsed\":false,\"items\":[{\"text\":\"手写Spring\",\"link\":\"/frame/spring/custom/手写Spring\"},{\"text\":\"IOC\",\"link\":\"/frame/spring/custom/IOC\"},{\"text\":\"AOP\",\"link\":\"/frame/spring/custom/AOP\"},{\"text\":\"JDBC\",\"link\":\"/frame/spring/custom/JDBC\"},{\"text\":\"声明式事务\",\"link\":\"/frame/spring/custom/声明式事务\"},{\"text\":\"MVC\",\"link\":\"/frame/spring/custom/MVC\"},{\"text\":\"Boot\",\"link\":\"/frame/spring/custom/Boot\"}]}],\"/frame/springboot/\":[{\"text\":\"SpringBoot\",\"collapsed\":false,\"items\":[{\"text\":\"SpringBoot能同时处理多少请求\",\"link\":\"/frame/springboot/SpringBoot能同时处理多少请求\"},{\"text\":\"SpringBoot使用APO记录操作日志\",\"link\":\"/frame/springboot/SpringBoot使用APO记录操作日志\"},{\"text\":\"SpringBoot项目自动初始化数据库\",\"link\":\"/frame/springboot/SpringBoot项目自动初始化数据库\"}]}],\"/frame/mybatis/\":[{\"text\":\"手写MyBatis\",\"collapsed\":false,\"items\":[{\"text\":\"手写MyBatis\",\"link\":\"/frame/mybatis/custom/手写MyBatis\"},{\"text\":\"映射器-mapper\",\"link\":\"/frame/mybatis/custom/映射器-mapper\"},{\"text\":\"数据源\",\"link\":\"/frame/mybatis/custom/数据源\"},{\"text\":\"SQL执行器\",\"link\":\"/frame/mybatis/custom/SQL执行器\"},{\"text\":\"xml解析\",\"link\":\"/frame/mybatis/custom/xml解析\"}]}],\"/frame/springcloud/\":[{\"text\":\"SpringCloud\",\"collapsed\":false,\"items\":[{\"text\":\"注册中心的演进\",\"link\":\"/frame/springcloud/注册中心的演进\"},{\"text\":\"Nacos\",\"link\":\"/frame/springcloud/Nacos\"},{\"text\":\"Gateway\",\"link\":\"/frame/springcloud/Gateway\"},{\"text\":\"Feigh远程调用原理\",\"link\":\"/frame/springcloud/Feigh远程调用原理\"},{\"text\":\"Sentinel原理\",\"link\":\"/frame/springcloud/Sentinel原理\"},{\"text\":\"Seata分布式事务\",\"link\":\"/frame/springcloud/Seata分布式事务\"}]}],\"/frame/netty/\":[{\"text\":\"基础总结\",\"collapsed\":false,\"items\":[{\"text\":\"Netty常用组件\",\"link\":\"/frame/netty/Netty常用组件.md\"},{\"text\":\"Handler的共享和并发安全性\",\"link\":\"/frame/netty/Handler的共享和并发安全性.md\"},{\"text\":\"资源管理和SimpleChannelInboundHandler\",\"link\":\"/frame/netty/资源管理和SimpleChannelInboundHandler.md\"},{\"text\":\"内置通信传输模式\",\"link\":\"/frame/netty/内置通信传输模式.md\"},{\"text\":\"TCP粘包拆包问题\",\"link\":\"/frame/netty/TCP粘包拆包问题.md\"},{\"text\":\"编解码器\",\"link\":\"/frame/netty/编解码器.md\"},{\"text\":\"HTTP服务和SSL&TLS\",\"link\":\"/frame/netty/HTTP服务和SSL&TLS.md\"},{\"text\":\"序列化问题\",\"link\":\"/frame/netty/序列化问题.md\"},{\"text\":\"写空闲和读空闲\",\"link\":\"/frame/netty/写空闲和读空闲.md\"},{\"text\":\"ByteBuf\",\"link\":\"/frame/netty/ByteBuf.md\"},{\"text\":\"线程模型\",\"link\":\"/frame/netty/线程模型.md\"},{\"text\":\"零拷贝\",\"link\":\"/frame/netty/零拷贝.md\"}]},{\"text\":\"练习总结\",\"collapsed\":false,\"items\":[{\"text\":\"Netty实现通信框架\",\"link\":\"/frame/netty/Netty实现通信框架.md\"},{\"text\":\"基于Netty实现RPC\",\"link\":\"/frame/netty/基于Netty实现RPC.md\"},{\"text\":\"Netty实现文件下载\",\"link\":\"/frame/netty/Netty实现文件下载.md\"}]}],\"/database/mysql/\":[{\"text\":\"MySQL基础\",\"collapsed\":false,\"items\":[{\"text\":\"MySQL基础架构\",\"link\":\"/database/mysql/MySQL基础架构.md\"},{\"text\":\"InnoDB存储引擎\",\"link\":\"/database/mysql/InnoDB存储引擎.md\"},{\"text\":\"MySQL日志系统\",\"link\":\"/database/mysql/MySQL日志系统.md\"},{\"text\":\"一条更新SQL的执行过程\",\"link\":\"/database/mysql/一条更新SQL的执行过程.md\"},{\"text\":\"事务隔离\",\"link\":\"/database/mysql/事务隔离.md\"},{\"text\":\"B树和B+树\",\"link\":\"/database/mysql/B树和B+树.md\"},{\"text\":\"索引\",\"link\":\"/database/mysql/索引.md\"},{\"text\":\"锁\",\"link\":\"/database/mysql/锁.md\"},{\"text\":\"行锁\",\"link\":\"/database/mysql/行锁.md\"}]},{\"text\":\"MySQL总结\",\"collapsed\":false,\"items\":[{\"text\":\"SQL语句的抖动问题\",\"link\":\"/database/mysql/SQL语句的抖动问题.md\"},{\"text\":\"索引失效的场景\",\"link\":\"/database/mysql/索引失效的场景.md\"},{\"text\":\"explain使用总结\",\"link\":\"/database/mysql/explain使用总结.md\"},{\"text\":\"慢查询日志\",\"link\":\"/database/mysql/慢查询日志.md\"}]},{\"text\":\"问题总结\",\"collapsed\":false,\"items\":[{\"text\":\"OrderBy和limit混用的bug\",\"link\":\"/database/mysql/OrderBy和limit混用的bug.md\"},{\"text\":\"MySQL的binlog日志过期删除\",\"link\":\"/database/mysql/MySQL的binlog日志过期删除.md\"},{\"text\":\"MySQL根据idb文件恢复数据\",\"link\":\"/database/mysql/MySQL根据idb文件恢复数据.md\"}]}],\"/database/redis/\":[{\"text\":\"redis\",\"collapsed\":false,\"items\":[{\"text\":\"redis数据类型\",\"link\":\"/database/redis/redis数据类型\"},{\"text\":\"redis数据类型原理\",\"link\":\"/database/redis/redis数据类型原理\"},{\"text\":\"redis的持久化\",\"link\":\"/database/redis/redis的持久化\"},{\"text\":\"过期策略\",\"link\":\"/database/redis/过期策略\"},{\"text\":\"内存淘汰策略\",\"link\":\"/database/redis/内存淘汰策略\"},{\"text\":\"LRU和LFU算法\",\"link\":\"/database/redis/LRU和LFU算法\"},{\"text\":\"redis实现分布式锁\",\"link\":\"/database/redis/redis实现分布式锁\"},{\"text\":\"Redisson\",\"link\":\"/database/redis/Redisson\"},{\"text\":\"redis事务\",\"link\":\"/database/redis/redis事务\"},{\"text\":\"redis集群\",\"link\":\"/database/redis/redis集群\"},{\"text\":\"缓存问题\",\"link\":\"/database/redis/缓存问题\"},{\"text\":\"布隆过滤器\",\"link\":\"/database/redis/布隆过滤器\"}]}],\"/database/clickhouse/\":[{\"text\":\"ClickHouse\",\"collapsed\":false,\"items\":[{\"text\":\"ClickHouse基础\",\"link\":\"/database/clickhouse/ClickHouse基础\"},{\"text\":\"ClickHouse高级\",\"link\":\"/database/clickhouse/ClickHouse高级\"},{\"text\":\"为什么弃用Elasticsearch\",\"link\":\"/database/clickhouse/为什么弃用Elasticsearch\"}]}],\"/middleware/es/\":[{\"text\":\"Elasticsearch基础\",\"collapsed\":false,\"items\":[{\"text\":\"Elasticsearch基础概念\",\"link\":\"/middleware/es/Elasticsearch基础概念.md\"},{\"text\":\"Elasticsearch检索\",\"link\":\"/middleware/es/Elasticsearch检索.md\"},{\"text\":\"Elasticsearch聚合查询\",\"link\":\"/middleware/es/Elasticsearch聚合查询.md\"},{\"text\":\"ES滚动查询-Scroll\",\"link\":\"/middleware/es/ES滚动查询-Scroll.md\"},{\"text\":\"批量操作Bulk和BulkProcessor\",\"link\":\"/middleware/es/批量操作Bulk和BulkProcessor.md\"},{\"text\":\"BulkProcessor死锁问题\",\"link\":\"/middleware/es/BulkProcessor死锁问题.md\"},{\"text\":\"并发场景修改文档\",\"link\":\"/middleware/es/并发场景修改文档.md\"},{\"text\":\"ES深度分页问题\",\"link\":\"/middleware/es/ES深度分页问题.md\"},{\"text\":\"ES集群\",\"link\":\"/middleware/es/ES集群.md\"},{\"text\":\"ES分片\",\"link\":\"/middleware/es/ES分片.md\"}]},{\"text\":\"原理总结\",\"collapsed\":false,\"items\":[{\"text\":\"倒排索引原理\",\"link\":\"/middleware/es/倒排索引原理.md\"},{\"text\":\"Elasticsearch写入原理\",\"link\":\"/middleware/es/Elasticsearch写入原理.md\"},{\"text\":\"Elasticsearch查询原理\",\"link\":\"/middleware/es/Elasticsearch查询原理.md\"},{\"text\":\"ES聚合查询原理\",\"link\":\"/middleware/es/ES聚合查询原理.md\"}]},{\"text\":\"使用问题\",\"collapsed\":false,\"items\":[{\"text\":\"ES参数调优\",\"link\":\"/middleware/es/ES参数调优.md\"},{\"text\":\"集群脑裂-参数配置\",\"link\":\"/middleware/es/集群脑裂-参数配置.md\"},{\"text\":\"ES压测记录和esrally使用\",\"link\":\"/middleware/es/ES压测记录和esrally使用.md\"},{\"text\":\"ES的log4j2日志自动清理配置\",\"link\":\"/middleware/es/ES的log4j2日志自动清理配置.md\"}]}],\"/middleware/kafka/\":[{\"text\":\"Kafka配置\",\"collapsed\":false,\"items\":[{\"text\":\"Kafka消费策略\",\"link\":\"/middleware/kafka/Kafka消费策略.md\"},{\"text\":\"Kafka生产者参数\",\"link\":\"/middleware/kafka/Kafka生产者参数.md\"},{\"text\":\"kafka的分区副本规划\",\"link\":\"/middleware/kafka/kafka的分区副本规划.md\"}]},{\"text\":\"Kafka原理总结\",\"collapsed\":false,\"items\":[{\"text\":\"kafka消费模型\",\"link\":\"/middleware/kafka/kafka消费模型.md\"},{\"text\":\"kafka-ACK应答机制\",\"link\":\"/middleware/kafka/kafka-ACK应答机制.md\"},{\"text\":\"kafka解决重复消费\",\"link\":\"/middleware/kafka/kafka解决重复消费.md\"},{\"text\":\"Kafka分区机制策略\",\"link\":\"/middleware/kafka/Kafka分区机制策略.md\"},{\"text\":\"kafka保证消息不丢失\",\"link\":\"/middleware/kafka/kafka保证消息不丢失.md\"},{\"text\":\"消费者组\",\"link\":\"/middleware/kafka/消费者组.md\"},{\"text\":\"__consumer_offsets\",\"link\":\"/middleware/kafka/__consumer_offsets.md\"},{\"text\":\"Kafka总控制器Controller\",\"link\":\"/middleware/kafka/Kafka总控制器Controller.md\"},{\"text\":\"Kafka副本机制\",\"link\":\"/middleware/kafka/Kafka副本机制.md\"},{\"text\":\"Producer发布消息机制\",\"link\":\"/middleware/kafka/Producer发布消息机制.md\"},{\"text\":\"高水位HW和LEO\",\"link\":\"/middleware/kafka/高水位HW和LEO.md\"},{\"text\":\"数据日志分段存储\",\"link\":\"/middleware/kafka/数据日志分段存储.md\"},{\"text\":\"Kafka高性能的原因\",\"link\":\"/middleware/kafka/Kafka高性能的原因.md\"}]},{\"text\":\"使用问题\",\"collapsed\":false,\"items\":[{\"text\":\"Kafka手动重新分区\",\"link\":\"/middleware/kafka/Kafka手动重新分区.md\"}]}],\"/middleware/rocketmq/\":[{\"text\":\"RocketMQ\",\"collapsed\":false,\"items\":[{\"text\":\"RocketMQ基础学习\",\"link\":\"/middleware/rocketmq/RocketMQ基础学习.md\"},{\"text\":\"RocketMQ集群架构\",\"link\":\"/middleware/rocketmq/RocketMQ集群架构.md\"},{\"text\":\"消息样例\",\"link\":\"/middleware/rocketmq/消息样例.md\"},{\"text\":\"顺序消息\",\"link\":\"/middleware/rocketmq/顺序消息.md\"},{\"text\":\"事务消息\",\"link\":\"/middleware/rocketmq/事务消息.md\"},{\"text\":\"如何保证发送消息有序\",\"link\":\"/middleware/rocketmq/如何保证发送消息有序.md\"},{\"text\":\"如何保证消息不丢失\",\"link\":\"/middleware/rocketmq/如何保证消息不丢失.md\"},{\"text\":\"MQ接收消息幂等性\",\"link\":\"/middleware/rocketmq/MQ接收消息幂等性.md\"},{\"text\":\"Kakfa和RocketMQ的区别\",\"link\":\"/middleware/rocketmq/Kakfa和RocketMQ的区别.md\"}]}],\"/design/\":[{\"text\":\"设计模式\",\"collapsed\":false,\"items\":[{\"text\":\"七大基本原则\",\"link\":\"/design/七大基本原则\"},{\"text\":\"创建型\",\"link\":\"/design/创建型\"},{\"text\":\"结构型\",\"link\":\"/design/结构型\"},{\"text\":\"行为型\",\"link\":\"/design/行为型\"}]}],\"/util/\":[{\"title\":\"Maven管理\",\"collapsable\":false,\"children\":[\"/util/maven/Maven管理.md\"]},{\"title\":\"Git\",\"collapsable\":false,\"children\":[]},{\"title\":\"GitHub\",\"collapsable\":false,\"children\":[\"/util/PicGo+GitHub搭建图床.md\"]},{\"title\":\"GitBook\",\"collapsable\":false,\"children\":[\"/util/gitbook/GitBook使用总结.md\",\"/util/gitbook/GitBook插件.md\",\"/util/gitbook/GitBook搭配GitHubPages搭建主页.md\",\"/util/gitbook/GitBook本地环境搭建.md\",\"/util/gitbook/GitBook自动发布GitHub脚本.md\"]},{\"title\":\"VuePress\",\"collapsable\":false,\"children\":[\"/util/vuepress/vuepress总结.md\"]},{\"title\":\"抓包工具\",\"collapsable\":false,\"children\":[\"/util/抓包工具Fiddler的使用总结.md\"]},{\"title\":\"Java工具类\",\"collapsable\":false,\"children\":[\"/util/Java实现复制文件夹下的所有文件.md\",\"/util/Java实现执行系统命令.md\",\"/util/Java实现markdown增加目录.md\"]},{\"title\":\"服务器向\",\"collapsable\":false,\"children\":[\"/util/server/端口占用问题.md\"]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/AlbertYang0801\"}],\"search\":{\"provider\":\"local\"},\"appearance\":\"dark\"},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>