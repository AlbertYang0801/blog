import{_ as e,c as t,o as r,aN as i}from"./chunks/framework.A-MC8nKA.js";const u=JSON.parse('{"title":"redis的事务","description":"","frontmatter":{},"headers":[],"relativePath":"database/redis/redis事务.md","filePath":"database/redis/redis事务.md","lastUpdated":1752827238000}'),l={name:"database/redis/redis事务.md"};function s(o,a,d,n,c,p){return r(),t("div",null,a[0]||(a[0]=[i('<h1 id="redis的事务" tabindex="-1">redis的事务 <a class="header-anchor" href="#redis的事务" aria-label="Permalink to &quot;redis的事务&quot;">​</a></h1><p>redis 的事务，<strong>可以一次执行多个命令，本质上是一组命令的集合，按照顺序串行化执行而不会被其它命令插入</strong>。</p><h2 id="常用命令" tabindex="-1">常用命令 <a class="header-anchor" href="#常用命令" aria-label="Permalink to &quot;常用命令&quot;">​</a></h2><ul><li><p>开启事务 -<code>multi</code></p></li><li><p>执行所有事务 - <code>exec</code></p></li><li><p>取消所有事务 - <code>discard</code></p></li><li><p>监控一个或多个 key - <code>watch</code></p></li><li><p>取消 watch 命令对所有 key 的监控 - <code>unwatch</code></p><p><img src="https://s2.loli.net/2025/06/18/3SDeoKAsTOPNRBX.png" alt="" loading="lazy"></p></li></ul><h3 id="watch监控" tabindex="-1">watch监控 <a class="header-anchor" href="#watch监控" aria-label="Permalink to &quot;watch监控&quot;">​</a></h3><p><strong>watch</strong> 指令，类似乐观锁，在创建事务之前，使用 watch 指令监控某个值。在事务提交时，如果 key 的值已经被别的客户端改变，那么整个事务队列都不会执行。</p><blockquote><p>通过WATCH命令在事务执行之前监控了多个Keys，倘若在WATCH之后有任何Key的值发生了变化，EXEC命令执行的事务都将被放弃，同时返回 Nullmulti-bulk 应答以通知调用者事务执行失败</p></blockquote><p><img src="https://s2.loli.net/2025/06/18/3SDeoKAsTOPNRBX.png" alt="" loading="lazy"></p><p><strong>unwatch</strong> 指令会取消所有 watch 指令的监控。</p><p><img src="https://s2.loli.net/2025/06/18/bzRrscBqojapFHn.png" alt="" loading="lazy"></p><h2 id="三个特性" tabindex="-1">三个特性 <a class="header-anchor" href="#三个特性" aria-label="Permalink to &quot;三个特性&quot;">​</a></h2><p><img src="https://s2.loli.net/2025/06/18/9ZUA8JRvOhcrwN3.png" alt="" loading="lazy"></p><h3 id="为什么redis不支持回滚" tabindex="-1">为什么redis不支持回滚？ <a class="header-anchor" href="#为什么redis不支持回滚" aria-label="Permalink to &quot;为什么redis不支持回滚？&quot;">​</a></h3><p><img src="https://s2.loli.net/2025/06/18/6c3ElxpyKVzgYSH.png" alt="" loading="lazy"></p><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h2><p><a href="https://zhuanlan.zhihu.com/p/56017158" target="_blank" rel="noreferrer">知乎-你应该知道的Redis事务</a></p>',16)]))}const g=e(l,[["render",s]]);export{u as __pageData,g as default};
