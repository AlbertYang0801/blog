import{_ as a,c as n,o as e,aN as i}from"./chunks/framework.A-MC8nKA.js";const g=JSON.parse('{"title":"ES的log4j2日志自动清理配置","description":"","frontmatter":{},"headers":[],"relativePath":"middleware/es/ES的log4j2日志自动清理配置.md","filePath":"middleware/es/ES的log4j2日志自动清理配置.md","lastUpdated":1752827238000}'),l={name:"middleware/es/ES的log4j2日志自动清理配置.md"};function t(p,s,r,o,d,c){return e(),n("div",null,s[0]||(s[0]=[i(`<h1 id="es的log4j2日志自动清理配置" tabindex="-1">ES的log4j2日志自动清理配置 <a class="header-anchor" href="#es的log4j2日志自动清理配置" aria-label="Permalink to &quot;ES的log4j2日志自动清理配置&quot;">​</a></h1><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h2><div class="language-xml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.type = DefaultRolloverStrategy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.fileIndex = nomax</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.type = Delete</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.basepath = \${sys:es.logs.base_path}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.condition.type = IfFileName</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.condition.glob = \${sys:es.logs.cluster_name}-*</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#时间策略</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.condition.nested_condition.type = IfLastModified</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.condition.nested_condition.age = 1D</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.type = DefaultRolloverStrategy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.type = Delete</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.basepath = \${sys:es.logs.base_path}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.condition.type = IfFileName</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.condition.glob = \${sys:es.logs.cluster_name}-*</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#文件大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.condition.nested_condition.type = IfAccumulatedFileSize</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">appender.rolling.strategy.action.condition.nested_condition.exceeds = 2GB</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="根据时间划分日志" tabindex="-1">根据时间划分日志 <a class="header-anchor" href="#根据时间划分日志" aria-label="Permalink to &quot;根据时间划分日志&quot;">​</a></h2><p><img src="https://s2.loli.net/2025/06/26/c3l4KvX9NkSqiFt.png" alt="未命名文件.png" loading="lazy"></p><p><a href="https://blog.csdn.net/weixin_38569499/article/details/83027748" target="_blank" rel="noreferrer">log4j：log4j2配置文件解析_夜雨落花的博客-CSDN博客</a></p><h2 id="模拟日志删除" tabindex="-1">模拟日志删除 <a class="header-anchor" href="#模拟日志删除" aria-label="Permalink to &quot;模拟日志删除&quot;">​</a></h2><p>日志删除机制是在创建日志的时候触发。</p><ol><li><p>查看日志时间</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>stat elasticsearch_runlog-2022-06-20-16-04-59.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://s2.loli.net/2025/06/26/t3uJLoPGq5OE4az.png" alt="未命名文件.png" loading="lazy"></p></li><li><p>更改日志时间</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>touch -d &#39;2022-06-10 16:03:05.749824135 +0800&#39; elasticsearch_runlog-2021-06-20-16-02-59.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://s2.loli.net/2025/06/26/7xUzqpYsPa9hdWg.png" alt="未命名文件.png" loading="lazy"></p></li></ol>`,9)]))}const E=a(l,[["render",t]]);export{g as __pageData,E as default};
