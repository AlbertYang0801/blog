import{_ as s,c as e,o as i,aN as l}from"./chunks/framework.A-MC8nKA.js";const b=JSON.parse('{"title":"MySQL的binlog日志过期删除","description":"","frontmatter":{},"headers":[],"relativePath":"database/mysql/MySQL的binlog日志过期删除.md","filePath":"database/mysql/MySQL的binlog日志过期删除.md","lastUpdated":1752832844000}'),t={name:"database/mysql/MySQL的binlog日志过期删除.md"};function n(r,a,d,o,p,h){return i(),e("div",null,a[0]||(a[0]=[l('<h1 id="mysql的binlog日志过期删除" tabindex="-1">MySQL的binlog日志过期删除 <a class="header-anchor" href="#mysql的binlog日志过期删除" aria-label="Permalink to &quot;MySQL的binlog日志过期删除&quot;">​</a></h1><h2 id="问题" tabindex="-1">问题 <a class="header-anchor" href="#问题" aria-label="Permalink to &quot;问题&quot;">​</a></h2><p>mysql的binlog日志过多导致磁盘告警。</p><p>部署脚本中没有配置 <code>binlog</code> 的失效时间，默认是30天。</p><h2 id="手动清理" tabindex="-1">手动清理 <a class="header-anchor" href="#手动清理" aria-label="Permalink to &quot;手动清理&quot;">​</a></h2><ol><li><p>查看正在使用的binlog</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">master</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>删除指定binlog之前的所有binlog</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">purge </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">binary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bin.000055&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h2 id="配置自动清理" tabindex="-1">配置自动清理 <a class="header-anchor" href="#配置自动清理" aria-label="Permalink to &quot;配置自动清理&quot;">​</a></h2><h3 id="查看日志过期时间" tabindex="-1">查看日志过期时间 <a class="header-anchor" href="#查看日志过期时间" aria-label="Permalink to &quot;查看日志过期时间&quot;">​</a></h3><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">show variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">like</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;%expire_logs%&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><table tabindex="0"><thead><tr><th>Variable</th><th>Value</th></tr></thead><tbody><tr><td>binlog_expire_logs_seconds</td><td>2592000</td></tr><tr><td>expire_logs_days</td><td>0</td></tr></tbody></table><ul><li><p><code>binlog_expire_logs_seconds</code></p><p>8.x 版本之后支持该参数，单位秒。</p></li><li><p><code>expire_logs_days</code></p><p>单位天。</p></li></ul><h3 id="修改my-cnf-配置文件" tabindex="-1">修改my.cnf 配置文件 <a class="header-anchor" href="#修改my-cnf-配置文件" aria-label="Permalink to &quot;修改my.cnf 配置文件&quot;">​</a></h3><ul><li><p>8.x版本</p><p><code>Plain Text binlog_expire_logs_seconds=172800</code></p><p><img src="https://s2.loli.net/2025/07/11/jqfxbT8DQA1msWg.png" alt="image-20250711174815459" loading="lazy"></p></li></ul><h3 id="重启mysql服务" tabindex="-1">重启MySQL服务 <a class="header-anchor" href="#重启mysql服务" aria-label="Permalink to &quot;重启MySQL服务&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>systemctl restart mysqld</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h2><p><a href="http://t.zoukankan.com/jimoliunian-p-13896409.html" target="_blank" rel="noreferrer">Mysql设置binlog过期时间并自动删除 - 走看看</a></p>',17)]))}const g=s(t,[["render",n]]);export{b as __pageData,g as default};
