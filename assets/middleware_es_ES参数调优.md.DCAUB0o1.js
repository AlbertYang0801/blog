import{_ as e,c as t,o as s,aM as r}from"./chunks/framework.Du1sph90.js";const m=JSON.parse('{"title":"ES参数调优","description":"","frontmatter":{},"headers":[],"relativePath":"middleware/es/ES参数调优.md","filePath":"middleware/es/ES参数调优.md","lastUpdated":1752827238000}'),i={name:"middleware/es/ES参数调优.md"};function l(n,a,o,p,d,h){return s(),t("div",null,a[0]||(a[0]=[r('<h1 id="es参数调优" tabindex="-1">ES参数调优 <a class="header-anchor" href="#es参数调优" aria-label="Permalink to &quot;ES参数调优&quot;">​</a></h1><h3 id="预防脑裂" tabindex="-1">预防脑裂 <a class="header-anchor" href="#预防脑裂" aria-label="Permalink to &quot;预防脑裂&quot;">​</a></h3><p><img src="https://s2.loli.net/2025/06/26/nxMuRZEr1f7WCU8.png" alt="" loading="lazy"></p><p><a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/important-configuration-changes.html" target="_blank" rel="noreferrer">重要配置的修改 | Elasticsearch: 权威指南 | Elastic</a></p><h3 id="堆内存设置" tabindex="-1">堆内存设置 <a class="header-anchor" href="#堆内存设置" aria-label="Permalink to &quot;堆内存设置&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> -Xms2730m -Xmx2730m -Duser.timezone=Asia/Shanghai</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>xms和xmx设置一样大小，并设置为略小于pod分配内存的一半。</p><h3 id="分片设置" tabindex="-1">分片设置 <a class="header-anchor" href="#分片设置" aria-label="Permalink to &quot;分片设置&quot;">​</a></h3><p>分片过小或过多都会影响es的查询速率。</p><p>一经设置无法修改。</p><p>目前是10个分片，数据量不大的情况下，**设置为5个分片进行测试一下。**1个、和node数量一致分片测试。</p><p>1GB 20个分片</p><p>1个 20G～40GB</p><h3 id="副本数量" tabindex="-1">副本数量 <a class="header-anchor" href="#副本数量" aria-label="Permalink to &quot;副本数量&quot;">​</a></h3><p>目前是1个</p><h3 id="索引缓冲区大小" tabindex="-1">索引缓冲区大小 <a class="header-anchor" href="#索引缓冲区大小" aria-label="Permalink to &quot;索引缓冲区大小&quot;">​</a></h3><p><img src="https://s2.loli.net/2025/06/26/GKRof1IHBFebmY6.png" alt="" loading="lazy"></p><p><img src="https://s2.loli.net/2025/06/26/sLCkAeYGiXyg41E.png" alt="" loading="lazy"></p><p>Refresh刷新间隔可以调整10s。同时缓冲区可以调大一点。</p><hr><p><img src="https://s2.loli.net/2025/06/26/eSVJcQIzh6RjTNq.png" alt="" loading="lazy"></p>',21)]))}const u=e(i,[["render",l]]);export{m as __pageData,u as default};
