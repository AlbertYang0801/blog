(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{435:function(t,a,s){"use strict";s.r(a);var e=s(26),i=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"jvm学习笔记"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jvm学习笔记"}},[t._v("#")]),t._v(" JVM学习笔记")]),t._v(" "),s("h2",{attrs:{id:"基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础"}},[t._v("#")]),t._v(" 基础")]),t._v(" "),s("h3",{attrs:{id:"jvm、jdk、jre的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jvm、jdk、jre的区别"}},[t._v("#")]),t._v(" JVM、JDK、JRE的区别")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403102212434.png",alt:"image-20220403102212434"}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("JVM 是 Java虚拟机，是实现 Java 跨平台的核心部分。JVM 隐藏了和操作系统交互的细节，使得被编译后的 Java程序，能在虚拟机运行，并且不与操作系统直接交互。")]),t._v(" "),s("blockquote",[s("p",[t._v("这也是一次编译，能到处运行的原因。只要编译后，使用编译后的 .class 文件借助 JVM 虚拟机可以运行到到多种平台。")])])]),t._v(" "),s("li",[s("p",[t._v("Jre 是 Java 的运行环境，Jre 包含了 Java虚拟机 JVM，并且还包含 JVM 执行 .class 文件时所需要的基础类库。")]),t._v(" "),s("p",[t._v("对于普通用户来说，使用 Jre 就可以运行 Java 程序。")]),t._v(" "),s("ul",[s("li",[t._v("bin 目录对应就是 JVM，而 lib 目录对应 JVM 需要的基础类库。")])]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403103930738.png",alt:"image-20220403103930738"}}),t._v(" "),s("ul",[s("li",[s("p",[t._v("Jre 的 lib 目录下包含了 rt.jar。")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("rt.jar")]),t._v("：Java基础类库，也就是Java doc里面看到的所有的类的class文件。")]),t._v(" "),s("p",[s("strong",[t._v("Java 中常使用到的 lang 包、util 包都在这个 jar 中")]),t._v("。")])])])])]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403104417663.png",alt:"image-20220403104417663"}})]),t._v(" "),s("li",[s("p",[t._v("JDK 是面向开发人员的，在包含 JRE 的基础上，还包含了编译工具。")]),t._v(" "),s("p",[t._v("其中 Java 工具（jstack、jps）等由 Jdk 提供。")]),t._v(" "),s("ul",[s("li",[t._v("JDK 目录下包含着 Jre，还包含 lib 目录，")])]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403103852589.png",alt:"image-20220403103852589"}}),t._v(" "),s("ul",[s("li",[s("p",[t._v("JDK 的 bin 目录包含了一些 Java 工具的可执行文件。")]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403105114681.png",alt:"image-20220403105114681"}})]),t._v(" "),s("li",[s("p",[t._v("JDK 的 lib 目录包含了 "),s("strong",[t._v("tools.jar")]),t._v(" 和 "),s("strong",[t._v("dt.jar")]),t._v("。")]),t._v(" "),s("ul",[s("li",[t._v("tools.jar：是系统用来编译一个类的时候用到的，即执行 javac 的时候用到。")]),t._v(" "),s("li",[t._v("dt.jar：dt.jar 是关于运行环境的类库，主要是swing包。")])]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403104720723.png",alt:"image-20220403104720723"}})])])])]),t._v(" "),s("h3",{attrs:{id:"线程运行诊断"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#线程运行诊断"}},[t._v("#")]),t._v(" 线程运行诊断")]),t._v(" "),s("h4",{attrs:{id:"cpu-占用过多"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cpu-占用过多"}},[t._v("#")]),t._v(" cpu 占用过多")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("top 命令分析某个进程的 cpu 占用情况")])]),t._v(" "),s("li",[s("p",[t._v("ps 命令分析该进程占用 cpu 多的线程。")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" H -eo pid,tid,%cpu "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32655")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403143800487.png",alt:"image-20220403143800487"}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[t._v("使用 jstack 分析 cpu 使用量高的线程，pid = 32665。")]),t._v(" "),s("p",[t._v("jstack 命令产生的日志里 pid 是 16进制，所以需要转换 pid 为 16 进制 7F99 。")]),t._v(" "),s("p",[t._v("可以看到定位到了线程，并且定位到了线程的代码位置。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403144712661.png",alt:"image-20220403144712661"}})])])]),t._v(" "),s("h4",{attrs:{id:"排查死锁"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#排查死锁"}},[t._v("#")]),t._v(" 排查死锁")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("使用 "),s("strong",[t._v("jstack")]),t._v(" 命令排查死锁。")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("jstack PID\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403145429805.png",alt:"image-20220403145429805"}})])]),t._v(" "),s("li",[s("p",[t._v("使用 "),s("strong",[t._v("jconsole")]),t._v(" 检测死锁。")])])]),t._v(" "),s("blockquote",[s("p",[t._v("JDK 提供的可视化工具。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403160435030.png",alt:"image-20220403160435030"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/image-20220403160453993.png",alt:"image-20220403160453993"}})])])}),[],!1,null,null,null);a.default=i.exports}}]);