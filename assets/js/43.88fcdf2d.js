(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{357:function(s,t,a){"use strict";a.r(t);var e=a(18),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"redis八大数据类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis八大数据类型"}},[s._v("#")]),s._v(" redis八大数据类型")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://gitee.com/zztiyjw/JavaAdvanced/tree/master/redis-practice#/zztiyjw/JavaAdvanced/blob/master/redis-practice/src/test/java/com/albert/redis/datastructure/DataStructureTest.java",target:"_blank",rel:"noopener noreferrer"}},[s._v("练习代码地址  redis-practice"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"键-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#键-key"}},[s._v("#")]),s._v(" 键 - key")]),s._v(" "),t("p",[s._v("在了解数据类型之前，先了解一下 redis 的键。")]),s._v(" "),t("p",[s._v("在 redis 中 命令不区分大小写，但是注意 "),t("strong",[s._v("redis 中的 key 和 value 是区分大小写的")]),s._v("。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718224605.png",alt:"image-20210715161837066"}})]),s._v(" "),t("h2",{attrs:{id:"字符串-string"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字符串-string"}},[s._v("#")]),s._v(" 字符串 - string")]),s._v(" "),t("p",[s._v("字符串数据结构是简单的 K-V 模式数据结构。")]),s._v(" "),t("h3",{attrs:{id:"特点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),t("ul",[t("li",[s._v("单值单 value。")]),s._v(" "),t("li",[s._v("二进制安全，可以包含任何数据。")]),s._v(" "),t("li",[s._v("一个键对应 value 值最大能存储数据 512 MB。")])]),s._v(" "),t("h3",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210715163125.png",alt:"image-20210715141418272"}})]),s._v(" "),t("ul",[t("li",[s._v("设置字符串 -  "),t("code",[s._v("set test 100")])]),s._v(" "),t("li",[s._v("查询字符串  - "),t("code",[s._v("get test")])]),s._v(" "),t("li",[s._v("删除字符串 - "),t("code",[s._v("del test")])]),s._v(" "),t("li",[s._v("追加字符串 - "),t("code",[s._v("append test")])]),s._v(" "),t("li",[s._v("查询字符串长度 -  "),t("code",[s._v("strlen test")])]),s._v(" "),t("li",[s._v("批量添加 - "),t("code",[s._v("mset A 1 B 2")])]),s._v(" "),t("li",[s._v("批量获取 - "),t("code",[s._v("mget A B")])]),s._v(" "),t("li",[s._v("先查询再设置 - "),t("code",[s._v("getset hello world")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210715141320.png",alt:"image-20210715141320878"}})]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"自增自减命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自增自减命令"}},[s._v("#")]),s._v(" 自增自减命令")]),s._v(" "),t("p",[s._v("由于 redis 是基于单线程的，这些增减命令都具有原子性。")]),s._v(" "),t("p",[s._v("注意命令只能操作 value 是数字的 key 值。")]),s._v(" "),t("ul",[t("li",[s._v("自增1 -  "),t("code",[s._v("incr count")])]),s._v(" "),t("li",[s._v("自减1 - "),t("code",[s._v("decr count")])]),s._v(" "),t("li",[s._v("自增指定值 - "),t("code",[s._v("incrby count 10")])]),s._v(" "),t("li",[s._v("自减指定值 - "),t("code",[s._v("decrby count 10")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210715141702.png",alt:"image-20210715141702887"}})]),s._v(" "),t("blockquote",[t("p",[s._v("incr 和 decr 命令应用场景很广泛，可用于点赞数量统计等场景。")])]),s._v(" "),t("hr"),s._v(" "),t("ul",[t("li",[s._v("查询字符串指定区间 - "),t("code",[s._v("getrange key start end")])]),s._v(" "),t("li",[s._v("设置字符串指定区间 - "),t("code",[s._v("setrange key offset value")])]),s._v(" "),t("li",[s._v("设置可过期字符串（秒） - "),t("code",[s._v("setex key seconds value")])]),s._v(" "),t("li",[s._v("值不存在可设置 - "),t("code",[s._v("setnx key value")])]),s._v(" "),t("li",[s._v("批量设置值不存在可设置 - "),t("code",[s._v("msetnx key value [key value ...]")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210715144700.png",alt:"image-20210715144700772"}})]),s._v(" "),t("h3",{attrs:{id:"数据结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据结构"}},[s._v("#")]),s._v(" 数据结构")]),s._v(" "),t("p",[s._v("String 的数据结构是简单动态字符串（Simplie Dynamic String，SDS），是可以动态修改的字符串，类似 ArrayList，采用预分配冗余空间的方式来减少内存的频繁分配。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210726163144.png",alt:""}})]),s._v(" "),t("p",[s._v("内存中分配给当前字符串的容量 capacity 一般要高于实际字符串长度。")]),s._v(" "),t("ul",[t("li",[s._v("当字符串长度 < 1MB 时，扩容时当前空间加倍。")]),s._v(" "),t("li",[s._v("当字符串长度 > 1MB 时，扩容时一次增加 1MB 的空间。")]),s._v(" "),t("li",[s._v("字符串最大限制长度为 512MB。")])]),s._v(" "),t("h3",{attrs:{id:"实战总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实战总结"}},[s._v("#")]),s._v(" 实战总结")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("点赞数量")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("新增点赞")]),s._v(" "),t("p",[t("code",[s._v("incr read")])])]),s._v(" "),t("li",[t("p",[s._v("点赞总数")]),s._v(" "),t("p",[t("code",[s._v("get read")])])])])]),s._v(" "),t("li",[t("p",[s._v("文章阅读量")])])]),s._v(" "),t("h2",{attrs:{id:"列表-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列表-list"}},[s._v("#")]),s._v(" 列表 - list")]),s._v(" "),t("p",[s._v("list 是类似双端链表或双端队列的数据结构。")]),s._v(" "),t("h3",{attrs:{id:"特点-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特点-2"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),t("ul",[t("li",[s._v("类似双向链表或双端队列，可以在列表左右两边操作数据。")]),s._v(" "),t("li",[s._v("单值对应多 value。")]),s._v(" "),t("li",[s._v("列表是有序的，按照 value 插入数据对 value 排序。")]),s._v(" "),t("li",[s._v("列表存放的 value 可重复。")])]),s._v(" "),t("p",[s._v("​\t\t"),t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210715163205.png",alt:"image-20210715163205871"}})]),s._v(" "),t("h3",{attrs:{id:"常用命令-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-2"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("ul",[t("li",[s._v("列表左边增加元素 - "),t("code",[s._v("lpush key element [element ...]")])]),s._v(" "),t("li",[s._v("列表右边增加元素 - "),t("code",[s._v("rpush key element [element ...]")])]),s._v(" "),t("li",[s._v("列表左边删除元素 - "),t("code",[s._v("lpop key")])]),s._v(" "),t("li",[s._v("列表右边删除元素 - "),t("code",[s._v("rpop key")])]),s._v(" "),t("li",[s._v("遍历列表（开始～结束） - "),t("code",[s._v("lrange key start stop")])]),s._v(" "),t("li",[s._v("获取列表指定位置元素 - "),t("code",[s._v("lindex key index")])]),s._v(" "),t("li",[s._v("查询列表长度 - "),t("code",[s._v("llen key")])]),s._v(" "),t("li",[s._v("删除多个相同 value - "),t("code",[s._v("lrem key count element")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210715172144.png",alt:"image-20210715172121562"}})]),s._v(" "),t("ul",[t("li",[s._v("截取列表重新赋值 - "),t("code",[s._v("ltrim key start stop")])]),s._v(" "),t("li",[s._v("从源列表右边提取元素放到目的列表 - "),t("code",[s._v("rpoplpush source destination")])]),s._v(" "),t("li",[s._v("修改列表指定位置 value - "),t("code",[s._v("lset key index element")])]),s._v(" "),t("li",[s._v("在列表指定位置前或后添加元素 - "),t("code",[s._v("linsert key BEFORE|AFTER pivot element")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210715172911.png",alt:"image-20210715172911836"}})]),s._v(" "),t("h3",{attrs:{id:"实战总结-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实战总结-2"}},[s._v("#")]),s._v(" 实战总结")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("公众号文章订阅")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("新增文章")]),s._v(" "),t("p",[t("code",[s._v("lpush code java css")])])]),s._v(" "),t("li",[t("p",[s._v("获取推送的最近5篇文章")]),s._v(" "),t("p",[t("code",[s._v("lrange code 0 4")])])])])])]),s._v(" "),t("h2",{attrs:{id:"哈希-hash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#哈希-hash"}},[s._v("#")]),s._v(" 哈希 - hash")]),s._v(" "),t("p",[s._v("hash 的数据结构也是 K-V 模式，但是 hash 的 V 对应 K-V，也就是 "),t("strong",[s._v("K-（K-V）")]),s._v("，适合存储对象。比如存储用户信息，K 是用户Id，V 是用户信息。")]),s._v(" "),t("h3",{attrs:{id:"特点-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特点-3"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),t("ul",[t("li",[s._v("数据结构特点是 K -（K-V），K 和 V 都是字符串类型。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718224641.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"常用命令-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-3"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("ul",[t("li",[s._v("添加元素 - "),t("code",[s._v("hset key field value [field value ...]")])]),s._v(" "),t("li",[s._v("获取元素- "),t("code",[s._v("hget key field")])]),s._v(" "),t("li",[s._v("向哈希表批量添加元素 - "),t("code",[s._v("hmset key field value [field value ...]")])]),s._v(" "),t("li",[s._v("批量获取哈希表元素 - "),t("code",[s._v("hmget key field [field ...]")])]),s._v(" "),t("li",[s._v("获取哈希表所有元素 - "),t("code",[s._v("hgetall key")])]),s._v(" "),t("li",[s._v("删除哈希表中的元素 - "),t("code",[s._v("hdel key field [field ...]")])]),s._v(" "),t("li",[s._v("获取哈希表长度 - "),t("code",[s._v("hlen key")])]),s._v(" "),t("li",[s._v("判断哈希表中是否存在某个 key - "),t("code",[s._v("hexists key field")])]),s._v(" "),t("li",[s._v("获取哈希表所有 key - "),t("code",[s._v("hkeys key")])]),s._v(" "),t("li",[s._v("获取哈希表指定 key 的所有 value - "),t("code",[s._v("hvals key")])]),s._v(" "),t("li",[s._v("增加哈希表指定 key 的 value（value 必须是数值，增加整数）- "),t("code",[s._v("hincrby key field increment")])]),s._v(" "),t("li",[s._v("增加哈希表指定 key 的 value （value 必须是数值，支持浮点数）- "),t("code",[s._v("hincrbyfloat key field increment")])]),s._v(" "),t("li",[s._v("对哈希表某个 key 赋值（key 值不存在进行赋值，key 值存在此命令无效）-")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718210828.png",alt:"image-20210718210828555"}})]),s._v(" "),t("h3",{attrs:{id:"实战总结-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实战总结-3"}},[s._v("#")]),s._v(" 实战总结")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("购物车")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("添加商品")]),s._v(" "),t("p",[t("code",[s._v("hset shopcart 10001 1")])])]),s._v(" "),t("li",[t("p",[s._v("增加商品数量")]),s._v(" "),t("p",[t("code",[s._v("hincreby shopcart 10001 1")])])]),s._v(" "),t("li",[t("p",[s._v("统计购物车商品总数")]),s._v(" "),t("p",[t("code",[s._v("hlen shopcar")])])]),s._v(" "),t("li",[t("p",[s._v("删除商品")]),s._v(" "),t("p",[t("code",[s._v("hdel shopcart 10001")])])]),s._v(" "),t("li",[t("p",[s._v("获取购物车列表")]),s._v(" "),t("p",[t("code",[s._v("hgetall shopcart")])])])])])]),s._v(" "),t("h2",{attrs:{id:"无序集合-set"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#无序集合-set"}},[s._v("#")]),s._v(" 无序集合 - set")]),s._v(" "),t("p",[s._v("set 是一种无序集合，存储元素无序并且不可重复。")]),s._v(" "),t("h3",{attrs:{id:"特点-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特点-4"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),t("ul",[t("li",[s._v("单值对应多 value。")]),s._v(" "),t("li",[s._v("set 集合存放元素是"),t("strong",[s._v("无序")]),s._v("的。")]),s._v(" "),t("li",[s._v("set 集合存放的元素是"),t("strong",[s._v("不可重复的")]),s._v("。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718224733.png",alt:"image-20210718224733903"}})]),s._v(" "),t("h3",{attrs:{id:"常用命令-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-4"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("ul",[t("li",[s._v("添加元素 - "),t("code",[s._v("sadd key member [member ...]")])]),s._v(" "),t("li",[s._v("遍历集合元素 - "),t("code",[s._v("smembers key")])]),s._v(" "),t("li",[s._v("判断某个元素是否存在集合中 - "),t("code",[s._v("sismember key member")])]),s._v(" "),t("li",[s._v("获取集合中元素个数 - "),t("code",[s._v("scard key")])]),s._v(" "),t("li",[s._v("删除集合元素 - "),t("code",[s._v("srem key member [member ...]")])]),s._v(" "),t("li",[s._v("从集合从随机获取几个数（不删除）- "),t("code",[s._v("srandmember key [count]")])]),s._v(" "),t("li",[s._v("集合元素随机出栈 - "),t("code",[s._v("spop key [count]")])]),s._v(" "),t("li",[s._v("将一个集合内的某个值赋给另一个集合 - "),t("code",[s._v("smove source destination member")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718203023.png",alt:"image-20210718203023584"}})]),s._v(" "),t("h3",{attrs:{id:"数据集合类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据集合类"}},[s._v("#")]),s._v(" 数据集合类")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("差集 - "),t("code",[s._v("sdiff key [key ...]")])])]),s._v(" "),t("li",[t("p",[s._v("交集 - "),t("code",[s._v("sinter key [key ...]")])])]),s._v(" "),t("li",[t("p",[s._v("并集 - "),t("code",[s._v("sunion key [key ...]")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718203236.png",alt:"image-20210718203236165"}})]),s._v(" "),t("h3",{attrs:{id:"实战总结-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实战总结-4"}},[s._v("#")]),s._v(" 实战总结")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("景点预约功能")]),s._v(" "),t("ul",[t("li",[s._v("新增预约")]),s._v(" "),t("li",[s._v("取消预约")]),s._v(" "),t("li",[s._v("判断用户是否预约过")]),s._v(" "),t("li",[s._v("统计预约总人数")]),s._v(" "),t("li",[s._v("展示预约用户信息")])])]),s._v(" "),t("li",[t("p",[s._v("抽奖功能")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("参加抽奖")])]),s._v(" "),t("li",[t("p",[s._v("统计参加人数")])]),s._v(" "),t("li",[t("p",[s._v("随机抽两个人（不限次数）")]),s._v(" "),t("p",[t("code",[s._v("srandmember key [count]")])])]),s._v(" "),t("li",[t("p",[s._v("随机抽两人（只能中一次）")]),s._v(" "),t("p",[t("code",[s._v("spop key [count]")])])])])]),s._v(" "),t("li",[t("p",[s._v("微博共同关注的人")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("对两个用户关注的人取交集")]),s._v(" "),t("p",[t("code",[s._v("sinter userA userB")])])])])]),s._v(" "),t("li",[t("p",[s._v("QQ - 可能认识的人")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("对两个用户取差集")]),s._v(" "),t("p",[t("code",[s._v("sdiff userA userB")])])])])])]),s._v(" "),t("h2",{attrs:{id:"有序集合-zset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有序集合-zset"}},[s._v("#")]),s._v(" 有序集合 - zset")]),s._v(" "),t("p",[s._v("zset 是有序版本，是在 set 集合的基础上，增加一个 score 值，来进行排序。")]),s._v(" "),t("h3",{attrs:{id:"特点-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特点-5"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),t("ul",[t("li",[s._v("数据结构是  "),t("code",[s._v("k v1 score1 v2 score2")])]),s._v(" "),t("li",[s._v("zset 集合存放元素是"),t("strong",[s._v("有序")]),s._v("的。")]),s._v(" "),t("li",[s._v("zset 集合存放元素也是"),t("strong",[s._v("不可重复")]),s._v("的。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718224715.png",alt:"image-20210718224715172"}})]),s._v(" "),t("h3",{attrs:{id:"常用命令-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-5"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("添加元素 - "),t("code",[s._v("zadd key [NX|XX] [CH] [INCR] score member [score member ...]")])])]),s._v(" "),t("li",[t("p",[s._v("遍历元素（可选是否显示分数） - "),t("code",[s._v("zrange key start stop [WITHSCORES]")])])]),s._v(" "),t("li",[t("p",[s._v("删除集合中某个元素 - "),t("code",[s._v("zrem key member [member ...]")])])]),s._v(" "),t("li",[t("p",[s._v("根据分数过滤元素 - "),t("code",[s._v("zrangebyscore key min max [WITHSCORES] [LIMIT offset count]")])]),s._v(" "),t("p",[s._v("可以选择展示分数（withscores）和限制元素个数（limit）。")])]),s._v(" "),t("li",[t("p",[s._v("对集合中某个元素进行增量 - "),t("code",[s._v("zincrby key increment member")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718223443.png",alt:"image-20210718223443609"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718211946.png",alt:"image-20210718211946513"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("获取集合中元素总个数 - "),t("code",[s._v("zcard key")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("获取集合指定分数区间的元素个数")]),s._v(" - "),t("code",[s._v("zcount key min max")])])]),s._v(" "),t("li",[t("p",[s._v("获取集合中指定元素的下标 - "),t("code",[s._v("zrank key member")])])]),s._v(" "),t("li",[t("p",[s._v("获取集合中指定元素的分数 - "),t("code",[s._v("zscore key member")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("倒序遍历集合区间")]),s._v(" - "),t("code",[s._v("zrevrange key start stop [WITHSCORES]")])])]),s._v(" "),t("li",[t("p",[s._v("倒序获取集合中某个元素的下标 - "),t("code",[s._v("zrevrank key member")])])]),s._v(" "),t("li",[t("p",[s._v("按照倒序根据分数过滤元素 - "),t("code",[s._v("zrevrangebyscore key max min [WITHSCORES] [LIMIT offset count]")])]),s._v(" "),t("p",[s._v("从最大值到最小值过滤，可以选择展示分数（withscores）和限制元素个数（limit）。")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210718214057.png",alt:"image-20210718214057384"}})]),s._v(" "),t("h3",{attrs:{id:"实战总结-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实战总结-5"}},[s._v("#")]),s._v(" 实战总结")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("销售排行榜")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("增加商品销量")]),s._v(" "),t("p",[t("code",[s._v("zincrby book 1 java")])])]),s._v(" "),t("li",[t("p",[s._v("查询前十条销售量的商品")]),s._v(" "),t("p",[t("code",[s._v("zrevrange book 0 9 WITHSCORES")])])])])]),s._v(" "),t("li",[t("p",[s._v("微博热搜排行榜")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("添加新闻初始热度")]),s._v(" "),t("p",[t("code",[s._v("zadd weibo 250000 test")])])]),s._v(" "),t("li",[t("p",[s._v("点击增加热度")]),s._v(" "),t("p",[t("code",[s._v("zincrby weibo 1 test")])])]),s._v(" "),t("li",[t("p",[s._v("查询前十条热度最高的新闻")]),s._v(" "),t("p",[t("code",[s._v("zrevrange weibo 0 9 WITHSCORES")])])])])])]),s._v(" "),t("h2",{attrs:{id:"位图-bitmaps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#位图-bitmaps"}},[s._v("#")]),s._v(" 位图 - bitmaps")]),s._v(" "),t("p",[s._v("bitmaps 又称位图，本身并不是一种实际的数据结构，而是基于 String 数据类型的按位操作。bitmaps 本质上是数组，数组由多个二进制位组成，每个二进制位只能存储 0 和 1。")]),s._v(" "),t("h3",{attrs:{id:"特点-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特点-6"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("优点")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("位图数据结构操作二进制位，只有 0 和 1 两个值。")]),s._v(" "),t("blockquote",[t("p",[s._v("只支持存储 0 和 1，不支持存储其它数据类型。")])])]),s._v(" "),t("li",[t("p",[s._v("基于 String 数据类型，bitmaps 最大存储长度为 512 MB。")]),s._v(" "),t("blockquote",[t("p",[s._v("由于 String 数据类型的数据结构为 SDS （简单动态字符串），SDS 最大长度为 512MB，所以 bitmaps 的最大长度是 512MB。")])])]),s._v(" "),t("li",[t("p",[s._v("由于 Bitmaps 是按位操作，所以存储时可以极大的节省空间。")]),s._v(" "),t("blockquote",[t("p",[s._v("512MB （2^32）内存可以存储将近 42.9 亿的字节信息。")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("缺点")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("由于 Bitmaps 是按位操作，当二进制位的偏移量很大时，会比较耗时。")])]),s._v(" "),t("li",[t("p",[s._v("Bitmaps 有时可能会浪费空间。")]),s._v(" "),t("blockquote",[t("p",[s._v("Bitmaps 底层基于 SDS，底层字符串可以根据输入的位次，进行扩展以保存 value 到指定偏移量，对应的空白位置以 0 填充。")]),s._v(" "),t("p",[s._v("如果连续输入比较稀疏（输入1，30000等跨度比较大的位次），会浪费大量内存空间。")])])]),s._v(" "),t("li",[t("p",[s._v("若 Bitmaps 操作大的 offset 时，对内存的分配可能阻塞 Redis 服务器。")])])])])]),s._v(" "),t("h3",{attrs:{id:"常用命令-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-6"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("向指定偏移量 bit 位置设置值 - "),t("code",[s._v("setbit key offset value")])]),s._v(" "),t("blockquote",[t("p",[s._v("当 key 不存在时，自动生成一个新的字符串。")]),s._v(" "),t("p",[s._v("offset 参数值必须大于等于 0，小于 2^32。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210809143928.jpeg",alt:"img"}})]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" set hello big\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" getbit hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" setbit hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get hello \n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cig"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" setbit world "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get world\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\x00\\x00\\x00\\x00\\x00\\x00 "')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" setbit world "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get world\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\x00\\x00\\x00\\x00\\x00\\x00\\x00"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("获取位图指定 bit 的值 - "),t("code",[s._v("getbit key offset")])]),s._v(" "),t("p",[s._v("使用 getbit 命令获取 String 类型指定 bit 的值。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210809143513.jpeg",alt:"img"}})]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" set hello big\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" getbit hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("统计位图指定区间中 bit 为 1 的总数量 - "),t("code",[s._v("bitcount key [start end]")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" setbit hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" setbit hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" bitcount hello\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("对一个或多个 key 执行逻辑操作（与、非、或、异或） - "),t("code",[s._v("bitop operation destkey key [key ...]")])]),s._v(" "),t("p",[s._v("【BITOP】支持逻辑操作，包含 且 AND、或 OR、异或 XOR、非 NOT；")]),s._v(" "),t("ul",[t("li",[s._v("且 AND(&)：同 1 为 1，其余为 0；")]),s._v(" "),t("li",[s._v("或 OR(|)：有 1 为 1，同 0 为 0；")]),s._v(" "),t("li",[s._v("异或 XOR(^)：不同为 1，相同为 0；")]),s._v(" "),t("li",[s._v("非NOT(~)：1 变 0，0 变 1；")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("A")]),s._v(" 二进制 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("01000001")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("B")]),s._v(" 二进制 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("01000010")]),s._v("\n@ 二进制 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("01000000")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" set a "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("A")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" set b "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("B")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("OK")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" bitop and ggg a b \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get ggg\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("查询指定字节区间第一个指定 bit （0 或 1）的位置 - "),t("code",[s._v("bitpos key bit [start] [end]")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" setbit hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" setbit hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" setbit hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" bitpos hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" bitpos hello "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"实战总结-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实战总结-6"}},[s._v("#")]),s._v(" 实战总结")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("用户每月签到")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("用户签到")]),s._v(" "),t("p",[t("code",[s._v("setbit signIn:YYYYMM:userId day 1")])])]),s._v(" "),t("li",[t("p",[s._v("统计当月签到总数")]),s._v(" "),t("p",[t("code",[s._v("bitcount signIn:YYYYMM:userId")])])])]),s._v(" "),t("p",[s._v("代码如下：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Service")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bitmaps_SignInService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisUtil")]),s._v(" redisUtil"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisTemplate")]),s._v(" redisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SIGNIN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"signIN"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 用户签到\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("signIn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//当月")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" month "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalDateTimeUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("formatNow")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalDateTimeUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("YEAR_MONTH")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//本月第几天")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" dayOfMonth "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalDateTime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getDayOfMonth")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" redisUtil"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setBit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSignInKey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" month"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dayOfMonth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 获取指定用户某月份签到总数\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("countMonthSignIn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" month"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" signInKey "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSignInKey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" month"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//redisTemplate没有提供bitcount命令，可使用execute调用相关方法")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" execute "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" redisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("execute")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisCallback")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" con "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v(" con"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bitCount")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("signInKey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBytes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Objects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isNull")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("execute"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" execute"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("intValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSignInKey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" month"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SIGNIN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('":"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" month "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('":"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br")])]),t("p",[s._v("测试例子如下：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * bitmaps-用户签到\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bitmapsTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xiaoming"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//签到")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" signInFlag "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bitmapsSignInService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("signIn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" => 签到状态："')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" signInFlag"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" month "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalDateTimeUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("formatNow")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LocalDateTimeUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("YEAR_MONTH")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" signInCount "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bitmapsSignInService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("countMonthSignIn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" month"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" => "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" month "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" => 签到次数为:"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" signInCount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//output")]),s._v("\n    xiaoming "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 签到状态："),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n    xiaoming"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("08")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 签到次数为"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"参考链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://blog.csdn.net/lm324114/article/details/88959531",target:"_blank",rel:"noopener noreferrer"}},[s._v("Redis学习笔记 - Bitmaps（位图）"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://juejin.cn/post/6844903561839525902",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://juejin.cn/post/6844903561839525902"),t("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=n.exports}}]);