(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{371:function(t,e,a){"use strict";a.r(e);var s=a(26),i=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"内存淘汰策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内存淘汰策略"}},[t._v("#")]),t._v(" 内存淘汰策略")]),t._v(" "),a("h2",{attrs:{id:"最大内存设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最大内存设置"}},[t._v("#")]),t._v(" 最大内存设置")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("redis 默认内存是多少？")]),t._v(" "),a("p",[t._v("在 64 位操作系统不限制内存大小，在 32 位操作系统下最多使用 3GB。")])]),t._v(" "),a("li",[a("p",[t._v("查看 redis 最大内存？")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("config get maxmemory\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210725230010.png",alt:"image-20210725225656431"}})])]),t._v(" "),a("li",[a("p",[t._v("修改 redis 内存大小？")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("修改配置文件")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("redis.conf")]),t._v(" 第 859 行可以设置最大内存大小（单位是字节）。")]),t._v(" "),a("blockquote",[a("p",[t._v(": set nu 可以显示文件行号")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210725222546.png",alt:"image-20210725222546949"}})])]),t._v(" "),a("li",[a("p",[t._v("使用命令配置")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" maxmemory "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210725225927.png",alt:"image-20210725225927031"}})])])])]),t._v(" "),a("li",[a("p",[t._v("redis 内存满了之后会怎样?")]),t._v(" "),a("p",[t._v("采用内存淘汰策略，默认是 "),a("code",[t._v("no-enviction")]),t._v("，会抛出 OOM 异常。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210725230125.png",alt:"image-20210725230125654"}})])]),t._v(" "),a("li",[a("p",[t._v("查看内存信息")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("info memory\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210725230742.png",alt:"image-20210725230742686"}})])]),t._v(" "),a("li",[a("p",[t._v("生产上一般怎么设置内存？")]),t._v(" "),a("p",[t._v("推荐设置内存为"),a("strong",[t._v("最大物理内存的四分之三")]),t._v("。")])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"redis内存淘汰策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis内存淘汰策略"}},[t._v("#")]),t._v(" redis内存淘汰策略")]),t._v(" "),a("h3",{attrs:{id:"八种内存淘汰策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八种内存淘汰策略"}},[t._v("#")]),t._v(" 八种内存淘汰策略")]),t._v(" "),a("p",[t._v("在 redis.conf 文件中有体现。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210725232238.png",alt:"image-20210725232238442"}})]),t._v(" "),a("ul",[a("li",[t._v("2个范围\n"),a("ul",[a("li",[t._v("所有 key。")]),t._v(" "),a("li",[t._v("设置了过期时间的 key。")])])]),t._v(" "),a("li",[t._v("4个方式\n"),a("ul",[a("li",[t._v("LRU 算法。")]),t._v(" "),a("li",[t._v("LFU 算法。")]),t._v(" "),a("li",[t._v("random - 随机删除。")]),t._v(" "),a("li",[t._v("ttl - 删除马上要过期的。")])])])]),t._v(" "),a("hr"),t._v(" "),a("ol",[a("li",[t._v("volatile-lru：对所有设置了过期时间的 key 使用 LRU 算法进行删除。")]),t._v(" "),a("li",[t._v("allkeys-lru：对所有 key 使用 LRU 算法进行删除。")]),t._v(" "),a("li",[t._v("volatile-lfu：对所有设置了过期时间的 key 使用 LFU 算法进行删除。")]),t._v(" "),a("li",[t._v("allkeys-lfu：对所有 key 使用 LFU 算法进行删除。")]),t._v(" "),a("li",[t._v("volatile-random ：对所有设置了过期时间的 key 随机删除。")]),t._v(" "),a("li",[t._v("allkeys-random ：对所有 key 随机删除。")]),t._v(" "),a("li",[t._v("volatile-ttl：删除马上要过期的 key。")]),t._v(" "),a("li",[t._v("noeviction："),a("strong",[t._v("默认的内存淘汰策略")]),t._v("，禁止删除数据，能保证数据不丢失。当内存满了的时候，再写入数据会返回错误。")])]),t._v(" "),a("h2",{attrs:{id:"lru算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lru算法"}},[t._v("#")]),t._v(" LRU算法")]),t._v(" "),a("h2",{attrs:{id:"lfu算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lfu算法"}},[t._v("#")]),t._v(" LFU算法")]),t._v(" "),a("h2",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")])])}),[],!1,null,null,null);e.default=i.exports}}]);